<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>ALL about BGP</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.8;
            background-color: #f4f4f4;
            padding: 20px;
        }
        h1, h2 {
            color: #333366;
        }
        .box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        code {
            background: #eee;
            padding: 3px 5px;
            border-radius: 4px;
        }
        pre {
            background: #272822;
            color: #272822;
            padding: 15px;
            border-radius: 8px;
            
        }
        code {
            background-color: #f4f4f4;
            padding: 2px 4px;
            border-radius: 4px;
            font-family: monospace;
        }
        pre {
            color: #e2ff51;
            
        }

        table {
            width: fit-content;
           
        }
       
        
        
    </style>
</head>
<body>

<h1>ЁЯМР eBGP ржЙржжрж╛рж╣рж░ржг</h1>

<div class="box">
    <h2>ржкрж░рж┐ржмрзЗрж╢:</h2>
    <ul>
        <li><strong>Router A</strong> тЖТ ASN: 65001</li>
        <li><strong>Router B</strong> тЖТ ASN: 65002</li>
    </ul>
</div>

<div class="box">
    <h2>Router A (ASN: 65001) ржПрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
    <pre>
router bgp 65001
 neighbor 192.168.12.2 remote-as 65002
 network 10.1.1.0 mask 255.255.255.0
    </pre>
</div>

<div class="box">
    <h2>Router B (ASN: 65002) ржПрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
    <pre>
router bgp 65002
 neighbor 192.168.12.1 remote-as 65001
 network 20.1.1.0 mask 255.255.255.0
    </pre>
</div>

<div class="box">
    <h2>ЁЯУМ ржмрзНржпрж╛ржЦрзНржпрж╛:</h2>
    <ul>
        <li><code>neighbor</code> ржХржорж╛ржирзНржбрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржжрзБржЗржЯрж┐ router ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ eBGP session ржЧржаржи ржХрж░ржЫрзЗред</li>
        <li>Router A рждрж╛рж░ <code>10.1.1.0/24</code> ржПржмржВ Router B рждрж╛рж░ <code>20.1.1.0/24</code> prefix advertise ржХрж░ржЫрзЗред</li>
        <li>ржжрзБржЗржЯрж┐ ржнрж┐ржирзНржи ASN ржерж╛ржХрж╛рзЯ ржПржЯрж┐ ржПржХржЯрж┐ <strong>eBGP</strong> рж╕ржорзНржкрж░рзНржХред</li>
        <li>Prefix advertise ржХрж░рж╛рж░ рж╕ржорзЯ:
            <ul>
                <li>Next-hop рж╣ржмрзЗ advertise ржХрж░рж╛ router-ржПрж░ IPред</li>
                <li>AS_Path ржП router рждрж╛рж░ ASN ржпрзЛржЧ ржХрж░ржмрзЗред</li>
            </ul>
        </li>
    </ul>
</div>

<div class="box">
    <h2>ЁЯУЭ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржп:</h2>
    <ul>
        <li>eBGP-рждрзЗ <strong>TTL ржбрж┐ржлрж▓рзНржЯ рзз</strong>, рждрж╛ржЗ рж╕рж░рж╛рж╕рж░рж┐ рж╕ржВржпрзЛржЧ ржЫрж╛рзЬрж╛ ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛ред</li>
        <li>AS loop prevention ржПрж░ ржЬржирзНржп router ржирж┐ржЬ ASN detect ржХрж░рж▓рзЗ prefix ржмрж╛рждрж┐рж▓ ржХрж░ржмрзЗред</li>
    </ul>
</div>



<h1>BGP Packet Types (ржмрж╛ржВрж▓рж╛ ржЯрзЗржмрж┐рж▓)</h1>

<table border="1">
    <tr>
        <th>ржЯрж╛ржЗржк</th>
        <th>ржирж╛ржо (Name)</th>
        <th>ржХрж╛ржЬрзЗрж░ ржмрж┐ржмрж░ржг (Functional Overview)</th>
    </tr>
    <tr>
        <td>1</td>
        <td>OPEN</td>
        <td>BGP рж╕ржорзНржкрж░рзНржХ (adjacency) ржЧржаржи ржУ рж╕рзНржерж╛ржкржи ржХрж░рзЗ</td>
    </tr>
    <tr>
        <td>2</td>
        <td>UPDATE</td>
        <td>рж░рзБржЯ (routes) advertise, update ржмрж╛ withdraw ржХрж░рзЗ</td>
    </tr>
    <tr>
        <td>3</td>
        <td>NOTIFICATION</td>
        <td>ржХрзЛржирзЛ ржнрзБрж▓ (error) рж╣рж▓рзЗ BGP neighbor-ржХрзЗ ржЬрж╛ржирж╛рзЯ</td>
    </tr>
    <tr>
        <td>4</td>
        <td>KEEPALIVE</td>
        <td>ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ BGP neighbor ржПржЦржирзЛ рж╕ржХрзНрж░рж┐рзЯ (alive) ржЖржЫрзЗ ржХрж┐ржирж╛</td>
    </tr>
</table>



<h2>BGP Message ржЧрзБрж▓рзЛрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд (CSS ржЫрж╛рзЬрж╛ Simple ржЯрзЗржмрж┐рж▓)</h2>

<table border="1">
    <tr>
        <th>ржорзЗрж╕рзЗржЬрзЗрж░ ржирж╛ржо</th>
        <th>ржмрзНржпрж╛ржЦрзНржпрж╛</th>
    </tr>
    <tr>
        <td>OPEN</td>
        <td>
            BGP рж╕ржорзНржкрж░рзНржХ (adjacency) ржЧржаржи ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХрзЗ: BGP version, originating router-ржПрж░ ASN, hold time, BGP identifier (Router ID), ржПржмржВ ржЕржирзНржпрж╛ржирзНржп optional parameterред 
        </td>
    </tr>
    <tr>
        <td>Hold Time</td>
        <td>
            ржкрзНрж░рждрж┐ржЯрж┐ BGP neighbor-ржПрж░ ржЬржирзНржп ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯ (рж╕рзЗржХрзЗржирзНржбрзЗ)ред UPDATE ржмрж╛ KEEPALIVE message ржкрзЗрж▓рзЗ reset рж╣рзЯред Timer рж╢рзЗрж╖ рж╣рж▓рзЗ session ржмржирзНржз рж╣рзЯред ржХржоржкржХрзНрж╖рзЗ рзй рж╕рзЗржХрзЗржирзНржб, ржЕржержмрж╛ рзж рж╣рж▓рзЗ keepalive ржмржирзНржзред Cisco-рждрзЗ default рззрзорзж рж╕рзЗржХрзЗржирзНржбред
        </td>
    </tr>
    <tr>
        <td>BGP Identifier (RID)</td>
        <td>
            рзйрзи-ржмрж┐ржЯрзЗрж░ ржЗржЙржирж┐ржХ ржирж╛ржорзНржмрж╛рж░ ржпрж╛ BGP router-ржХрзЗ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзЗред Loop prevention-ржПржУ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ ржмрж╛ ржЕржЯрзЛ (dynamic) рж╕рзЗржЯ ржХрж░рж╛ ржпрж╛рзЯред ржЕржмрж╢рзНржпржЗ non-zero рж╣рждрзЗ рж╣ржмрзЗред
        </td>
    </tr>
    <tr>
        <td>KEEPALIVE</td>
        <td>
            Neighbor ржЬрзАржмрж┐ржд ржЖржЫрзЗ ржХрж┐ ржирж╛ ржпрж╛ржЪрж╛ржЗрзЯрзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред Hold time-ржПрж░ ржПржХ-рждрзГрждрзАрзЯрж╛ржВрж╢ рж╕ржорзЯ ржкрж░ржкрж░ ржкрж╛ржарж╛ржирзЛ рж╣рзЯред Cisco-рждрзЗ default hold time рззрзорзж рж╕рзЗржХрзЗржирзНржб, рждрж╛ржЗ keepalive ржкрзНрж░рждрж┐ рзмрзж рж╕рзЗржХрзЗржирзНржбрзЗред Hold time рзж рж╣рж▓рзЗ keepalive ржпрж╛рзЯ ржирж╛ред
        </td>
    </tr>
    <tr>
        <td>UPDATE</td>
        <td>
            ржирждрзБржи route advertise, ржкрзБрж░ржирзЛ route withdraw, ржЕржержмрж╛ ржжрзБржЗ ржХрж╛ржЬржЗ ржПржХрж╕рж╛ржерзЗ ржХрж░рзЗред ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХрзЗ NLRI (prefix ржУ BGP attributes)ред ржХржЦржирзЛ keepalive рж╣рж┐рж╕рзЗржмрзЗржУ ржХрж╛ржЬ ржХрж░рзЗред
        </td>
    </tr>
    <tr>
        <td>NOTIFICATION</td>
        <td>
            ржнрзБрж▓ ржзрж░рж╛ ржкрзЬрж▓рзЗ (ржпрзЗржоржи hold timer рж╢рзЗрж╖, capability change, ржЗржЪрзНржЫрж╛ржХрзГржд reset) ржкрж╛ржарж╛ржирзЛ рж╣рзЯред ржПрждрзЗ BGP connection ржмржирзНржз рж╣рзЯрзЗ ржпрж╛рзЯред
        </td>
    </tr>
</table>


<h2>BGP Neighbor States (ржмрж╛ржВрж▓рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛)</h2>

<table border="1">
    <tr>
        <th>State (ржЕржмрж╕рзНржерж╛)</th>
        <th>ржмрж░рзНржгржирж╛ (Description)</th>
    </tr>
    <tr>
        <td>Idle</td>
        <td>рж╢рзБрж░рзБ ржХрж░рж╛рж░ ржзрж╛ржк, TCP connection рждрзИрж░рж┐ рж╣рзЯ ржирж╛ред рж╕ржлрж▓ рж╣рж▓рзЗ Connect ржП ржпрж╛рзЯред</td>
    </tr>
    <tr>
        <td>Connect</td>
        <td>TCP connection рж╕рзНржерж╛ржкржирзЗрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рж╛ рж╣рзЯред рж╕ржлрж▓ рж╣рж▓рзЗ OpenSent ржП ржпрж╛рзЯ, ржмрзНржпрж░рзНрже рж╣рж▓рзЗ Active ржПред</td>
    </tr>
    <tr>
        <td>Active</td>
        <td>TCP connection ржкрзБржирж░рж╛рзЯ рж╕рзНржерж╛ржкржирзЗрж░ ржЪрзЗрж╖рзНржЯрж╛ред рж╕ржлрж▓ рж╣рж▓рзЗ OpenSent, ржмрзНржпрж░рзНрже рж╣рж▓рзЗ Idleред</td>
    </tr>
    <tr>
        <td>OpenSent</td>
        <td>TCP connection рж╕ржлрж▓ рж╣рж▓рзЗ OPEN message ржкрж╛ржарж╛рзЯ ржУ neighbor ржерзЗржХрзЗ message-ржПрж░ ржЕржкрзЗржХрзНрж╖рж╛ред</td>
    </tr>
    <tr>
        <td>OpenConfirm</td>
        <td>KEEPALIVE message ржЪрж╛рж▓рж╛ржЪрж╛рж▓рж┐ рж╣рзЯред рж╕ржм ржарж┐ржХ ржерж╛ржХрж▓рзЗ Established ржП ржпрж╛рзЯред</td>
    </tr>
    <tr>
        <td>Established</td>
        <td>BGP session рж╕ржлрж▓ржнрж╛ржмрзЗ ржЧржарж┐рждред UPDATE, KEEPALIVE, NOTIFICATION ржЪрж╛рж▓рж╛ржЪрж╛рж▓рж┐ рж╣рзЯред</td>
    </tr>
</table>


    <h1>BGP ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛рж░ ржкржжржХрзНрж╖рзЗржкржЧрзБрж▓рж┐</h1>

    <h2>Step 1:</h2>
    <p>BGP рж░рж╛ржЙржЯрж┐ржВ ржкрзНрж░рж╕рзЗрж╕ ржЗржирж┐рж╢рж┐рзЯрж╛рж▓рж╛ржЗржЬ ржХрж░рзБржи ржЧрзНрж▓рзЛржмрж╛рж▓ ржХржорж╛ржирзНржб <code>router bgp as-number</code> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред</p>
    <p><strong>ржЙржжрж╛рж╣рж░ржг:</strong><br>
    <code>router bgp 65001</code></p>

    <h2>Step 2:</h2>
    <p>(ржРржЪрзНржЫрж┐ржХ) BGP рж░рж╛ржЙржЯрж╛рж░ ржЖржЗржбрж┐ (RID) рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХржнрж╛ржмрзЗ рж╕ржВржЬрзНржЮрж╛рзЯрж┐ржд ржХрж░рзБржиред ржбрж╛ржЗржирж╛ржорж┐ржХ RID ржмрж░рж╛ржжрзНржжрзЗрж░ ржЬржирзНржп рж▓рзБржкржмрзНржпрж╛ржХ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ржЧрзБрж▓рж┐рж░ ржоржзрзНржпрзЗ рж╕рж░рзНржмрзЛржЪрзНржЪ IP ржарж┐ржХрж╛ржирж╛ ржмрзНржпржмрж╣рзГржд рж╣рзЯред ржпржжрж┐ ржХрзЛржирзЛ рж▓рзБржкржмрзНржпрж╛ржХ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ рж╕ржХрзНрж░рж┐рзЯ ржирж╛ ржерж╛ржХрзЗ, рждржмрзЗ рж╕ржХрзНрж░рж┐рзЯ рж╕ржм ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗрж░ ржоржзрзНржпрзЗ рж╕рж░рзНржмрзЛржЪрзНржЪ IP ржарж┐ржХрж╛ржирж╛ BGP ржкрзНрж░рж╕рзЗрж╕ ржЗржирж┐рж╢рж┐рзЯрж╛рж▓рж╛ржЗржЬ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ RID рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред</p>
    <p>RID ржкрж░рж┐ржмрж░рзНрждржи ржирж╛ рж╣ржУрзЯрж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ RID ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ ржЙржЪрж┐ржд (рж╕рж╛ржзрж╛рж░ржгржд ржПржХржЯрж┐ рж▓рзБржкржмрзНржпрж╛ржХ ржарж┐ржХрж╛ржирж╛)ред ржпрзЗржХрзЛржирзЛ IPv4 ржарж┐ржХрж╛ржирж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ, ржПржоржиржХрж┐ ржпрзЗржЧрзБрж▓рж┐ рж░рж╛ржЙржЯрж╛рж░рзЗ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ ржирзЗржЗред BGP RID рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХржнрж╛ржмрзЗ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ ржПржХржЯрж┐ ржнрж╛рж▓ ржЕржнрзНржпрж╛рж╕ ржПржмржВ ржПрж░ ржЬржирзНржп <code>bgp router-id router-id</code> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред</p>
    <p><strong>ржЙржжрж╛рж╣рж░ржг:</strong><br>
    <code>bgp router-id 192.168.1.1</code></p>

    <h2>Step 3:</h2>
    <p>BGP neighbor ржПрж░ IP ржарж┐ржХрж╛ржирж╛ ржПржмржВ ржЕржЯрзЛржирзЛржорж╛рж╕ рж╕рж┐рж╕рзНржЯрзЗржо ржиржорзНржмрж░ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзБржи BGP рж░рж╛ржЙржЯрж╛рж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржХржорж╛ржирзНржб <code>neighbor ip-address remote-as as-number</code> ржжрж┐рзЯрзЗред</p>
    <p>BGP ржкрзНржпрж╛ржХрзЗржЯрзЗрж░ ржЯрзНрж░рж╛ржлрж┐ржХ ржкрзНрж░ржмрж╛рж╣ ржмрзЛржЭрж╛ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред ржпржЦржи ржПржХржЯрж┐ BGP ржкрзНржпрж╛ржХрзЗржЯ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ, рж░рж╛ржЙржЯрж╛рж░ рждрж╛рж░ рж╕рзЛрж░рзНрж╕ IP ржарж┐ржХрж╛ржирж╛ neighbor ржПрж░ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ IP ржарж┐ржХрж╛ржирж╛рж░ рж╕рж╛ржерзЗ ржорж┐рж▓рж┐рзЯрзЗ ржлрзЗрж▓рзЗред ржпржжрж┐ рж╕рзЛрж░рзНрж╕ IP ржарж┐ржХрж╛ржирж╛ neighbor ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рж╛ржерзЗ ржорзЗрж▓рзЗ ржирж╛, рждрж╛рж╣рж▓рзЗ ржкрзНржпрж╛ржХрзЗржЯржЯрж┐ ржмрж╛рждрж┐рж▓ рж╣рзЯрзЗ ржпрж╛ржмрзЗред</p>
    <p><strong>ржЙржжрж╛рж╣рж░ржг:</strong><br>
    <code>neighbor 192.168.1.2 remote-as 65002</code></p>

    <h2>Step 4:</h2>
    <p>ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржЗржирж┐рж╢рж┐рзЯрж╛рж▓рж╛ржЗржЬ ржХрж░рзБржи BGP рж░рж╛ржЙржЯрж╛рж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржХржорж╛ржирзНржб <code>address-family afi safi</code> ржжрж┐рзЯрзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, afi ржорж╛ржи рж╣рждрзЗ ржкрж╛рж░рзЗ IPv4 ржПржмржВ IPv6, ржПржмржВ safi ржорж╛ржи рж╣рждрзЗ ржкрж╛рж░рзЗ unicast ржПржмржВ multicastред</p>
    <p><strong>ржЙржжрж╛рж╣рж░ржг:</strong><br>
    <code>address-family ipv4 unicast</code></p>

    <h2>Step 5:</h2>
    <p>BGP neighbor ржПрж░ ржЬржирзНржп ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржЕрзНржпрж╛ржХрзНржЯрж┐ржнрзЗржЯ ржХрж░рзБржи BGP ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржХржорж╛ржирзНржб <code>neighbor ip-address activate</code> ржжрж┐рзЯрзЗред</p>
    <p><strong>ржЙржжрж╛рж╣рж░ржг:</strong><br>
    <code>neighbor 192.168.1.2 activate</code></p>
    





        <h2>BGP рж╕рзЗрж╢ржи рж╕рж╛рж░рж╛ржВрж╢ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛</h2>
        <p>ржПржЗ ржХржорж╛ржирзНржбржЯрж┐ ржжрж┐рзЯрзЗ BGP рж╕рзЗрж╢ржирзЗрж░ рж╕рж╛рж░рж╛ржВрж╢ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ рж╣рзЯред ржирж┐ржЪрзЗ ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг ржжрзЗрзЯрж╛ рж╣рж▓рзЛ:</p>
        
        <pre>
R1# show bgp ipv4 unicast summary
BGP router identifier 192.168.2.2, local AS number 65200
BGP table version is 1, main routing table version 1
Neighbor       V    AS   MsgRcvd   MsgSent   TblVer   InQ   OutQ   Up/Down   State/PfxRcd
10.12.1.2      4  65200   8         9         1        0     0     00:05:23   0
        </pre>

        <p>ржПржЦрж╛ржирзЗ:</p>
        <ul>
            <li><strong>Neighbor</strong>: ржкрж┐рзЯрж╛рж░ IP ржарж┐ржХрж╛ржирж╛ (10.12.1.2)</li>
            <li><strong>V</strong>: BGP рж╕ржВрж╕рзНржХрж░ржг (рзк)</li>
            <li><strong>AS</strong>: ржкрж┐рзЯрж╛рж░-ржПрж░ AS рж╕ржВржЦрзНржпрж╛ (65200)</li>
            <li><strong>MsgRcvd</strong>: ржкрж┐рзЯрж╛рж░ ржерзЗржХрзЗ ржкрзНрж░рж╛ржкрзНржд ржмрж╛рж░рзНрждрж╛рж░ рж╕ржВржЦрзНржпрж╛ (рзо)</li>
            <li><strong>MsgSent</strong>: ржкрж┐рзЯрж╛рж░ржХрзЗ ржкрзНрж░рзЗрж░рж┐ржд ржмрж╛рж░рзНрждрж╛рж░ рж╕ржВржЦрзНржпрж╛ (рзп)</li>
            <li><strong>Up/Down</strong>: рж╕рзЗрж╢ржиржЯрж┐ рзл ржорж┐ржирж┐ржЯ рзирзй рж╕рзЗржХрзЗржирзНржб ржзрж░рзЗ ржЖржк рж░рзЯрзЗржЫрзЗ</li>
        </ul>
    </section>

    <section>
        <h2>BGP ржкрзЗрзЯрж╛рж░ рж╕ржорзНржкрж░рзНржХрж┐ржд ржЖрж░ржУ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рждржерзНржп</h2>
        <p>ржЖрж░ржУ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рждржерзНржп ржкрж╛ржУрзЯрж╛рж░ ржЬржирзНржп, ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ:</p>
        
        <pre>
R2# show bgp ipv4 unicast neighbors 10.12.1.1

BGP neighbor is 10.12.1.1, remote AS65100, external link
BGP version 4, remote router ID 192.168.1.1
BGP state = Established, up for 00:01:04
Last read 00:00:10, last write 00:00:09, hold is 180, keepalive is 60 seconds

Neighbor capabilities:
Route refresh: advertised and received(new)
Four-octets ASN Capability: advertised and received
Address family IPv4 Unicast: advertised and received
Enhanced Refresh Capability: advertised
Multisession Capability:
Stateful switchover support enabled: NO for session 1

Message statistics:
Sent       Rcvd
Opens:                  1          1
Notifications:          0          0
Updates:                0          0
Keepalives:             2          2
Route Refresh:          0          0
Total:                  4          3

Address tracking is enabled, the RIB does have a route to 10.12.1.1
Connections established 2; dropped 1
Last reset 00:01:40, due to Peer closed the session
        </pre>

        <p>ржПржЦрж╛ржирзЗ:</p>
        <ul>
            <li><strong>BGP State</strong>: рж╕рзЗрж╢ржиржЯрж┐ ржмрж░рзНрждржорж╛ржирзЗ Established ржЕржмрж╕рзНржерж╛рзЯ рж░рзЯрзЗржЫрзЗ ржПржмржВ рзз ржорж┐ржирж┐ржЯ рзк рж╕рзЗржХрзЗржирзНржб ржзрж░рзЗ ржЪрж▓ржорж╛ржиред</li>
            <li><strong>Neighbor Capabilities</strong>: ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ ржпрзЗ, BGP ржкрзЗрзЯрж╛рж░ рж░рзБржЯ рж░рж┐ржлрзНрж░рзЗрж╢, ржлрзЛрж░-ржЕрзНржпрж╛ржХржЯрзЗржЯ ржПрж╕ржПржи (ASN) рж╕ржХрзНрж╖ржорждрж╛, IPv4 ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржкрзНрж░ржнрзГрждрж┐ ржмрж┐ржЬрзНржЮрж╛ржкржи ржУ ржЧрзНрж░рж╣ржг ржХрж░ржЫрзЗред</li>
            <li><strong>Message Statistics</strong>: ржПржЦрж╛ржирзЗ ржмрж╛рж░рзНрждрж╛ рж╕ржорзНржкрж░рзНржХрж┐ржд рждржерзНржп ржжрзЗржЦрж╛ржЪрзНржЫрзЗтАФржХрждржмрж╛рж░ ржУржкрзЗржи, ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи, ржЖржкржбрзЗржЯ ржПржмржВ ржХрж┐ржкржЕрж▓рж╛ржЗржн ржорзЗрж╕рзЗржЬ ржкрзНрж░рзЗрж░рж┐ржд ржУ ржкрзНрж░рж╛ржкрзНржд рж╣рзЯрзЗржЫрзЗред</li>
            <li><strong>Address Tracking</strong>: RIB (Routing Information Base) ржерзЗржХрзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ ржпрзЗ, рззрзж.рззрзи.рзз.рзз ржарж┐ржХрж╛ржирж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ рж░рзБржЯ ржЙржкрж╕рзНржерж┐ржд рж░рзЯрзЗржЫрзЗред</li>
        </ul>
    </section>


        <h1>Prefix Advertisement</h1>
        <p>BGP ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯржЧрзБрж▓рж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗ BGP рж╕ржХрзНрж░рж┐рзЯ ржХрж░рзЗ ржирж╛; ржмрж░ржВ ржПржЧрзБрж▓рж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ржЧрзБрж▓рж┐ржХрзЗ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзЗ, ржпрж╛ BGP ржЯрзЗржмрж┐рж▓рзЗ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ рж╣рзЯ, ржпрж╛ Loc-RIB ржЯрзЗржмрж┐рж▓ рж╣рж┐рж╕рзЗржмрзЗ ржкрж░рж┐ржЪрж┐рждред</p>
        
        <h2>ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржмрж┐ржЬрзНржЮрж╛ржкржи ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛</h2>
        <p>ржПржХржЯрж┐ BGP ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛рж░ ржкрж░, BGP ржкрзНрж░рж╕рзЗрж╕ ржЧрзНрж▓рзЛржмрж╛рж▓ RIB-ржП ржПржХржЯрж┐ рж╕ржарж┐ржХ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржорзНржпрж╛ржЪрзЗрж░ ржЬржирзНржп ржЕржирзБрж╕ржирзНржзрж╛ржи ржХрж░рзЗред</p>
        
        <h3>ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ ржПржмржВ RIB</h3>
        <ul>
            <li><strong>рж╕ржВржпрзБржХрзНржд ржирзЗржЯржУрзЯрж╛рж░рзНржХ:</strong> Next-hop BGP ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЯрж┐ 0.0.0.0 рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯ, BGP ржЙрзОрж╕ ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЯрж┐ 'i' (IGP) рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯ, ржПржмржВ BGP ржУрзЯрзЗржЯ 32,768 рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯред</li>
            <li><strong>рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ рж░рзБржЯ ржмрж╛ рж░рж╛ржЙржЯрж┐ржВ ржкрзНрж░рзЛржЯрзЛржХрж▓:</strong> Next-hop BGP ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЯрж┐ RIB-ржП ржерж╛ржХрж╛ ржирзЗржХрзНрж╕ржЯ-рж╣ржк IP ржарж┐ржХрж╛ржирж╛ ржжрж┐рзЯрзЗ рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯ, BGP ржЙрзОрж╕ ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЯрж┐ 'i' (IGP) ржерж╛ржХрзЗ, BGP ржУрзЯрзЗржЯ 32,768 ржерж╛ржХрзЗ, ржПржмржВ MED (Multi-Exit Discriminator) IGP ржорзЗржЯрзНрж░рж┐ржХрзЗрж░ рж╕рж╛ржерзЗ рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯред</li>
        </ul>
    
        <h3>ржкрзНрж░рж╕рзЗрж╕рж┐ржВ рж╕рзНржЯрзЗржкрж╕</h3>
        <p>ржкрзНрж░рждрзНржпрзЗржХржЯрж┐ рж░рзБржЯ Loc-RIB ржЯрзЗржмрж┐рж▓рзЗ BGP ржкрж┐рзЯрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рж╛ рж╣рзЯ ржирж╛ред Loc-RIB ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм рж░рзБржЯ BGP ржкрж┐рзЯрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржЪрзЗрж░ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛ ржЕржирзБрж╕рж░ржг ржХрж░рж╛ рж╣рзЯ:</p>
        <ol>
            <li><strong>ржкржжржХрзНрж╖рзЗржк рзз:</strong> ржкрзНрж░ржорж╛ржгрзАржХрж░ржг ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ рж╣рзЯред ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ рж╣рзЯ ржпрзЗ NRLI ржмрзИржз ржПржмржВ ржирзЗржХрзНрж╕ржЯ-рж╣ржк ржарж┐ржХрж╛ржирж╛ржЯрж┐ ржЧрзНрж▓рзЛржмрж╛рж▓ RIB-ржП рж╕ржорж╛ржзрж╛ржиржпрзЛржЧрзНржпред</li>
            <li><strong>ржкржжржХрзНрж╖рзЗржк рзи:</strong> ржЖржЙржЯржмрж╛ржЙржирзНржб ржкрж┐рзЯрж╛рж░ рж░рж╛ржЙржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛ ржХрж░рж╛ рж╣рзЯред</li>
            <li><strong>ржкржжржХрзНрж╖рзЗржк рзй:</strong> NLRI ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рж╛ рж╣рзЯ BGP ржкрж┐рзЯрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗред</li>
        </ol>
    
        <h3>BGP ржЯрзЗржмрж┐рж▓ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛ржХрж░ржг</h3>
        <p><strong>ржЯрж┐ржк:</strong> BGP рж╢рзБржзрзБржорж╛рждрзНрж░ рж╕рзЗрж░рж╛ ржкрже (Best Path) ржЕржирзНржп BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржХрж╛ржЫрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рзЗ, ржХрзЛржи рж░ржХржорзЗрж░ рж░рзБржЯ (NLRI) BGP Loc-RIB ржЯрзЗржмрж┐рж▓рзЗ ржерж╛ржХрж╛ рж╕рждрзНрждрзНржмрзЗржУред</p>
        
        <h2>ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h2>
        <p>ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯржЯрж┐ BGP рж░рж╛ржЙржЯрж╛рж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржЕржзрзАржирзЗ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржарж┐ржХрж╛ржирж╛ ржлрзНржпрж╛ржорж┐рж▓рж┐рж░ ржоржзрзНржпрзЗ ржерж╛ржХрзЗред ржХржорж╛ржирзНржб <code>network network mask subnet-mask [route-map route-map-name]</code> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ IPv4 ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рж╛рж░ ржЬржирзНржпред</p>
        
        <h3>ржЙржжрж╛рж╣рж░ржг рззрзз-рзл: BGP ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h3>
        
        <pre>
        R1:
        router bgp 65100
        bgp log-neighbor-changes
        no bgp default ipv4-unicast
        neighbor 10.12.1.2 remote-as 100
        network 10.12.1.0 mask 255.255.255.0
        network 192.168.1.1 mask 255.255.255.255
        
        R2:
        router bgp 65200
        bgp log-neighbor-changes
        no bgp default ipv4-unicast
        neighbor 10.12.1.1 remote-as 65100
        !
        address-family ipv4
        network 10.12.1.0 mask 255.255.255.0
        network 192.168.2.2 mask 255.255.255.255
        neighbor 10.12.1.1 activate
        exit-address-family
        </pre>



            <h1>рж░рзБржЯ (Route) ржЧрзНрж░рж╣ржг ржПржмржВ ржжрзЗржЦрж╛ (Receiving and Viewing Routes)</h1>
        
            <p>BGP (Border Gateway Protocol) ржпрзЗ ржХрзЛржирзЛ рж░рзБржЯ ржмрж╛ ржкрже (Route) ржЧрзНрж░рж╣ржг ржУ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рж╛рж░ ржЬржирзНржп рзйржЯрж┐ ржЖрж▓рж╛ржжрж╛ ржЯрзЗржмрж┐рж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ:</p>
        
            <h2>Adj-RIB-In (Adjacent Routing Information Base-In)</h2>
            <ul>
                <li>ржПржЦрж╛ржирзЗ рж╕ржм рж░рзБржЯ (Network Prefixes) ржкрзНрж░ржержорзЗ ржЬржорж╛ рж╣рзЯ ржпрзЗржнрж╛ржмрзЗ ржкрзЗрзЯрзЗржЫрзЗ, ржорж╛ржирзЗ ржЗржиржмрж╛ржЙржирзНржб (inbound) рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛ржХрж░ржгрзЗрж░ ржЖржЧрзЗрж░ ржЕржмрж╕рзНржерж╛рзЯред</li>
                <li>ржорзЗржорзЛрж░рж┐ ржмрж╛ржБржЪрж╛ржирзЛрж░ ржЬржирзНржп, ржЗржиржмрж╛ржЙржирзНржб рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛рж░ ржкрж░ ржПржЗ ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣рзЯред</li>
            </ul>
        
            <h2>Loc-RIB (Local Routing Information Base)</h2>
            <ul>
                <li>ржПржЦрж╛ржирзЗ рж╕ржм рж░рзБржЯ ржерж╛ржХрзЗ, ржпрзЗржЧрзБрж▓рзЛ BGP ржкрж┐рзЯрж╛рж░ (peer) ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ ржмрж╛ рж▓рзЛржХрж╛рж▓рж┐ (local) рждрзИрж░рж┐ рж╣рзЯрзЗржЫрзЗред</li>
                <li>рж░рзБржЯржЧрзБрж▓рзЛ ржпрж╛ржЪрж╛ржЗ (validity check) ржХрж░рж╛ рж╣рзЯ, ржпрзЗржоржи ржирзЗржХрзНрж╕ржЯ-рж╣ржк (Next-Hop) IP ржарж┐ржХрж╛ржирж╛ржЯрж┐ ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ред</li>
                <li>рж╕ржарж┐ржХ (valid) рж░рзБржЯ ржерзЗржХрзЗ BGP "рж╕рзЗрж░рж╛ ржкрже" (Best Path) ржмрзЗржЫрзЗ ржирзЗрзЯред</li>
                <li>ржПржЗ Loc-RIB ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ (IP Routing Table) рж░рзБржЯ ржкрж╛ржарж╛ржирзЛ рж╣рзЯред</li>
            </ul>
        
            <h2>Adj-RIB-Out (Adjacent Routing Information Base-Out)</h2>
            <ul>
                <li>ржПржЦрж╛ржирзЗ рж╕рзЗржЗ рж╕ржм рж░рзБржЯ рж░рж╛ржЦрж╛ рж╣рзЯ, ржпрзЗржЧрзБрж▓рзЛ ржЖржЙржЯржмрж╛ржЙржирзНржб (outbound) рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛рж░ ржкрж░ BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯред</li>
                <li>рж╕ржм рж░рзБржЯ BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржкрж╛ржарж╛ржирзЛ рж╣рзЯ ржирж╛ ржмрж╛ ржЧрзНрж▓рзЛржмрж╛рж▓ RIB (Routing Information Base)-ржП ржпрзЛржЧ рж╣рзЯ ржирж╛ред</li>
            </ul>
        
            <h2>BGP ржХрж┐ржнрж╛ржмрзЗ рж░рзБржЯ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ? (BGP Route Processing Steps)</h2>
        
            <h3>Step 1:</h3>
            <p>рж░рзБржЯ ржкрзНрж░ржержорзЗ Adj-RIB-In ржЯрзЗржмрж┐рж▓рзЗ ржЬржорж╛ рж╣рзЯред рждрж╛рж░ржкрж░ ржпрзЗржЦрж╛ржи ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ рж╕рзЗржЗ ржкрзНрж░рждрж┐ржмрзЗрж╢рзАрж░ (neighbor) ржЬржирзНржп ржирж┐рж░рзНржзрж╛рж░рж┐ржд ржЗржиржмрж╛ржЙржирзНржб рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣рзЯред</p>
        
            <h3>Step 2:</h3>
            <p>ржЗржиржмрж╛ржЙржирзНржб ржкрж▓рж┐рж╕рж┐рж░ ржкрж░рзЗ рж░рзБржЯ Loc-RIB ржП ржЬржорж╛ рж╣рзЯред рждрж╛рж░ржкрж░ Adj-RIB-In ржерзЗржХрзЗ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣рзЯ (ржорзЗржорзЛрж░рж┐ ржмрж╛ржБржЪрж╛ржирзЛрж░ ржЬржирзНржп)ред</p>
        
            <h3>Step 3:</h3>
            <p>рж░рзБржЯржЯрж┐ ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ (Validity Check) ржПржмржВ ржирзЗржХрзНрж╕ржЯ-рж╣ржк ржарж┐ржХрж╛ржирж╛ржЯрж┐ ржЖрж╕рж▓рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ ржХрж┐ржирж╛ рж╕рзЗржЯрж╛ ржжрзЗржЦрж╛ рж╣рзЯред</p>
            <p>ржпржжрж┐ рж░рзБржЯ Valid ржирж╛ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ Loc-RIB ржП ржерзЗржХрзЗ ржпрж╛рзЯ ржХрж┐ржирзНрждрзБ ржЖрж░ ржПржЧрзЛрзЯ ржирж╛ред</p>
        
            <h3>Step 4:</h3>
            <p>BGP ржПржЦржи рж╕рзЗрж░рж╛ ржкрже (Best Path) ржмрзЗржЫрзЗ ржирзЗрзЯ ржПржмржВ рж╕рзЗржЗ ржкржерзЗрж░ ржкрзНрж░рзЯрзЛржЬржирзАрзЯ рждржерзНржп (Path Attributes) ржирж┐рзЯрзЗ ржкрж░ржмрж░рзНрждрзА ржзрж╛ржкрзЗ ржпрж╛рзЯред</p>
        
            <h3>Step 5:</h3>
            <ul>
                <li>BGP ржПрж░ ржмрж╛ржЫрж╛ржЗ ржХрж░рж╛ рж╕рзЗрж░рж╛ рж░рзБржЯ (Best Path) ржЧрзНрж▓рзЛржмрж╛рж▓ RIB (Routing Table)-ржП ржпрзБржХрзНржд рж╣рзЯред</li>
                <li>ржЖржЙржЯржмрж╛ржЙржирзНржб рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣рзЯред</li>
                <li>ржпрзЗрж╕ржм рж░рзБржЯ ржмрж╛ржж ржпрж╛рзЯ ржирж╛ рж╕рзЗржЧрзБрж▓рзЛ Adj-RIB-Out ржП ржЬржорж╛ рж╣рзЯред</li>
                <li>ржПрж░ржкрж░ ржПржЗ рж░рзБржЯ BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржирзЛ рж╣рзЯ (Advertise ржХрж░рж╛ рж╣рзЯ)ред</li>
            </ul>

                <h1>ЁЯМР BGP рж░рзБржЯ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ-ржПрж░ рж╕рж╣ржЬ Flow Chart (ржмрж╛ржВрж▓рж╛рзЯ)</h1>
            
                <pre>
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ        рж░рзБржЯ (Route) ржкрж╛ржУрзЯрж╛ ржЧрзЗрж▓рзЛ         тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ рзз. Adj-RIB-In ржП ржЬржорж╛ ржХрж░рж╛ рж╣рж▓рзЛ тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ ржЗржиржмрж╛ржЙржирзНржб (Inbound) рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ тФВ
                    тФВ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣рж▓рзЛ               тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ рзи. Loc-RIB ржЯрзЗржмрж┐рж▓рзЗ ржкрж╛ржарж╛ржирзЛ рж╣рж▓рзЛ тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ Adj-RIB-In ржерзЗржХрзЗ рж░рзБржЯ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ рзй. Validity Check:            тФВ
                    тФВ - рж░рзБржЯ рж╕ржарж┐ржХ ржХрж┐?                тФВ
                    тФВ - ржирзЗржХрзНрж╕ржЯ-рж╣ржк IP ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ ржХрж┐? тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ                           тФВ
                    тЦ╝                           тЦ╝
                тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР          тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                тФВ  рж╕ржарж┐ржХ (Valid) тФВ          тФВ ржнрзБрж▓ (Invalid)   тФВ
                тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ          тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                        тФВ                               тФВ
                        тЦ╝                               тЦ╝
                тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР   тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                тФВ ржкрж░ржмрж░рзНрждрзА ржзрж╛ржкрзЗ ржпрж╛ржмрзЗ           тФВ   тФВ Loc-RIB ржП ржерж╛ржХржмрзЗ, ржХрж╛ржЬ рж╣ржмрзЗ ржирж╛ тФВ
                тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ   тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ рзк. BGP Best Path ржирж┐рж░рзНржмрж╛ржЪржи    тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ рзл. рж╕рзЗрж░рж╛ рж░рзБржЯ Routing Table ржП ржпрзБржХрзНржд рж╣ржмрзЗ тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ ржЖржЙржЯржмрж╛ржЙржирзНржб (Outbound) ржкрж▓рж┐рж╕рж┐   тФВ
                    тФВ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣ржмрзЗ               тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ Adj-RIB-Out ржП рж░рзБржЯ ржЬржорж╛ рж╣ржмрзЗ    тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ рж░рзБржЯ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗ тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                </pre>
            

    x
    <p>BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ рж░рзБржЯ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗ</p>

    <h3>ЁЯФС рж╕ржВржХрзНрж╖рзЗржкрзЗ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржХрзМрж╢рж▓ (Shortcut to Remember Steps):</h3>
    <p>Adj-RIB-In тЖТ Inbound Policy тЖТ Loc-RIB тЖТ Validity Check тЖТ Best Path тЖТ Routing Table тЖТ Outbound Policy тЖТ Adj-RIB-Out тЖТ ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржкрж╛ржарж╛ржирзЛ</p>


    
    <h1>ЁЯФ╡ BGP Table ржжрзЗржЦрж╛ ржУ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг (ржмрж╛ржВрж▓рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛рж╕рж╣ ржЙржжрж╛рж╣рж░ржг)</h1>
    
    <h2>ЁЯФ╢ ржЯржкрж┐ржХ: "show bgp afi safi" ржХржорж╛ржирзНржб</h2>
    
    <p>BGP (Border Gateway Protocol) ржбрзЗржЯрж╛ржмрзЗрж╕ (Loc-RIB) ржПрж░ ржнрзЗрждрж░рзЗрж░ рж╕ржм рж░рзБржЯ (Routes) ржжрзЗржЦрждрзЗ <b>show bgp afi safi</b> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржПржЗ Loc-RIB ржЯрзЗржмрж┐рж▓рзЗ BGP рж░рж╛ржЙржЯрж╛рж░ рждрж╛рж░ рж╢рзЗржЦрж╛ (received) ржПржмржВ рж▓рзЛржХрж╛рж▓рж┐ рждрзИрж░рж┐ (locally generated) рж░рзБржЯ ржЬржорж╛ рж░рж╛ржЦрзЗред</p>
    
    <h3>тЬЕ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржмрж┐рж╖рзЯ:</h3>
    <ul>
        <li>ржкрзНрж░рждрж┐ржЯрж╛ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ (Network Prefix)-ржПрж░ ржЬржирзНржп ржПржХрж╛ржзрж┐ржХ ржкрже (Multiple Paths) ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред</li>
        <li>рж╕рзЗрж░рж╛ ржкрже (Best Path) ржЪрж┐рж╣рзНржирж┐ржд ржерж╛ржХрзЗред</li>
    </ul>
    
    <h3>тЬЕ ржЙржжрж╛рж╣рж░ржг рззрзз-рзм: BGP ржЯрзЗржмрж┐рж▓ ржжрзЗржЦрж╛ (Router R1)</h3>
    
    <h3>ЁЯУЛ ржХржорж╛ржирзНржб ржУ ржЖржЙржЯржкрзБржЯ:</h3>
    <pre>
    R1# show bgp ipv4 unicast
    BGP table version is 4, local router ID is 192.168.1.1
    Status codes: s suppressed, d damped, h history, * valid, > best, i - internal,
    r RIB-failure, S Stale, m multipath, b backup-path, f RT-Filter,
    x best-external, a additional-path, c RIB-compressed,
    Origin codes: i - IGP, e - EGP, ? - incomplete
    RPKI validation codes: V valid, I invalid, N Not found
    
    Network          Next Hop            Metric LocPrf Weight Path
    *   10.12.1.0/24     10.12.1.2                0             0 65200 i
    *>                   0.0.0.0                  0         32768 i
    *>  192.168.1.1/32   0.0.0.0                  0         32768 i
    *>  192.168.2.2/32   10.12.1.2                0             0 65200 i
    </pre>
    
    <h3>ЁЯУЭ ржмрж╛ржВрж▓рж╛рзЯ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг (R1):</h3>
    <table border="1" cellpadding="8" cellspacing="0">
        <thead>
            <tr>
                <th>Network (ржирзЗржЯржУрзЯрж╛рж░рзНржХ)</th>
                <th>Next Hop (ржкрж░ржмрж░рзНрждрзА рж╣ржк)</th>
                <th>Metric</th>
                <th>LocPrf</th>
                <th>Weight</th>
                <th>AS Path (ржкрже)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>10.12.1.0/24</td>
                <td>10.12.1.2</td>
                <td>0</td>
                <td>-</td>
                <td>0</td>
                <td>65200 i</td>
            </tr>
            <tr>
                <td><b>10.12.1.0/24 (Best)</b></td>
                <td>0.0.0.0</td>
                <td>0</td>
                <td>-</td>
                <td>32768</td>
                <td>i</td>
            </tr>
            <tr>
                <td>192.168.1.1/32</td>
                <td>0.0.0.0</td>
                <td>0</td>
                <td>-</td>
                <td>32768</td>
                <td>i</td>
            </tr>
            <tr>
                <td>192.168.2.2/32</td>
                <td>10.12.1.2</td>
                <td>0</td>
                <td>-</td>
                <td>0</td>
                <td>65200 i</td>
            </tr>
        </tbody>
    </table>
    
    <h3>ЁЯУЭ ржмрж╛ржВрж▓рж╛рзЯ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг (R2):</h3>
    
    <h3>ЁЯУЛ ржХржорж╛ржирзНржб ржУ ржЖржЙржЯржкрзБржЯ:</h3>
    <pre>
    R2# show bgp ipv4 unicast | begin Network
    Network          Next Hop            Metric LocPrf Weight Path
    *   10.12.1.0/24     10.12.1.1                0             0 65100 i
    *>                   0.0.0.0                  0         32768 i
    *>  192.168.1.1/32   10.12.1.1                0             0 65100 i
    *>  192.168.2.2/32   0.0.0.0                  0         32768 i
    </pre>
    
    <table border="1" cellpadding="8" cellspacing="0">
        <thead>
            <tr>
                <th>Network (ржирзЗржЯржУрзЯрж╛рж░рзНржХ)</th>
                <th>Next Hop (ржкрж░ржмрж░рзНрждрзА рж╣ржк)</th>
                <th>Metric</th>
                <th>LocPrf</th>
                <th>Weight</th>
                <th>AS Path (ржкрже)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>10.12.1.0/24</td>
                <td>10.12.1.1</td>
                <td>0</td>
                <td>-</td>
                <td>0</td>
                <td>65100 i</td>
            </tr>
            <tr>
                <td><b>10.12.1.0/24 (Best)</b></td>
                <td>0.0.0.0</td>
                <td>0</td>
                <td>-</td>
                <td>32768</td>
                <td>i</td>
            </tr>
            <tr>
                <td>192.168.1.1/32</td>
                <td>10.12.1.1</td>
                <td>0</td>
                <td>-</td>
                <td>0</td>
                <td>65100 i</td>
            </tr>
            <tr>
                <td>192.168.2.2/32</td>
                <td>0.0.0.0</td>
                <td>0</td>
                <td>-</td>
                <td>32768</td>
                <td>i</td>
            </tr>
        </tbody>
    </table>
    
    <h3>ЁЯУК ржорзВрж▓ ржмрж┐рж╖рзЯржЧрзБрж▓рзЛ рж╕ржВржХрзНрж╖рзЗржкрзЗ:</h3>
    <ul>
        <li>тЬЕ BGP ржЯрзЗржмрж┐рж▓ ржорж╛ржирзЗ Loc-RIB ржпрзЗржЦрж╛ржирзЗ рж░рж╛ржЙржЯрж╛рж░ рж╢рзЗржЦрж╛ ржУ ржирж┐ржЬрзЗрж░ рждрзИрж░рж┐ рж░рзБржЯ ржЬржорж╛ рж░рж╛ржЦрзЗред</li>
        <li>тЬЕ ржкрзНрж░рждрж┐ржЯрж╛ рж░рзБржЯрзЗрж░ ржЬржирзНржп Next Hop, Metric, Weight, AS Path ржерж╛ржХрзЗред</li>
        <li>тЬЕ рж╕рзЗрж░рж╛ рж░рзБржЯ ржЪрж┐рж╣рзНржирж┐ржд рж╣рзЯ *> ржжрж┐рзЯрзЗ, ржпрзЗржЯрж╛ IP рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗржУ ржпрзБржХрзНржд рж╣рзЯред</li>
        <li>тЬЕ рж░рзБржЯ ржХрзЛржерж╛ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ ржмрзБржЭрждрзЗ AS Path ржжрзЗржЦрж╛ рж╣рзЯред</li>
        <li>тЬЕ Weight ржжрзЗржЦрзЗ ржирж┐ржЬрзЗрж░ рждрзИрж░рж┐ ржирж╛ржХрж┐ рж╢рзЗржЦрж╛ рж░рзБржЯ рждрж╛ ржмрзЛржЭрж╛ ржпрж╛рзЯ (32768 ржорж╛ржирзЗ ржирж┐ржЬрзЗрж░ рждрзИрж░рж┐)ред</li>
    </ul>
    


<h1>ЁЯМР BGP ржЯрзЗржмрж┐рж▓ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг (ржмрж╛ржВрж▓рж╛рзЯ)</h1>

<h2>ЁЯУб рж░рж╛ржЙржЯрж╛рж░ R1 ржПрж░ BGP ржЯрзЗржмрж┐рж▓</h2>
<table border="1" cellpadding="8" cellspacing="0">
    <thead>
        <tr>
            <th>Network (ржирзЗржЯржУрзЯрж╛рж░рзНржХ)</th>
            <th>Next Hop (ржкрж░ржмрж░рзНрждрзА рж╣ржк)</th>
            <th>Metric</th>
            <th>LocPrf</th>
            <th>Weight</th>
            <th>AS Path (рж░рзБржЯрзЗрж░ ржкрже)</th>
            <th>ржмрзЗрж╕рзНржЯ рж░рзБржЯ?</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>10.12.1.0/24</td>
            <td>10.12.1.2</td>
            <td>0</td>
            <td>-</td>
            <td>0</td>
            <td>65200 i</td>
            <td>ржирж╛</td>
        </tr>
        <tr>
            <td>10.12.1.0/24</td>
            <td>0.0.0.0</td>
            <td>0</td>
            <td>-</td>
            <td>32768</td>
            <td>i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
        <tr>
            <td>192.168.1.1/32</td>
            <td>0.0.0.0</td>
            <td>0</td>
            <td>-</td>
            <td>32768</td>
            <td>i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
        <tr>
            <td>192.168.2.2/32</td>
            <td>10.12.1.2</td>
            <td>0</td>
            <td>-</td>
            <td>0</td>
            <td>65200 i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
    </tbody>
</table>

<h2>ЁЯУб рж░рж╛ржЙржЯрж╛рж░ R2 ржПрж░ BGP ржЯрзЗржмрж┐рж▓</h2>
<table border="1" cellpadding="8" cellspacing="0">
    <thead>
        <tr>
            <th>Network (ржирзЗржЯржУрзЯрж╛рж░рзНржХ)</th>
            <th>Next Hop (ржкрж░ржмрж░рзНрждрзА рж╣ржк)</th>
            <th>Metric</th>
            <th>LocPrf</th>
            <th>Weight</th>
            <th>AS Path (рж░рзБржЯрзЗрж░ ржкрже)</th>
            <th>ржмрзЗрж╕рзНржЯ рж░рзБржЯ?</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>10.12.1.0/24</td>
            <td>10.12.1.1</td>
            <td>0</td>
            <td>-</td>
            <td>0</td>
            <td>65100 i</td>
            <td>ржирж╛</td>
        </tr>
        <tr>
            <td>10.12.1.0/24</td>
            <td>0.0.0.0</td>
            <td>0</td>
            <td>-</td>
            <td>32768</td>
            <td>i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
        <tr>
            <td>192.168.1.1/32</td>
            <td>10.12.1.1</td>
            <td>0</td>
            <td>-</td>
            <td>0</td>
            <td>65100 i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
        <tr>
            <td>192.168.2.2/32</td>
            <td>0.0.0.0</td>
            <td>0</td>
            <td>-</td>
            <td>32768</td>
            <td>i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
    </tbody>
</table>

<h3>ЁЯУМ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп:</h3>
<ul>
    <li><strong>Weight 32768</strong> ржорж╛ржирзЗ ржирж┐ржЬрж╕рзНржм рждрзИрж░рж┐ (local) рж░рзБржЯ, рж╕рж╛ржзрж╛рж░ржгржд ржмрзЗрж╕рзНржЯ рж╣рзЯред</li>
    <li><strong>AS Path</strong> ржжрж┐рзЯрзЗ ржмрзЛржЭрж╛ ржпрж╛рзЯ рж░рзБржЯ ржХрзЛржерж╛ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗред</li>
    <li><strong>Next Hop</strong> ржжрзЗржЦрзЗ ржЬрж╛ржирж╛ ржпрж╛рзЯ ржХрзЛржи IP-рждрзЗ рж░рзБржЯ ржкрж╛ржарж╛рждрзЗ рж╣ржмрзЗред</li>
    <li><strong>тЬФя╕П</strong> ржЪрж┐рж╣рзНржирж┐ржд рж░рзБржЯржЗ рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ ржпрж╛ржмрзЗред</li>
</ul>



<h1>ЁЯУК Table 11-4: BGP Table Fields (ржмрж╛ржВрж▓рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛)</h1>

<table border="1" cellpadding="8" cellspacing="0">
    <thead>
        <tr>
            <th>Field (ржШрж░)</th>
            <th>Description (ржмрзНржпрж╛ржЦрзНржпрж╛)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>Network</b></td>
            <td>
                ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕рзЗрж░ рждрж╛рж▓рж┐ржХрж╛, ржпрзЗржЧрзБрж▓рзЛ BGP ржЯрзЗржмрж┐рж▓рзЗ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред 
                ржПржХржЗ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕рзЗрж░ ржЬржирзНржп ржПржХрж╛ржзрж┐ржХ NLRI (Network Layer Reachability Information) ржерж╛ржХрж▓рзЗ ржкрзНрж░ржержоржЯрж┐ржХрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣рзЯ, ржмрж╛ржХрж┐ржЧрзБрж▓рзЛ ржлрж╛ржБржХрж╛ ржерж╛ржХрзЗред 
                <b>*</b> ржжрж┐рзЯрзЗ Valid (ржмрзИржз) рж░рзБржЯ ржжрзЗржЦрж╛рзЯ ржПржмржВ <b>></b> ржЪрж┐рж╣рзНржи рж╕рзЗрж░рж╛ (Best) ржкрже ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗред
            </td>
        </tr>
        <tr>
            <td><b>Next Hop</b></td>
            <td>
                ржкрж░ржмрж░рзНрждрзА рж╣ржкрзЗрж░ (Next Hop) IP ржарж┐ржХрж╛ржирж╛, ржпрзЗржЯрж╛ ржР ржирж┐рж░рзНржжрж┐рж╖рзНржЯ NLRI-рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ рж╣ржмрзЗред 
                ржПржЯрж┐ ржПржХржЯрж┐ <b>Well-known Mandatory</b> BGP Attributeред
            </td>
        </tr>
        <tr>
            <td><b>Metric (MED)</b></td>
            <td>
                <b>Multiple Exit Discriminator (MED)</b>: ржР ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рзБржЯрзЗрж░ ржЬржирзНржп ржРржЪрзНржЫрж┐ржХ (Optional), 
                Non-Transitive BGP Path Attribute, ржпрж╛ ржмрж┐ржнрж┐ржирзНржи AS ржерзЗржХрзЗ ржЖрж╕рж╛ рж░рзБржЯрзЗрж░ ржоржзрзНржпрзЗ ржкржЫржирзНржжрзЗрж░ ржкрже ржирж┐рж░рзНржзрж╛рж░ржгрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред
            </td>
        </tr>
        <tr>
            <td><b>LocPrf (Local Preference)</b></td>
            <td>
                <b>Local Preference</b>: BGP Best Path ржирж┐рж░рзНржмрж╛ржЪржирзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд ржПржХржЯрж┐ Well-known Discretionary Attributeред 
                ржПржЯрж┐ рж░рж╛ржЙржЯрж╛рж░ ржирж┐ржЬрж╕рзНржм AS-ржПрж░ ржоржзрзНржпрзЗ рж░рзБржЯ ржкржЫржирзНржжрзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред
            </td>
        </tr>
        <tr>
            <td><b>Weight</b></td>
            <td>
                <b>Weight</b>: рж╢рзБржзрзБржорж╛рждрзНрж░ Cisco рж░рж╛ржЙржЯрж╛рж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж┐ Attributeред 
                ржПржЯрж┐ Locally Significant ржорж╛ржирзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ ржирж┐ржЬрзЗрж░ рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржкрзНрж░ржпрзЛржЬрзНржпред 
                BGP Best Path ржирж┐рж░рзНржмрж╛ржЪржирзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред
            </td>
        </tr>
        <tr>
            <td><b>Path and Origin</b></td>
            <td>
                <b>AS_Path</b>: рж░рзБржЯ ржХрзЛржи ржХрзЛржи AS рж╣рзЯрзЗ ржПрж╕рзЗржЫрзЗ, рждрж╛рж░ рждрж╛рж▓рж┐ржХрж╛ред ржПржЯрж┐ ржПржХржЯрж┐ Well-known Mandatory Attributeред 
                рж░рзБржЯ рж▓рзБржк (Loop) ржкрзНрж░рждрж┐рж░рзЛржз ржУ Best Path ржирж┐рж░рзНржмрж╛ржЪржирзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред<br><br>
                <b>Origin</b>: рж░рзБржЯрзЗрж░ ржЙрзОрж╕рзЗрж░ ржзрж░ржгред ржПржЯрж┐ рждрж┐ржиржнрж╛ржмрзЗ ржжрзЗржЦрж╛рзЯ:
                <ul>
                    <li><b>i</b>: IGP (Interior Gateway Protocol) ржерзЗржХрзЗ ржЖрж╕рж╛ред</li>
                    <li><b>e</b>: EGP (Exterior Gateway Protocol) ржерзЗржХрзЗ ржЖрж╕рж╛ред</li>
                    <li><b>?</b>: ржЕржирзНржп ржкрзНрж░рзЛржЯрзЛржХрж▓ ржерзЗржХрзЗ BGP рждрзЗ рж░рж┐ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h3>ЁЯУЪ рж╕ржВржХрзНрж╖рзЗржкрзЗ:</h3>
<ul>
    <li>тЬЕ <b>Network</b>: ржХрзЛржи ржХрзЛржи ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржЗржирж╕рзНржЯрж▓ рж╣рзЯрзЗржЫрзЗред</li>
    <li>тЬЕ <b>Next Hop</b>: ржкрж░ржмрж░рзНрждрзА ржЧржирзНрждржмрзНржп IPред</li>
    <li>тЬЕ <b>Metric (MED)</b>: ржПржХрж╛ржзрж┐ржХ ржкрзНрж░ржмрзЗрж╢ ржкрже ржерж╛ржХрж▓рзЗ ржХрзЛржиржЯрж╛ ржмрзЗржЫрзЗ ржирзЗржмрзЗред</li>
    <li>тЬЕ <b>Local Preference (LocPrf)</b>: ржирж┐ржЬрзЗрж░ AS-ржП ржХрзЛржи рж░рзБржЯ ржмрзЗрж╢рж┐ ржкржЫржирзНржжрзЗрж░ред</li>
    <li>тЬЕ <b>Weight</b>: ржирж┐ржЬрзЗрж░ рждрзИрж░рж┐ ржУ рж╢рзЗржЦрж╛ рж░рзБржЯ ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржУржЬржиред</li>
    <li>тЬЕ <b>AS Path & Origin</b>: рж░рзБржЯ ржХрзЛржерж╛ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ ржПржмржВ рж▓рзБржк ржкрзНрж░рждрж┐рж░рзЛржзред</li>
</ul>



    <h1>ржЕржзрж┐ржХрзГржд BGP ржкрже ржПржмржВ ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржкрзНрж░ржжрж░рзНрж╢ржи</h1>
    <p>
        <code>show bgp afi safi network</code> ржХржорж╛ржирзНржбржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж┐ рж░рзБржЯрзЗрж░ ржЬржирзНржп рж╕ржорж╕рзНржд ржкрже ржПржмржВ рж╕рзЗржЗ рж░рзБржЯрзЗрж░ BGP ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЧрзБрж▓рж┐ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗред ржЙржжрж╛рж╣рж░ржг рззрзз-рзн рждрзЗ 10.12.1.0/24 ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗрж░ ржЬржирзНржп ржкржержЧрзБрж▓рзЛ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣рзЯрзЗржЫрзЗред ржЖржЙржЯржкрзБржЯрзЗ ржкржержЧрзБрж▓рзЛрж░ рж╕ржВржЦрзНржпрж╛ ржПржмржВ ржХрзЛржи ржкржержЯрж┐ рж╕рзЗрж░рж╛ ржкрже рждрж╛ ржжрзЗржЦрж╛ ржпрж╛рзЯред
    </p>
    
    <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рзн: рж╕рзНржкрж╖рзНржЯ BGP рж░рзБржЯ ржПржмржВ ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржжрзЗржЦрж╛ржирзЛ</h2>
    <pre>
R1# show bgp ipv4 unicast 10.12.1.0
BGP routing table entry for 10.12.1.0/24, version 2
Paths: (2 available, best #2, table default)
Advertised to update-groups:
2
Refresh Epoch 1
65200
10.12.1.2 from 10.12.1.2 (192.168.2.2)
Origin IGP, metric 0, localpref 100, valid, external
rx pathid: 0, tx pathid: 0
Refresh Epoch 1
Local
0.0.0.0 from 0.0.0.0 (192.168.1.1)
Origin IGP, metric 0, localpref 100, weight 32768, valid, sourced, local, best
rx pathid: 0, tx pathid: 0x0
    </pre>
    
    <p><strong>ржирзЛржЯ:</strong> <code>show bgp afi safi detail</code> ржХржорж╛ржирзНржбржЯрж┐ ржкрзБрж░рзЛ BGP ржЯрзЗржмрж┐рж▓ржЯрж┐ ржПржмржВ рж╕ржорж╕рзНржд ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗ, ржпрзЗржоржи ржЙржжрж╛рж╣рж░ржг рззрзз-рзн-ржП ржжрзЗржЦрж╛ржирзЛ рж╣рзЯрзЗржЫрзЗред</p>

    <h2>Adj-RIB-Out ржЯрзЗржмрж┐рж▓</h2>
    <p>
        ржПржЗ ржЯрзЗржмрж┐рж▓ржЯрж┐ ржкрзНрж░рждрж┐ржЯрж┐ BGP ржкрж┐рзЯрж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ ржЗржЙржирж┐ржХ ржЯрзЗржмрж┐рж▓, ржпрж╛ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржЗржЮрзНржЬрж┐ржирж┐рзЯрж╛рж░ржжрзЗрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рж╛ржЙржЯрж╛рж░ржХрзЗ ржпрзЗ рж░рзБржЯржЧрзБрж▓рзЛ ржмрж┐ржЬрзНржЮржкрзНрждрж┐ рж╣рж┐рж╕рзЗржмрзЗ ржкрж╛ржарж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ рждрж╛ ржжрзЗржЦрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред <code>show bgp afi safi neighbor ip-address advertised-routes</code> ржХржорж╛ржирзНржбржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж┐ ржкрж┐рзЯрж╛рж░рзЗрж░ Adj-RIB-Out ржЯрзЗржмрж┐рж▓рзЗрж░ ржмрж┐рж╖рзЯржмрж╕рзНрждрзБ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗред
    </p>
    
    <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рзо: ржкрж┐рзЯрж╛рж░-ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Adj-RIB-Out ржЯрзЗржмрж┐рж▓ ржжрзЗржЦрж╛ржирзЛ</h2>
    <pre>
R1# show bgp ipv4 unicast neighbors 10.12.1.2 advertised-routes
! Output omitted for brevity
Network          Next Hop            Metric LocPrf Weight Path
*> 10.12.1.0/24     0.0.0.0                  0         32768 i
*> 192.168.1.1/32   0.0.0.0                  0         32768 i
Total number of prefixes 2
    </pre>
    
    <h2>BGP рж╕рж╛рж░рж╛ржВрж╢</h2>
    <p>
        <code>show bgp ipv4 unicast summary</code> ржХржорж╛ржирзНржбржЯрж┐ NLRIs (Network Layer Reachability Information) ржПрж░ ржЖржжрж╛ржи-ржкрзНрж░ржжрж╛ржи ржпрж╛ржЪрж╛ржЗ ржХрж░рждрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред
    </p>
    
    <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рзп: BGP рж╕рж╛рж░рж╛ржВрж╢рзЗ Prefixes ржПрж░ ржЖржжрж╛ржи-ржкрзНрж░ржжрж╛ржи</h2>
    <pre>
R1# show bgp ipv4 unicast summary
! Output omitted for brevity
Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/
PfxRcd
10.12.1.2       4        65200      11      10        9    0    0 00:04:56        2
    </pre>
    
    <h2>BGP рж░рзБржЯржЧрзБрж▓рзЛ ржкрзНрж░ржжрж░рзНрж╢ржи</h2>
    <p>
        ржЧрзНрж▓рзЛржмрж╛рж▓ IP рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗрж░ BGP рж░рзБржЯржЧрзБрж▓рж┐ ржжрзЗржЦрждрзЗ <code>show ip route bgp</code> ржХржорж╛ржирзНржбржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржЙржжрж╛рж╣рж░ржг рззрзз-рззрзж рждрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ, ржпрзЗржЦрж╛ржирзЗ eBGP рж╕рзЗрж╢ржирзЗрж░ prefixes AD 20 рждрзЗ ржерж╛ржХрзЗ ржПржмржВ ржХрзЛржиржУ ржорзЗржЯрзНрж░рж┐ржХ ржирзЗржЗред
    </p>
    
    <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рззрзж: IP рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ BGP рж░рзБржЯ ржкрзНрж░ржжрж░рзНрж╢ржи</h2>
    <pre>
R1# show ip route bgp | begin Gateway
Gateway of last resort is not set
192.168.2.0/32 is subnetted, 1 subnets
B        192.168.2.2 [20/0] via 10.12.1.2, 00:06:12
    </pre>


        <h1>BGP рж░рзБржЯ ржмрж┐ржЬрзНржЮржкрзНрждрж┐ (Route Advertisements) ржкрж░рзЛржХрзНрж╖ ржЙрзОрж╕ (Indirect Sources) ржерзЗржХрзЗ</h1>
    
        <p>ржЖржЧрзЗржЗ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, BGP-ржХрзЗ ржПржХржЯрж┐ <strong>рж░рж╛ржЙржЯрж┐ржВ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи</strong> (routing application) рж╣рж┐рж╕рзЗржмрзЗ ржнрж╛ржмрж╛ ржЙржЪрж┐ржд, ржХрж╛рж░ржг <strong>BGP рж╕рзЗрж╢ржи</strong> (BGP session) ржПржмржВ <strong>рж░рзБржЯ ржмрж┐ржЬрзНржЮржкрзНрждрж┐</strong> (route advertisement) ржжрзБржЯрж┐ ржЖрж▓рж╛ржжрж╛ ржмрж┐рж╖рзЯред</p>
    
        <p><strong>Figure 11-10</strong>-ржП ржПржоржи ржПржХржЯрж┐ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржЯржкрзЛрж▓ржЬрж┐ ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ ржпрзЗржЦрж╛ржирзЗ <strong>R1 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐</strong> ржмрж┐ржнрж┐ржирзНржиржнрж╛ржмрзЗ (static route, EIGRP, OSPF) рж╢рзЗржЦрж╛ (learned) рж╣ржУржпрж╝рж╛ ржЕржирзЗржХржЧрзБрж▓рзЛ рж░рзБржЯ ржЗржирж╕рзНржЯрж▓ (install) ржХрж░рзЗред R1 ржПржЗ рж░рзБржЯржЧрзБрж▓рзЛ <strong>R2-ржХрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи (advertise)</strong> ржХрж░рждрзЗ ржкрж╛рж░рзЗред</p>
    
        <h3>ржЯржкрзЛрж▓ржЬрж┐рж░ ржмрж░рзНржгржирж╛:</h3>
        <ul>
            <li>R3, R4, R5 ржПрж░ Loopback IP ржЧрзБрж▓рзЛ ржпржерж╛ржХрзНрж░ржорзЗ:
                <ul>
                    <li>R3: 192.168.3.3</li>
                    <li>R4: 192.168.4.4</li>
                    <li>R5: 192.168.5.5</li>
                </ul>
            </li>
            <li>R1 ржУ R2 ржжрзБржЗржЯрж┐ ржЖрж▓рж╛ржжрж╛ AS (Autonomous System):
                <ul>
                    <li>R1: AS 65100</li>
                    <li>R2: AS 65200</li>
                </ul>
            </li>
            <li>ржмрж┐ржнрж┐ржирзНржи ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж╕ржВржпрзЛржЧ:
                <ul>
                    <li>10.12.1.0/24</li>
                    <li>10.13.1.0/24</li>
                    <li>10.14.1.0/24</li>
                    <li>10.15.1.0/24</li>
                </ul>
            </li>
            <li>EIGRP ржПржмржВ OSPF ржмрзНржпржмрж╣рзГржд рж╣ржЪрзНржЫрзЗ ржХрж┐ржЫрзБ рж▓рж┐ржВржХрзЗред</li>
        </ul>
    
        <p><strong>Example 11-11</strong>-ржП <strong>R1 рж░рж╛ржЙржЯрж╛рж░рзЗрж░ рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓</strong> (Routing Table) ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред ржПржЦрж╛ржирзЗ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ ржпрзЗ:</p>
        <ul>
            <li>R3 ржПрж░ loopback (192.168.3.3) <strong>EIGRP</strong> ржжрзНржмрж╛рж░рж╛ рж╢рзЗржЦрж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
            <li>R4 ржПрж░ loopback (192.168.4.4) <strong>static route</strong> рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
            <li>R5 ржПрж░ loopback (192.168.5.5) <strong>OSPF</strong> ржПрж░ ржорж╛ржзрзНржпржорзЗ рж╢рзЗржЦрж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
        </ul>
    
        <h3>ржЙржжрж╛рж╣рж░ржг (Routing Table):</h3>
        <pre>
    R1# show ip route
    ! рж╕ржВржХрзНрж╖рзЗржкрж┐ржд ржЖржЙржЯржкрзБржЯ
    Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
    D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
    ..
    Gateway of last resort is not set
    10.0.0.0/8 is variably subnetted, 8 subnets, 2 masks
    C 10.12.1.0/24 is directly connected, GigabitEthernet0/0
    C 10.13.1.0/24 is directly connected, GigabitEthernet0/1
    C 10.14.1.0/24 is directly connected, GigabitEthernet0/2
    C 10.15.1.0/24 is directly connected, GigabitEthernet0/3
    C 192.168.1.1 is directly connected, Loopback0
    B 192.168.2.2 [20/0] via 10.12.1.2, 00:01:17
    D 192.168.3.3 [90/3584] via 10.13.1.3, 00:02:10, GigabitEthernet0/1
    S 192.168.4.4 [1/0] via 10.14.1.4
    O 192.168.5.5 [110/11] via 10.15.1.5, 00:00:08, GigabitEthernet0/3
        </pre>
    
        <h3>ржмрзНржпрж╛ржЦрзНржпрж╛:</h3>
        <ul>
            <li><strong>C</strong> (Connected): рж╕рж░рж╛рж╕рж░рж┐ рж╕ржВржпрзБржХрзНржд ржирзЗржЯржУржпрж╝рж╛рж░рзНржХред</li>
            <li><strong>B</strong> (BGP): BGP ржжрзНржмрж╛рж░рж╛ рж╢рзЗржЦрж╛ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХред</li>
            <li><strong>D</strong> (EIGRP): EIGRP ржжрзНржмрж╛рж░рж╛ рж╢рзЗржЦрж╛ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХред</li>
            <li><strong>S</strong> (Static): Static Routeред</li>
            <li><strong>O</strong> (OSPF): OSPF ржжрзНржмрж╛рж░рж╛ рж╢рзЗржЦрж╛ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХред</li>
        </ul>
    
        <p><strong>Example 11-12</strong>-рждрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ ржХрж┐ржнрж╛ржмрзЗ R3 ржУ R4 ржПрж░ loopback IP ржЧрзБрж▓рзЛ <strong>network statement</strong> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ BGP-рждрзЗ ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
    
        <p>рждржмрзЗ, ржкрзНрж░рждрж┐ржЯрж┐ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рж╛ <strong>ржЭрж╛ржорзЗрж▓рж╛ржкрзВрж░рзНржг (tedious)</strong> рж╣рждрзЗ ржкрж╛рж░рзЗред</p>
    
        <p>ржЕржкрж░ржжрж┐ржХрзЗ, <strong>R5 ржПрж░ loopback</strong> OSPF ржерзЗржХрзЗ рж╕рж░рж╛рж╕рж░рж┐ <strong>BGP-рждрзЗ redistributing</strong> ржХрж░рзЗ ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
    
        <h3>рж╕рж╛рж░рж╛ржВрж╢:</h3>
        <ul>
            <li>R1 ржмрж┐ржнрж┐ржирзНржи рж╕рзЛрж░рзНрж╕ (static, EIGRP, OSPF) ржерзЗржХрзЗ рж░рзБржЯ рж╢рж┐ржЦрзЗ BGP-рждрзЗ advertise ржХрж░рзЗред</li>
            <li>Routing table-ржП рж╕рзНржкрж╖рзНржЯ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ ржХрзЛржи рж░рзБржЯ ржХрзЛржи ржкрзНрж░рзЛржЯрзЛржХрж▓ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗред</li>
            <li>BGP-рждрзЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ advertise ржХрж░рж╛рж░ ржЬржирзНржп ржХржЦржирзЛ рж╕рж░рж╛рж╕рж░рж┐ <code>network</code> ржХржорж╛ржирзНржб, ржХржЦржирзЛ redistributing ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред</li>
        </ul>

          <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рззрзи: рж╕ржВржпрзЛржЧржмрж┐рж╣рзАржи (Non-Connected) рж░рзБржЯржЧрзБрж▓рзЛ BGP-рждрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h2>
        
          <h3>ЁЯФ╣ R1 рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h3>
          <pre>
        router bgp 65100
         bgp log-neighbor-changes
         network 10.12.1.0 mask 255.255.255.0
         network 192.168.1.1 mask 255.255.255.255
         network 192.168.3.3 mask 255.255.255.255
         network 192.168.4.4 mask 255.255.255.255
         redistribute ospf 1
         neighbor 10.12.1.2 remote-as 65200
          </pre>
        
          <h3>ЁЯФ╕ ржмрзНржпрж╛ржЦрзНржпрж╛:</h3>
          <ul>
            <li><b>router bgp 65100:</b> R1 ржПрж░ AS ржиржорзНржмрж░ 65100 ржжрж┐рзЯрзЗ BGP ржЪрж╛рж▓рзБ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
            <li><b>bgp log-neighbor-changes:</b> ржкрзНрж░рждрж┐ржмрзЗрж╢рзАрж░ (neighbor) ржЕржмрж╕рзНржерж╛ ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ рждрж╛ рж▓ржЧ рж╣ржмрзЗред</li>
            <li><b>network:</b> ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзЗржЯржУрзЯрж╛рж░рзНржХржЧрзБрж▓рзЛ BGP-рждрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи (advertise) ржХрж░рж╛ рж╣ржмрзЗред</li>
            <li><b>redistribute ospf 1:</b> OSPF ржерзЗржХрзЗ рж╢рзЗржЦрж╛ рж░рзБржЯржЧрзБрж▓рзЛ BGP-рждрзЗ ржЖржирж╛ рж╣ржмрзЗред</li>
            <li><b>neighbor 10.12.1.2 remote-as 65200:</b> ржкрзНрж░рждрж┐ржмрзЗрж╢рзА рж░рж╛ржЙржЯрж╛рж░ ржпрж╛рж░ AS 65200ред</li>
          </ul>
        
          <h3>тЪая╕П ржоржирзНрждржмрзНржп:</h3>
          <p>IGP ржерзЗржХрзЗ рж╢рзЗржЦрж╛ рж░рзБржЯржЧрзБрж▓рзЛ BGP-рждрзЗ ржЖржирж╛ ржирж┐рж░рж╛ржкржжред рждржмрзЗ BGP ржерзЗржХрзЗ рж╢рзЗржЦрж╛ рж░рзБржЯ IGP-рждрзЗ ржЖржирж╛ ржЭрзБржБржХрж┐ржкрзВрж░рзНржгред ржХрж╛рж░ржг, BGP ржмрзЬ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж▓рзЗржнрзЗрж▓рзЗрж░ рж░рж╛ржЙржЯрж┐ржВ рж╕рж╛ржорж▓рж╛рждрзЗ ржкрж╛рж░рзЗ, ржпрзЗржЦрж╛ржирзЗ IGP рж╕рзАржорж┐ржд рж░рзБржЯ ржирж┐рждрзЗ ржкрж╛рж░рзЗред</p>
        
          <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рззрзй: R1 ржПржмржВ R2 ржПрж░ BGP рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓</h2>
        
          <h3>ЁЯФ╖ R1 ржПрж░ BGP ржЯрзЗржмрж┐рж▓:</h3>
          <pre>
        R1# show bgp ipv4 unicast
        Network          Next Hop            Metric LocPrf Weight Path
        *> 10.12.1.0/24     0.0.0.0                  0         32768 i
        *  10.12.1.2                0             0 65200 i
        *> 10.15.1.0/24     0.0.0.0                  0         32768 ?
        *> 192.168.1.1/32   0.0.0.0                  0         32768 i
        *> 192.168.2.2/32   10.12.1.2                0             0 65200 i
        *> 192.168.3.3/32   10.13.1.3             3584         32768 i
        *> 192.168.4.4/32   10.14.1.4                0         32768 i
        *> 192.168.5.5/32   10.15.1.5               11         32768 ?
          </pre>
        
          <h3>ЁЯФ╕ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг:</h3>
          <ul>
            <li><b>192.168.3.3/32:</b> EIGRP ржерзЗржХрзЗ рж╢рзЗржЦрж╛, IGP (i) originред</li>
            <li><b>192.168.4.4/32:</b> Static route, IGP (i)ред</li>
            <li><b>192.168.5.5/32:</b> OSPF ржерзЗржХрзЗ Redistribute ржХрж░рж╛, рждрж╛ржЗ incomplete (?)ред</li>
            <li>IGP ржерзЗржХрзЗ ржЖрж╕рж╛ ржорзЗржЯрзНрж░рж┐ржХ (Metric) MED рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯред</li>
          </ul>
        
          <h3>ЁЯФ╖ R2 ржПрж░ BGP ржЯрзЗржмрж┐рж▓:</h3>
          <pre>
        R2# show bgp ipv4 unicast | begin Network
        Network          Next Hop Metric LocPrf Weight Path
        * 10.12.1.0/24     10.12.1.1 0 0 65100 i
        *> 0.0.0.0 0 32768 i
        *> 10.15.1.0/24     10.12.1.1 0 0 65100 ?
        *> 192.168.1.1/32   10.12.1.1 0 0 65100 i
        *> 192.168.2.2/32   0.0.0.0 0 32768 i
        *> 192.168.3.3/32   10.12.1.1 3584 0 65100 i
        *> 192.168.4.4/32   10.12.1.1 0 0 65100 i
        *> 192.168.5.5/32   10.12.1.1 11 0 65100 ?
          </pre>
        
          <h3>ЁЯФ╕ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг:</h3>
          <ul>
            <li>R2 рж╕ржм рж░рзБржЯржЧрзБрж▓рзЛ eBGP ржжрзНржмрж╛рж░рж╛ R1 ржерзЗржХрзЗ ржкрзЗрзЯрзЗржЫрзЗред</li>
            <li>рж╕ржм рж░рзБржЯрзЗрж░ рж╢рзЗрж╖рзЗ 65100 AS ржирж╛ржорзНржмрж╛рж░ ржЖржЫрзЗред</li>
            <li><b>192.168.3.3/32:</b> ржорзЗржЯрзНрж░рж┐ржХ 3584, ржорж╛ржирзЗ R3 ржерзЗржХрзЗ ржЖрж╕рж╛ ржорзЗржЯрзНрж░рж┐ржХред</li>
            <li><b>192.168.5.5/32:</b> OSPF ржерзЗржХрзЗ ржЖрж╕рж╛, incomplete (?)ред</li>
          </ul>
        
          <h2>тЬЕ ржорзВрж▓ ржкржпрж╝рзЗржирзНржЯ:</h2>
          <ul>
            <li>R1 ржмрж┐ржнрж┐ржирзНржи ржкрзНрж░рзЛржЯрзЛржХрж▓ ржерзЗржХрзЗ рж░рзБржЯ рж╢рж┐ржЦрзЗ BGP-рждрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржжрзЗрзЯред</li>
            <li>R1 ржПрж░ BGP ржЯрзЗржмрж┐рж▓рзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯ рж░рзБржЯржЧрзБрж▓рзЛрж░ ржЙрждрзНрж╕ ржХрзЛржерж╛ ржерзЗржХрзЗред</li>
            <li>R2 рж╢рзБржзрзБржорж╛рждрзНрж░ R1 ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ рж░рзБржЯржЧрзБрж▓рзЛ ржжрзЗржЦрзЗред</li>
            <li>OSPF ржерзЗржХрзЗ Redistribute рж╣ржУрзЯрж╛ рж░рзБржЯржЧрзБрж▓рзЛ incomplete (?) origin ржкрж╛рзЯред</li>
            <li>IGP ржерзЗржХрзЗ рж╢рзЗржЦрж╛ рж░рзБржЯржЧрзБрж▓рзЛ i (IGP) origin ржкрж╛рзЯред</li>
            <li>IGP ржорзЗржЯрзНрж░рж┐ржХ MED (Metric) рж╣рж┐рж╕рзЗржмрзЗ ржЖрж╕рзЗред</li>
          </ul>
        

          
              <h1>Route Summarization (рж░рж╛ржЙржЯ рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржи)</h1>
          
              <div class="box">
                  <h2>ржЕржирзБржмрж╛ржж:</h2>
                  <p>
                      ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ (Prefix) рж╕рж╛ржорж╛рж░рж╛ржЗржЬ ржХрж░рж╛ ржорж╛ржирзЗ рж╣рж▓рзЛ рж░рж╛ржЙржЯрж╛рж░рзЗрж░ рж░рж┐рж╕рзЛрж░рзНрж╕ ржмрж╛ржБржЪрж╛ржирзЛ ржПржмржВ ржжрзНрж░рзБржд ржмрзЗрж╕рзНржЯ-ржкрж╛рже (Best Path) рж╣рж┐рж╕рж╛ржм ржХрж░рж╛рж░ ржЬржирзНржп рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗрж░ ржЖржХрж╛рж░ ржХржорж╛ржирзЛред рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржи рж╕рзНржЯрзНржпрж╛ржмрж┐рж▓рж┐ржЯрж┐ржУ (Stability) ржмрж╛рзЬрж╛рзЯ тАФ ржПржЯрж┐ ржбрж╛ржЙржирж╕рзНржЯрзНрж░рж┐ржо (Downstream) рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рзЛ ржерзЗржХрзЗ рж░рзБржЯ-ржлрзНрж▓рзНржпрж╛ржк (Route Flap) рж▓рзБржХрж┐ржпрж╝рзЗ рж░рж╛ржЦрзЗ, ржпрж╛рж░ ржлрж▓рзЗ рж░рж╛ржЙржЯрж┐ржВ ржЪрж░рзНржи (Routing Churn) ржХржорзЗ ржпрж╛рзЯред 
                  </p>
                  <p>
                      ржмрзЗрж╢рж┐рж░ржнрж╛ржЧ рж╕рж╛рж░рзНржнрж┐рж╕ ржкрзНрж░рзЛржнрж╛ржЗржбрж╛рж░ (Service Provider) IPv4-ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ /24 ржПрж░ ржЪрзЗрзЯрзЗ ржмрзЬ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ (ржпрзЗржоржи: /25 ржерзЗржХрзЗ /32) ржЧрзНрж░рж╣ржг ржХрж░рзЗ ржирж╛, ржХрж┐ржирзНрждрзБ ржмрж░рзНрждржорж╛ржирзЗ ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗ рзн,рзорзжрзжрзжрзж+ рж░рзБржЯ рж░рзЯрзЗржЫрзЗ ржПржмржВ ржПржЯрж┐ ржкрзНрж░рждрж┐ржирж┐рзЯржд ржмрж╛рзЬржЫрзЗред BGP (Border Gateway Protocol) рж░рж╛ржЙржЯ рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржи ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рзЛрж░ BGP ржЯрзЗржмрж┐рж▓ ржЫрзЛржЯ рж░рж╛ржЦрждрзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред 
                  </p>
                  <p>
                      BGP ржПржЬ (Edge) рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рзЛрждрзЗ рж░рж╛ржЙржЯ рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржи ржХрж░рж▓рзЗ ржХрзЛрж░ (Core) рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рзЛрж░ ржХрж╛ржЬ ржХржорзЗ ржпрж╛рзЯред ржпрзЗржоржи, ржПржХржЯрж┐ рж░рж╛ржЙржЯрж╛рж░ (R3) ржпржжрж┐ ржЕржирзЗржХ рж░рзБржЯ рж╕рж╛ржорж╛рж░рж╛ржЗржЬ ржХрж░рзЗ ржЖрж░рзЗржХ рж░рж╛ржЙржЯрж╛рж░ржХрзЗ (R4) ржжрзЗрзЯ, рждрж╛рж╣рж▓рзЗ рж▓рж┐ржЩрзНржХрзЗ рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЗржУ R4-ржХрзЗ ржШржиржШржи ржЖржкржбрзЗржЯ ржкрзЗрждрзЗ рж╣рзЯ ржирж╛ред
                  </p>
                  <p>
                      рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржирзЗрж░ ржжрзБржЗржЯрж┐ ржЯрзЗржХржирж┐ржХ рж░рзЯрзЗржЫрзЗ:
                  </p>
                  <ul>
                      <li><b>рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ (Static):</b> ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ ржПржХржЯрж┐ рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ рж░рзБржЯ ржмрж╛ржирж┐рзЯрзЗ Null0 ржжрзЗржЦрж╛ржирзЛ рж╣рзЯред рждржмрзЗ ржПржЯрж┐ рж╕ржмрж╕ржорзЯ ржмрж┐ржЬрзНржЮрж╛ржкрж┐ржд рж╣рзЯред</li>
                      <li><b>ржбрж╛рзЯржирж╛ржорж┐ржХ (Dynamic):</b> ржпржЦржи ржнрзЗрждрж░рзЗрж░ ржЫрзЛржЯрзЛ рж░рзБржЯржЧрзБрж▓рзЛ ржерж╛ржХрзЗ, рждржЦржиржЗ ржмрзЬрзЛ рж░рзБржЯ ржмрж╛ржирж╛ржирзЛ рж╣рзЯред Null0 ржжрж┐рзЯрзЗ рж▓рзБржк рж░рзЛржз ржХрж░рж╛ рж╣рзЯред</li>
                  </ul>
                  <p>
                      ржЙржнрзЯ ржХрзНрж╖рзЗрждрзНрж░рзЗржЗ ржмрзЬрзЛ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ (ржЫрзЛржЯрзЛ prefix length) BGP-рждрзЗ ржкрж╛ржарж╛ржирзЛ рж╣рзЯред
                  </p>
              </div>
          
              <div class="box">
                  <h2>рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛:</h2>
                  <p>
                      ржзрж░рзЛ рждрзБржорж┐ ржЕржирзЗржХржЧрзБрж▓рзЛ ржЫрзЛржЯрзЛ рж░рж╛рж╕рзНрждрж╛рж░ (ржирзЗржЯржУрзЯрж╛рж░рзНржХ) ржарж┐ржХрж╛ржирж╛ (рж░рзБржЯ) ржЖрж▓рж╛ржжрж╛ ржЖрж▓рж╛ржжрж╛ ржХрж░рзЗ рж░рж╛ржЙржЯрж╛рж░ржХрзЗ ржжрж┐рж▓рзЗ, рж░рж╛ржЙржЯрж╛рж░ ржХрзНрж▓рж╛ржирзНржд рж╣рзЯрзЗ ржпрж╛ржмрзЗ! рждрж╛ржЗ ржПржЗ ржЫрзЛржЯрзЛ ржЫрзЛржЯрзЛ рж░рзБржЯржЧрзБрж▓рзЛржХрзЗ ржПржХрж╕рж╛ржерзЗ ржПржХржЯрж╛ ржмрзЬрзЛ рж░рзБржЯрзЗ (summary) рж░рзВржкрж╛ржирзНрждрж░ ржХрж░рж╛ рж╣рзЯ тАФ ржпрзЗржи рж░рж╛ржЙржЯрж╛рж░ ржПржХржмрж╛рж░рзЗржЗ ржмрзБржЭрждрзЗ ржкрж╛рж░рзЗред
                  </p>
                  <p>
                      <b>ржЙржжрж╛рж╣рж░ржг:</b> 
                      <br>
                      <code>172.16.1.0/24</code>, 
                      <code>172.16.2.0/24</code>, 
                      <code>172.16.3.0/24</code> тАФ ржПржЧрзБрж▓рзЛржХрзЗ ржПржХрж╕рж╛ржерзЗ <code>172.16.0.0/22</code> ржмрж╛ржирж╛ржирзЛ ржпрж╛рзЯред
                  </p>
                  <p>
                      ржпржжрж┐ рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржПржЗржнрж╛ржмрзЗ ржмрзЬрзЛ рж░рзБржЯ ржкрж╛ржарж╛ржирзЛ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ рж░рж╛ржЙржЯрж╛рж░ ржХржо ржЪрж┐ржирзНрждрж╛ ржХрж░рзЗ, ржХрж╛ржЬржУ ржХржо ржХрж░рзЗред 
                  </p>
                  <p>
                      ржзрж░рзЛ <code>R3</code> рж░рж╛ржЙржЯрж╛рж░ рж╕ржм рж░рзБржЯ <code>R4</code>-ржХрзЗ ржкрж╛ржарж╛рзЯред ржПржЦржи ржпржжрж┐ <code>10.13.1.0/24</code> ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ рж╕ржорж╕рзНржпрж╛ рж╣рзЯ, R3 ржмрж╛рж░ржмрж╛рж░ R4-ржХрзЗ ржирждрзБржи рж░рзБржЯ ржкрж╛ржарж╛ржмрзЗред ржПрждрзЗ R4-ржПрж░ ржХрж╛ржЬ ржмрзЗрзЬрзЗ ржпрж╛ржмрзЗред ржХрж┐ржирзНрждрзБ ржпржжрж┐ R3 рж╕рж╛ржорж╛рж░рж╛ржЗржЬ ржХрж░рзЗ ржмрзЬрзЛ ржПржХржЯрж╛ рж░рзБржЯ ржкрж╛ржарж╛рзЯ, рждрж╛рж╣рж▓рзЗ R4 ржЬрж╛ржиржмрзЗржЗ ржирж╛ ржпрзЗ ржнрзЗрждрж░рзЗ ржХрзА рж╣ржЪрзНржЫрзЗ тАФ R4-ржПрж░ ржХрзЛржирзЛ ржХрж╛ржЬржЗ рж╣ржмрзЗ ржирж╛ред
                  </p>
                  <h3>рж╕рзБржмрж┐ржзрж╛:</h3>
                  <ul>
                      <li>рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓ ржЫрзЛржЯ рж╣рзЯред</li>
                      <li>рж░рж╛ржЙржЯрж╛рж░ ржХржо ржХрж╛ржЬ ржХрж░рзЗред</li>
                      <li>рж╕ржорж╕рзНржпрж╛ рж╣рж▓рзЗржУ ржмрж╛рж░ржмрж╛рж░ ржЖржкржбрзЗржЯ рж▓рж╛ржЧрзЗ ржирж╛ред</li>
                  </ul>
                  <h3>ржЙржкрж╕ржВрж╣рж╛рж░:</h3>
                  <p>
                      Route Summarization ржорж╛ржирзЗ ржЕржирзЗржХржЧрзБрж▓рзЛ ржЫрзЛржЯрзЛ рж░рзБржЯржХрзЗ ржПржХрж╕рж╛ржерзЗ ржмрзЬрзЛ рж░рзБржЯ ржмрж╛ржирж╛ржирзЛ, ржпрж╛рждрзЗ ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рж╣ржЬрзЗ ржЪрж▓рзЗ, ржХржо рж░рж┐рж╕рзЛрж░рзНрж╕ рж▓рж╛ржЧрзЗ, ржЖрж░ ржмрзЗрж╢рж┐ рж╕рзНржЯрзНржпрж╛ржмрж▓ ржерж╛ржХрзЗред
                  </p>
              </div>

                  <h1>тЬЕ BGP Aggregate Address ржПржмржВ Summary-Only ржПрж░ рж╕рж╣ржЬ ржмрзНржпрж╛ржЦрзНржпрж╛</h1>
              
                  <h2>тЪЩя╕П BGP Aggregation ржХрзА?</h2>
                  <p>
                      BGP route aggregation ржорж╛ржирзЗ рж╣рж▓рзЛ ржПржХрж╛ржзрж┐ржХ ржЫрзЛржЯ ржЫрзЛржЯ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рзБржЯржХрзЗ (prefix) ржПржХрждрзНрж░ ржХрж░рзЗ ржПржХржЯрж┐ ржмрзЬ рж░рзБржЯ ржмрж╛ржирж╛ржирзЛред 
                      ржПрждрзЗ рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓ ржЫрзЛржЯ рж╣рзЯ ржПржмржВ рж░рж╛ржЙржЯрж┐ржВ рждржерзНржп ржХржо рж▓рзЗржиржжрзЗржи рж╣рзЯред ржПржЯрж╛ ржмрж┐рж╢рзЗрж╖ржнрж╛ржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯ ржмрж┐ржнрж┐ржирзНржи Autonomous System (AS)-ржПрж░ ржоржзрзНржпрзЗред
                  </p>
              
                  <h2>ЁЯЪи ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржХржорж╛ржирзНржб:</h2>
                  <p><b>aggregate-address &lt;network&gt; &lt;subnet-mask&gt; [summary-only] [as-set]</b></p>
                  <ul>
                      <li><b>network ржПржмржВ subnet-mask:</b> ржпрзЗ ржмрзЬ рж░рзБржЯ (summary route) advertise ржХрж░рж╛ рж╣ржмрзЗред</li>
                      <li><b>summary-only:</b> ржРржЪрзНржЫрж┐ржХред ржЫрзЛржЯ ржЫрзЛржЯ component route ржЧрзБрж▓рзЛ рж▓рзБржХрж╛ржирзЛ рж╣ржмрзЗред</li>
                      <li><b>as-set:</b> ржЖрж▓рж╛ржжрж╛ AS ржерзЗржХрзЗ ржПрж▓рзЗ loop ржарзЗржХрж╛рждрзЗ рж╕ржм AS path ржпрзЛржЧ ржХрж░ржмрзЗред</li>
                  </ul>
              
                  <h2>ЁЯФС ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржЙржжрж╛рж╣рж░ржг:</h2>
              
                  <h3>рззя╕ПтГг рж╢рзБрж░рзБ (Aggregation ржЫрж╛рзЬрж╛):</h3>
                  <p><b>R1:</b> 172.16.1.0/24, 172.16.2.0/24, 172.16.3.0/24, 192.168.1.1/32</p>
                  <p><b>R2 ржУ R3:</b> рж╕ржм рж░рзБржЯ ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ ржкрж╛ржЪрзНржЫрзЗ, ржмрзЬ ржЯрзЗржмрж┐рж▓ рждрзИрж░рж┐ рж╣ржЪрзНржЫрзЗред</p>
              
                  <h3>рзия╕ПтГг ржкрзНрж░ржержо Aggregation (summary-only ржЫрж╛рзЬрж╛):</h3>
                  <p><b>ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</b></p>
                  <pre>
              aggregate-address 172.16.0.0 255.255.240.0  <!-- R1 -->
              aggregate-address 192.168.0.0 255.255.0.0  <!-- R2 -->
                  </pre>
                  <p><b>ржлрж▓рж╛ржлрж▓:</b> ржмрзЬ рж░рзБржЯ ржпрзБржХрзНржд рж╣рж▓рзЛ, рждржмрзЗ ржЫрзЛржЯржЧрзБрж▓рзЛржУ рж░ржЗрж▓ред</p>
              
                  <h3>рзйя╕ПтГг ржЪрзВрзЬрж╛ржирзНржд Aggregation (summary-only рж╕рж╣):</h3>
                  <p><b>ржЖржкржбрзЗржЯ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</b></p>
                  <pre>
              aggregate-address 172.16.0.0 255.255.240.0 summary-only  <!-- R1 -->
              aggregate-address 192.168.0.0 255.255.0.0 summary-only  <!-- R2 -->
                  </pre>
                  <p><b>ржлрж▓рж╛ржлрж▓:</b> рж╢рзБржзрзБ ржмрзЬ рж░рзБржЯ ржпрж╛ржЪрзНржЫрзЗ, ржЫрзЛржЯржЧрзБрж▓рзЛ ржмржирзНржзред</p>
              
                  <h3>рзкя╕ПтГг Null0 Route (Loop Prevention):</h3>
                  <p>рж╕рж╛рж░рж╛ржВрж╢ рж░рзБржЯрзЗрж░ ржЬржирзНржп Null0 рж░рзБржЯ рждрзИрж░рж┐ рж╣рзЯ:</p>
                  <pre>192.168.0.0/16 [200/0] via Null0</pre>
              
                  <h2>ЁЯУК Aggregation ржПрж░ ржЖржЧрзЗ ржУ ржкрж░рзЗ рждрзБрж▓ржирж╛:</h2>
                  <table border="1">
                      <thead>
                          <tr>
                              <th>ржкрж░рзНржпрж╛ржпрж╝</th>
                              <th>R3 ржХрзЗ ржкрж╛ржарж╛ржирзЛ рж░рзБржЯ</th>
                              <th>ржЫрзЛржЯ ржЫрзЛржЯ рж░рзБржЯ ржЖржЫрзЗ?</th>
                          </tr>
                      </thead>
                      <tbody>
                          <tr>
                              <td>Aggregation ржПрж░ ржЖржЧрзЗ</td>
                              <td>172.16.1.0/24, 172.16.2.0/24, 172.16.3.0/24, 192.168.1.1/32</td>
                              <td>рж╣рзНржпрж╛ржБ</td>
                          </tr>
                          <tr>
                              <td>Aggregation (summary-only ржЫрж╛рзЬрж╛)</td>
                              <td>172.16.0.0/20 + ржЫрзЛржЯ ржЫрзЛржЯ рж░рзБржЯ</td>
                              <td>рж╣рзНржпрж╛ржБ</td>
                          </tr>
                          <tr>
                              <td>Aggregation (summary-only рж╕рж╣)</td>
                              <td>172.16.0.0/20, 192.168.0.0/16</td>
                              <td>ржирж╛</td>
                          </tr>
                      </tbody>
                  </table>
              
                  <h2>ЁЯТб ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржмрж┐рж╖рзЯ:</h2>
                  <ul>
                      <li><b>aggregate-address:</b> ржмрзЬ рж╕рж╛рж░рж╛ржВрж╢ рж░рзБржЯ рждрзИрж░рж┐ ржХрж░рзЗред</li>
                      <li><b>summary-only:</b> ржЫрзЛржЯ рж░рзБржЯ ржмржирзНржз ржХрж░рзЗ, рж╢рзБржзрзБ ржмрзЬржЯрж╛ ржпрж╛рзЯред</li>
                      <li><b>Null0 route:</b> рж▓рзБржк ржарзЗржХрж╛рзЯред</li>
                      <li>рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓ ржЫрзЛржЯ рж╣рзЯ, ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржерж┐рждрж┐рж╢рзАрж▓ ржерж╛ржХрзЗред</li>
                  </ul>
              
                  <h2>ЁЯЪА ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛рж░ ржХржорж╛ржирзНржб:</h2>
                  <ul>
                      <li>тЬЕ BGP ржЯрзЗржмрж┐рж▓ ржжрзЗржЦрж╛рж░ ржЬржирзНржп: <code>show bgp ipv4 unicast</code></li>
                      <li>тЬЕ Null0 рж░рзБржЯ ржжрзЗржЦрж╛рж░ ржЬржирзНржп: <code>show ip route bgp</code></li>
                      <li>тЬЕ BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржжрзЗржЦрж╛рж░ ржЬржирзНржп: <code>show running-config | section router bgp</code></li>
                  </ul>
              
                  <p>рждрзБржорж┐ ржЪрж╛ржЗрж▓рзЗ ржЖржорж┐ ржПржХржЯрж╛ ржЪрж┐рждрзНрж░ (ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо) рждрзИрж░рж┐ ржХрж░рзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐! ржЪрж╛ржЗрж▓рзЗ ржмрж▓рзЛ! ЁЯОитЬЕ</p>


                      <h1>BGP Atomic Aggregate ржПржмржВ Route Aggregation</h1>
                      <p>ржПржЗ ржЯрзЗржХрзНрж╕ржЯржЯрж┐ BGP (Border Gateway Protocol) рж░рж╛ржЙржЯрж┐ржВ ржкрзНрж░рзЛржЯрзЛржХрж▓рзЗ <strong>Atomic Aggregate</strong> ржПржмржВ <strong>Route Aggregation</strong> рж╕ржорзНржкрж░рзНржХрзЗ ржЖрж▓рзЛржЪржирж╛ ржХрж░рзЗред ржирж┐ржЪрзЗ ржмрж╛ржВрж▓рж╛ржпрж╝ рж╕рж╣ржЬржнрж╛ржмрзЗ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рж╛ рж╣рж▓рзЛ:</p>
                  
                      <h2>Atomic Aggregate ржПржмржВ Route Aggregation ржХрж┐?</h2>
                      <h3>Route Aggregation (рж░рзБржЯ рж╕ржорж╖рзНржЯрж┐ржХрж░ржг):</h3>
                      <p>ржпржЦржи ржПржХржЯрж┐ BGP рж░рж╛ржЙржЯрж╛рж░ ржПржХрж╛ржзрж┐ржХ ржЫрзЛржЯ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ (prefix) ржХрзЗ ржПржХрждрзНрж░рж┐ржд ржХрж░рзЗ ржПржХржЯрж┐ ржмржбрж╝ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржкрж░рж┐ржгржд ржХрж░рзЗ, рждрж╛ржХрзЗ <strong>Route Aggregation</strong> ржмрж▓рзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, <code>172.16.1.0/24</code>, <code>172.16.2.0/24</code>, ржПржмржВ <code>172.16.3.0/24</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐ржХрзЗ ржПржХрждрзНрж░рж┐ржд ржХрж░рзЗ <code>172.16.0.0/20</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржкрж░рж┐ржгржд ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред</p>
                  
                      <h3>Atomic Aggregate:</h3>
                      <p>ржпржЦржи Route Aggregation ржХрж░рж╛ рж╣ржпрж╝, рждржЦржи ржорзВрж▓ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐рж░ <strong>AS_Path</strong>, <strong>MED</strong>, <strong>BGP ржХржорж┐ржЙржирж┐ржЯрж┐</strong> ржЗрждрзНржпрж╛ржжрж┐ ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ рж╣рж╛рж░рж┐ржпрж╝рзЗ ржпрж╛ржпрж╝ред ржПржЗ рждржерзНржп рж╣рж╛рж░рж╛ржирзЛрж░ ржЗржЩрзНржЧрж┐ржд ржжрзЗржУржпрж╝рж╛рж░ ржЬржирзНржп BGP рж░рж╛ржЙржЯрж╛рж░ <strong>Atomic Aggregate</strong> ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред ржПржЯрж┐ ржжрзЗржЦрж╛ржпрж╝ ржпрзЗ ржкрж╛ржерзЗрж░ ржХрж┐ржЫрзБ рждржерзНржп рж╣рж╛рж░рж┐ржпрж╝рзЗ ржЧрзЗржЫрзЗред</p>
                  
                      <h2>ржЙржжрж╛рж╣рж░ржг рж╕рж╣ ржмрзНржпрж╛ржЦрзНржпрж╛:</h2>
                      <h3>R2 рж░рж╛ржЙржЯрж╛рж░рзЗ Aggregation ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h3>
                      <p>R2 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ <code>172.16.0.0/20</code> ржПржмржВ <code>192.168.0.0/16</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐ржХрзЗ рж╕ржорж╖рзНржЯрж┐ржХрж░ржг (aggregate) ржХрж░рзЗ ржПржмржВ ржПржЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐ржХрзЗ ржЕржирзНржп рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐рждрзЗ advertise ржХрж░рзЗред ржПржЯрж┐ ржХрж░рж╛рж░ рж╕ржоржпрж╝, R2 ржорзВрж▓ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐рж░ <strong>AS_Path</strong> рждржерзНржп ржкрзНрж░ржХрж╛рж╢ ржХрж░рзЗ ржирж╛ред</p>
                      <pre>
                  router bgp 65200
                  aggregate-address 192.168.0.0 255.255.0.0 summary-only
                  aggregate-address 172.16.0.0 255.255.240.0 summary-only
                      </pre>
                  
                      <h3>R3 рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржжрзГрж╖рзНржЯрж┐ржХрзЛржг:</h3>
                      <p>R3 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ рж╕ржорж╖рзНржЯрж┐ржХрзГржд ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ <code>172.16.0.0/20</code> ржжрзЗржЦрждрзЗ ржкрж╛ржпрж╝, ржПржмржВ ржПрж░ <strong>AS_Path</strong> рж╢рзБржзрзБржорж╛рждрзНрж░ <code>65200</code> (R2 ржПрж░ AS ржиржорзНржмрж░) ржжрзЗржЦрж╛ржпрж╝ред R1 ржПрж░ AS ржиржорзНржмрж░ (<code>65100</code>) ржПржЗ ржкрж╛ржерзЗ ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржирзЗржЗред</p>
                      <pre>
                  R3# show bgp ipv4 unicast | begin Network
                  Network          Next Hop            Path
                  *>  172.16.0.0/20    10.23.1.2                65200 i
                      </pre>
                  
                      <h3>Atomic Aggregate ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ:</h3>
                      <p>R3 рж░рж╛ржЙржЯрж╛рж░рзЗ <code>172.16.0.0/20</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗрж░ ржЬржирзНржп BGP ржЯрзЗржмрж┐рж▓рзЗ <strong>Atomic Aggregate</strong> ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ рж╕рзЗржЯ ржХрж░рж╛ ржерж╛ржХрзЗред ржПржЯрж┐ ржжрзЗржЦрж╛ржпрж╝ ржпрзЗ ржПржЗ рж░рзБржЯрзЗ ржкрж╛ржерзЗрж░ ржХрж┐ржЫрзБ рждржерзНржп рж╣рж╛рж░рж┐ржпрж╝рзЗ ржЧрзЗржЫрзЗред</p>
                      <pre>
                  R3# show bgp ipv4 unicast 172.16.0.0
                  Origin IGP, metric 0, localpref 100, valid, external, atomic-aggregate, best
                      </pre>
                  
                      <h2>рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк:</h2>
                      <ul>
                          <li><strong>Route Aggregation</strong> ржПрж░ ржорж╛ржзрзНржпржорзЗ ржПржХрж╛ржзрж┐ржХ ржЫрзЛржЯ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржХрзЗ ржПржХржЯрж┐ ржмржбрж╝ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржкрж░рж┐ржгржд ржХрж░рж╛ рж╣ржпрж╝ред</li>
                          <li><strong>Atomic Aggregate</strong> ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржжрзЗржЦрж╛ржпрж╝ ржпрзЗ рж╕ржорж╖рзНржЯрж┐ржХрж░ржгрзЗрж░ рж╕ржоржпрж╝ ржкрж╛ржерзЗрж░ ржХрж┐ржЫрзБ рждржерзНржп рж╣рж╛рж░рж┐ржпрж╝рзЗ ржЧрзЗржЫрзЗред</li>
                          <li>ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ, R2 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ <code>172.16.0.0/20</code> ржПржмржВ <code>192.168.0.0/16</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐ржХрзЗ рж╕ржорж╖рзНржЯрж┐ржХрж░ржг ржХрж░рзЗ ржПржмржВ R3 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ рж╕ржорж╖рзНржЯрж┐ржХрзГржд ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржжрзЗржЦрждрзЗ ржкрж╛ржпрж╝ред</li>
                      </ul>

                      

                      

                          <h1>Route Aggregation with AS_SET</h1>

                          <h1>Route Aggregation with AS_SET ржХрж┐?</h1>
                          <h2>Route Aggregation (рж░рзБржЯ рж╕ржорж╖рзНржЯрж┐ржХрж░ржг):</h2>
                          <p>ржпржЦржи ржПржХржЯрж┐ BGP рж░рж╛ржЙржЯрж╛рж░ ржПржХрж╛ржзрж┐ржХ ржЫрзЛржЯ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ (prefix) ржХрзЗ ржПржХрждрзНрж░рж┐ржд ржХрж░рзЗ ржПржХржЯрж┐ ржмржбрж╝ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржкрж░рж┐ржгржд ржХрж░рзЗ, рждрж╛ржХрзЗ <strong>Route Aggregation</strong> ржмрж▓рзЗред</p>
                          <p>ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, <code>172.16.1.0/24</code>, <code>172.16.2.0/24</code>, ржПржмржВ <code>172.16.3.0/24</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐ржХрзЗ ржПржХрждрзНрж░рж┐ржд ржХрж░рзЗ <code>172.16.0.0/20</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржкрж░рж┐ржгржд ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред</p>
                      
                          <h2>AS_SET:</h2>
                          <p>рж╕рж╛ржзрж╛рж░ржг Route Aggregation-ржП ржорзВрж▓ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐рж░ <strong>AS_Path</strong>, <strong>MED</strong>, <strong>BGP ржХржорж┐ржЙржирж┐ржЯрж┐</strong> ржЗрждрзНржпрж╛ржжрж┐ ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ рж╣рж╛рж░рж┐ржпрж╝рзЗ ржпрж╛ржпрж╝ред</p>
                          <p><strong>AS_SET</strong> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ, ржПржЗ ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЧрзБрж▓рж┐ рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржпрж╝ред ржорзВрж▓ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐рж░ AS_Path рждржерзНржп <strong>AS_SET</strong> ржЕржВрж╢рзЗ рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржпрж╝ ржПржмржВ ржПржЯрж┐ ржмрзНрж░рзНржпрж╛ржХрзЗржЯрзЗрж░ ржоржзрзНржпрзЗ (<code>{}</code>) ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝ред</p>
                          <p><strong>AS_SET</strong> рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржХржЯрж┐ рж╣ржк рж╣рж┐рж╕рзЗржмрзЗ ржЧржгрзНржп рж╣ржпрж╝, ржПржоржиржХрж┐ ржпржжрж┐ ржПржХрж╛ржзрж┐ржХ AS ржиржорзНржмрж░ рждрж╛рж▓рж┐ржХрж╛ржнрзБржХрзНржд ржерж╛ржХрзЗред</p>
                      
                          <h2>ржЙржжрж╛рж╣рж░ржг рж╕рж╣ ржмрзНржпрж╛ржЦрзНржпрж╛:</h2>
                          <h3>R2 рж░рж╛ржЙржЯрж╛рж░рзЗ AS_SET рж╕рж╣ Aggregation ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h3>
                          <p>R2 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ <code>172.16.0.0/20</code> ржПржмржВ <code>192.168.0.0/16</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐ржХрзЗ рж╕ржорж╖рзНржЯрж┐ржХрж░ржг (aggregate) ржХрж░рзЗ ржПржмржВ <strong>AS_SET</strong> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржорзВрж▓ AS_Path рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рзЗред</p>
                          <pre>
                      router bgp 65200
                      aggregate-address 192.168.0.0 255.255.0.0 as-set summary-only
                      aggregate-address 172.16.0.0 255.255.240.0 as-set summary-only
                          </pre>
                      
                          <h3>R3 рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржжрзГрж╖рзНржЯрж┐ржХрзЛржг:</h3>
                          <p>R3 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ ржПржЦржи <code>172.16.0.0/20</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗрж░ AS_Path-ржП <code>65200</code> ржПржмржВ <code>65100</code> ржжрзЗржЦрждрзЗ ржкрж╛ржпрж╝ред ржПржЯрж┐ <strong>AS_SET</strong> ржПрж░ ржХрж╛рж░ржгрзЗ рж╕ржорзНржнржм рж╣ржпрж╝рзЗржЫрзЗред</p>
                          <pre>
                      R3# show bgp ipv4 unicast 172.16.0.0
                      Paths: (1 available, best #1, table default)
                      65200 65100, (aggregated by 65200 192.168.2.2)
                          </pre>
                      
                          <h3>192.168.0.0/16 ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗрж░ рж╕ржорж╕рзНржпрж╛:</h3>
                          <p>R2 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ <code>192.168.0.0/16</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржХрзЗ рж╕ржорж╖рзНржЯрж┐ржХрж░ржг ржХрж░рж╛рж░ рж╕ржоржпрж╝ <strong>AS_SET</strong> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред ржПржЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗрж░ AS_Path-ржП <code>65100</code> ржПржмржВ <code>65300</code> ржЕржирзНрждрж░рзНржнрзБржХрзНржд ржерж╛ржХрзЗред</p>
                          <p>ржпржЦржи R3 ржПржЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЯрж┐ ржкрж╛ржпрж╝, рждржЦржи ржПржЯрж┐ ржжрзЗржЦрзЗ ржпрзЗ AS_Path-ржП рждрж╛рж░ ржирж┐ржЬрзЗрж░ AS ржиржорзНржмрж░ (<code>65300</code>) рж░ржпрж╝рзЗржЫрзЗред ржПржЯрж┐ ржПржХржЯрж┐ рж▓рзБржк рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪрж┐ржд рж╣ржпрж╝, рждрж╛ржЗ R3 ржПржЗ рж░рзБржЯржЯрж┐ ржмрж╛рждрж┐рж▓ ржХрж░рзЗред</p>
                          <pre>
                      R2# show bgp ipv4 unicast 192.168.0.0
                      Paths: (1 available, best #1, table default)
                      {65100,65300}, (aggregated by 65200 192.168.2.2)
                          </pre>
                      
                          <h3>R1 рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржжрзГрж╖рзНржЯрж┐ржХрзЛржг:</h3>
                          <p>R1 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ржУ <code>192.168.0.0/16</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЯрж┐ ржмрж╛рждрж┐рж▓ ржХрж░рзЗ, ржХрж╛рж░ржг ржПржЯрж┐ AS_Path-ржП рждрж╛рж░ ржирж┐ржЬрзЗрж░ AS ржиржорзНржмрж░ (<code>65100</code>) ржжрзЗржЦрждрзЗ ржкрж╛ржпрж╝ред</p>
                          <pre>
                      R1# show bgp ipv4 unicast | begin Network
                      Network          Next Hop            Path
                      *>  192.168.1.1/32   0.0.0.0                  32768 ?
                          </pre>
                      
                          <h2>рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк:</h2>
                          <ul>
                              <li><strong>AS_SET</strong> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Route Aggregation ржХрж░рж╛рж░ рж╕ржоржпрж╝ ржорзВрж▓ AS_Path рждржерзНржп рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣ржпрж╝ред</li>
                              <li><strong>AS_SET</strong> ржмрзНрж░рзНржпрж╛ржХрзЗржЯрзЗрж░ ржоржзрзНржпрзЗ (<code>{}</code>) ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝ ржПржмржВ ржПржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ ржПржХржЯрж┐ рж╣ржк рж╣рж┐рж╕рзЗржмрзЗ ржЧржгрзНржп рж╣ржпрж╝ред</li>
                              <li>ржпржжрж┐ рж╕ржорж╖рзНржЯрж┐ржХрзГржд ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗрж░ AS_Path-ржП ржХрзЛржирзЛ рж░рж╛ржЙржЯрж╛рж░ рждрж╛рж░ ржирж┐ржЬрзЗрж░ AS ржиржорзНржмрж░ ржжрзЗржЦрзЗ, рждржмрзЗ ржПржЯрж┐ рж░рзБржЯржЯрж┐ ржмрж╛рждрж┐рж▓ ржХрж░рзЗ (рж▓рзБржк ржПржбрж╝рж╛ржирзЛрж░ ржЬржирзНржп)ред</li>
                              <li>ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ, R2 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ <code>172.16.0.0/20</code> ржПржмржВ <code>192.168.0.0/16</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐ржХрзЗ рж╕ржорж╖рзНржЯрж┐ржХрж░ржг ржХрж░рзЗ ржПржмржВ <strong>AS_SET</strong> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред R3 ржПржмржВ R1 рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐ рждрж╛ржжрзЗрж░ ржирж┐ржЬрж╕рзНржм AS ржиржорзНржмрж░ ржжрзЗржЦрзЗ ржХрж┐ржЫрзБ рж░рзБржЯ ржмрж╛рждрж┐рж▓ ржХрж░рзЗред</li>
                          </ul>

                              <h1>Multiprotocol BGP (MP-BGP) ржХрж┐?</h1>
                              <p><strong>Multiprotocol BGP (MP-BGP)</strong> рж╣рж▓рзЛ BGP ржкрзНрж░рзЛржЯрзЛржХрж▓рзЗрж░ ржПржХржЯрж┐ ржПржХрзНрж╕ржЯрзЗржирж╢ржи, ржпрж╛ IPv4, IPv6 ржПржмржВ MPLS Layer 3 VPNs (L3VPNs) ржПрж░ ржорждрзЛ ржПржХрж╛ржзрж┐ржХ ржкрзНрж░рзЛржЯрзЛржХрж▓рзЗрж░ ржЬржирзНржп ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж▓рзЗржпрж╝рж╛рж░ рж░рж┐ржЪрзНржпрж╛ржмрж┐рж▓рж┐ржЯрж┐ ржЗржиржлрж░ржорзЗрж╢ржи (NLRI) ржмрж╣ржи ржХрж░рждрзЗ рж╕ржХрзНрж╖ржоред</p>
                              <p><strong>RFC 4760</strong> ржжрзНржмрж╛рж░рж╛ MP-BGP ржПрж░ ржЬржирзНржп ржирждрзБржи ржлрж┐ржЪрж╛рж░ рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ:</p>
                              <ul>
                                  <li>ржПржХржЯрж┐ ржирждрзБржи <strong>Address Family Identifier (AFI)</strong> ржоржбрзЗрж▓ред</li>
                                  <li>ржирждрзБржи BGPv4 ржЕржкрж╢ржирж╛рж▓ ржПржмржВ ржиржи-ржЯрзНрж░рж╛ржиржЬрж┐ржЯрж┐ржн ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ:
                                      <ul>
                                          <li><strong>Multiprotocol Reachable NLRI:</strong> IPv6 рж░рзБржЯ рждржерзНржп ржмрж░рзНржгржирж╛ ржХрж░рзЗред</li>
                                          <li><strong>Multiprotocol Unreachable NLRI:</strong> IPv6 рж░рзБржЯ рж╕рж╛рж░рзНржнрж┐рж╕ ржерзЗржХрзЗ ржкрзНрж░рждрзНржпрж╛рж╣рж╛рж░ ржХрж░рзЗред</li>
                                      </ul>
                                  </li>
                              </ul>
                              <p>ржПржЗ ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЧрзБрж▓рж┐ ржЕржкрж╢ржирж╛рж▓ ржПржмржВ ржиржи-ржЯрзНрж░рж╛ржиржЬрж┐ржЯрж┐ржн, рждрж╛ржЗ ржпржжрж┐ ржХрзЛржирзЛ ржкрзБрж░рж╛ржирзЛ рж░рж╛ржЙржЯрж╛рж░ ржПржЗ ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЧрзБрж▓рж┐ ржмрзБржЭрждрзЗ ржирж╛ ржкрж╛рж░рзЗ, рждрж╛рж╣рж▓рзЗ ржПржЯрж┐ ржПржЗ рждржерзНржп ржЙржкрзЗржХрзНрж╖рж╛ ржХрж░рзЗред</p>
                          
                              <h2>MP-BGP for IPv6:</h2>
                              <p>MP-BGP for IPv6, IPv4 BGP ржПрж░ ржорждрзЛ ржПржХржЗ ржкрж╛рже ржнрзЗржХрзНржЯрж░ рж░рж╛ржЙржЯрж┐ржВ ржкрзНрж░рзЛржЯрзЛржХрж▓ ржлрж┐ржЪрж╛рж░ ржПржмржВ ржирж┐ржпрж╝ржо ржЕржирзБрж╕рж░ржг ржХрж░рзЗред</p>
                              <p>MP-BGP for IPv6, BGP ржПрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд TCP ржкрзЛрж░рзНржЯ 179 ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж╕рзЗрж╢ржи ржкрж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░рж╛рж░ ржЬржирзНржпред</p>
                              <p>ржкрзНрж░рж╛ржержорж┐ржХ ржУржкрзЗржи ржорзЗрж╕рзЗржЬ ржирзЗржЧрзЛрж╢рж┐ржпрж╝рзЗрж╢ржирзЗрж░ рж╕ржоржпрж╝, BGP ржкрж┐ржпрж╝рж╛рж░ рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐ рждрж╛ржжрзЗрж░ ржХрзНржпрж╛ржкрж╛ржмрж┐рж▓рж┐ржЯрж┐ ржПржХрзНрж╕ржЪрзЗржЮрзНржЬ ржХрж░рзЗред MP-BGP ржПржХрзНрж╕ржЯрзЗржирж╢ржирзЗ ржПржХржЯрж┐ <strong>Address Family Identifier (AFI)</strong> рж░ржпрж╝рзЗржЫрзЗ, ржпрж╛ рж╕ржорж░рзНржерж┐ржд ржкрзНрж░рзЛржЯрзЛржХрж▓ржЧрзБрж▓рж┐ ржмрж░рзНржгржирж╛ ржХрж░рзЗред ржПржЫрж╛ржбрж╝рж╛ржУ, <strong>Subsequent Address Family Identifier (SAFI)</strong> ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржлрж┐рж▓рзНржб рж░ржпрж╝рзЗржЫрзЗ, ржпрж╛ ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗ ржпрзЗ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ржЯрж┐ ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржирж╛ржХрж┐ ржорж╛рж▓рзНржЯрж┐ржХрж╛рж╕рзНржЯ рж░рзБржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗрж░ ржЬржирзНржп ржкрзНрж░ржпрзЛржЬрзНржп:</p>
                              <ul>
                                  <li><strong>IPv4 ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ:</strong> AFI: 1, SAFI: 1</li>
                                  <li><strong>IPv6 ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ:</strong> AFI: 2, SAFI: 1</li>
                              </ul>
                          
                              <h2>ржЙржжрж╛рж╣рж░ржг ржЯржкрзЛрж▓ржЬрж┐:</h2>
                              <p>ржЪрж┐рждрзНрж░ 11-13 ржП рждрж┐ржиржЯрж┐ ржнрж┐ржирзНржи AS (AS 65100, AS 65200, ржПржмржВ AS 65300) рж╕рж╣ ржПржХржЯрж┐ рж╕рж┐ржорзНржкрж▓ ржЯржкрзЛрж▓ржЬрж┐ ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред</p>
                              <ul>
                                  <li><strong>R1</strong>, <strong>R2</strong>, ржПржмржВ <strong>R3</strong> рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐ eBGP рж╕рзЗрж╢ржи ржЧржаржи ржХрж░рзЗред</li>
                                  <li><strong>рж▓рж┐ржЩрзНржХ-рж▓рзЛржХрж╛рж▓ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ржЧрзБрж▓рж┐</strong> FE80::/10 рж░рзЗржЮрзНржЬ ржерзЗржХрзЗ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ:
                                      <ul>
                                          <li>R1 ржПрж░ рж▓рж┐ржЩрзНржХржЧрзБрж▓рж┐ FE80::1</li>
                                          <li>R2 ржПрж░ рж▓рж┐ржЩрзНржХржЧрзБрж▓рж┐ FE80::2</li>
                                          <li>R3 ржПрж░ рж▓рж┐ржЩрзНржХржЧрзБрж▓рж┐ FE80::3</li>
                                      </ul>
                                  </li>
                                  <li><strong>рж▓рзБржкржмрзНржпрж╛ржХ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ржЧрзБрж▓рж┐:</strong>
                                      <ul>
                                          <li>R1: 2001:db8::1/128</li>
                                          <li>R2: 2001:db8::2/128</li>
                                          <li>R3: 2001:db8::3/128</li>
                                      </ul>
                                  </li>
                              </ul>
                          
                              <h3>ржЯржкрзЛрж▓ржЬрж┐ ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо:</h3>
                              <pre>
                          2001:db8:0:12::/64     2001:db8:0:23::/64     2001:db8:0:1::/64
                                 R1 ----------------- R2 ----------------- R3
                                 AS 65100            AS 65200            AS 65300
                                 Loopback 0:         Loopback 0:         Loopback 0:
                                 2001:db8::1/128     2001:db8::2/128     2001:db8::3/128
                              </pre>
                          
                              <h2>рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк:</h2>
                              <ul>
                                  <li><strong>MP-BGP</strong> IPv4, IPv6, ржПржмржВ MPLS L3VPNs ржПрж░ ржорждрзЛ ржПржХрж╛ржзрж┐ржХ ржкрзНрж░рзЛржЯрзЛржХрж▓рзЗрж░ ржЬржирзНржп NLRI ржмрж╣ржи ржХрж░рждрзЗ рж╕ржХрзНрж╖ржоред</li>
                                  <li><strong>RFC 4760</strong> MP-BGP ржПрж░ ржЬржирзНржп ржирждрзБржи AFI ржПржмржВ NLRI ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ рж╕ржВржЬрзНржЮрж╛ржпрж╝рж┐ржд ржХрж░рзЗред</li>
                                  <li><strong>MP-BGP for IPv6</strong> IPv4 BGP ржПрж░ ржорждрзЛ ржПржХржЗ ржирж┐ржпрж╝ржо ржПржмржВ ржлрж┐ржЪрж╛рж░ ржЕржирзБрж╕рж░ржг ржХрж░рзЗред</li>
                                  <li>ржЙржжрж╛рж╣рж░ржг ржЯржкрзЛрж▓ржЬрж┐рждрзЗ рждрж┐ржиржЯрж┐ AS ржПржмржВ рж▓рж┐ржЩрзНржХ-рж▓рзЛржХрж╛рж▓ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ рж╕рж╣ рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐ ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред</li>
                              </ul>



                                  <h1>IPv6 BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h1>
                                  <h2>IPv6 Address Family:</h2>
                                  <p>IPv6 BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп <strong>IPv6 Address Family</strong> ржЗржирж┐рж╢рж┐ржпрж╝рж╛рж▓рж╛ржЗржЬ ржХрж░рждрзЗ рж╣ржмрзЗ ржПржмржВ ржирзЗржЗржмрж╛рж░ ржЕрзНржпрж╛ржХрзНржЯрж┐ржнрзЗржЯ ржХрж░рждрзЗ рж╣ржмрзЗред</p>
                                  <p>рж╢рзБржзрзБржорж╛рждрзНрж░ IPv6 ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕рж┐ржВ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐рж░ ржЬржирзНржп <strong>BGP Router ID (RID)</strong> рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХржнрж╛ржмрзЗ ржбрж┐ржлрж╛ржЗржи ржХрж░рждрзЗ рж╣ржмрзЗ, ржпрж╛рждрзЗ рж╕рзЗрж╢ржи ржЧржаржи ржХрж░рж╛ ржпрж╛ржпрж╝ред</p>
                              
                                  <h2>BGP рж╕рзЗрж╢ржи ржкрзНрж░рзЛржЯрзЛржХрж▓:</h2>
                                  <p>BGP рж╕рзЗрж╢ржи ржЧржаржирзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд ржкрзНрж░рзЛржЯрзЛржХрж▓ (IPv4 ржмрж╛ IPv6) ржЖрж▓рж╛ржжрж╛ рж╣рждрзЗ ржкрж╛рж░рзЗ, рждржмрзЗ ржПржЯрж┐ <strong>AFI/SAFI</strong> рж░рзБржЯ ржЕрзНржпрж╛ржбржнрж╛рж░рзНржЯрж╛ржЗржЬржорзЗржирзНржЯ ржерзЗржХрзЗ рж╕рзНржмрж╛ржзрзАржиред</p>
                                  <p>IPv6 ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ржЧрзБрж▓рж┐ IPv4 BGP рж╕рзЗрж╢ржирзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЕрзНржпрж╛ржбржнрж╛рж░рзНржЯрж╛ржЗржЬ ржХрж░рж╛ рж╕ржорзНржнржм, рждржмрзЗ ржПржЯрж┐ ржЕрждрж┐рж░рж┐ржХрзНржд ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржкрзНрж░ржпрж╝рзЛржЬржиред</p>
                              
                                  <h2>рж▓рж┐ржЩрзНржХ-рж▓рзЛржХрж╛рж▓ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ рж╕рждрж░рзНржХрждрж╛:</h2>
                                  <p>рж▓рж┐ржЩрзНржХ-рж▓рзЛржХрж╛рж▓ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ BGP ржкрж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░рж╛ ржЭрзБржБржХрж┐ржкрзВрж░рзНржг рж╣рждрзЗ ржкрж╛рж░рзЗ, ржХрж╛рж░ржг рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржлрзЗржЗрж▓рж┐ржЙрж░ ржмрж╛ ржХрзЗржмрж▓ ржкрж░рж┐ржмрж░рзНрждржирзЗрж░ ржлрж▓рзЗ MAC ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж╣рждрзЗ ржкрж╛рж░рзЗ, ржпрж╛ рж▓рж┐ржЩрзНржХ-рж▓рзЛржХрж╛рж▓ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзЗред ржПржЯрж┐ рж╕рзЗрж╢ржи ржлрзЗржЗрж▓рж┐ржЙрж░рзЗрж░ ржХрж╛рж░ржг рж╣рждрзЗ ржкрж╛рж░рзЗред</p>
                                  <p>рж╕рзБрждрж░рж╛ржВ, <strong>ржЧрзНрж▓рзЛржмрж╛рж▓ ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕</strong> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред</p>
                              
                                  <h2>ржЙржжрж╛рж╣рж░ржг ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
                                  <p>ржирж┐ржЪрзЗ R1, R2, ржПржмржВ R3 рж░рж╛ржЙржЯрж╛рж░рзЗрж░ IPv6 BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржжрзЗржЦрж╛ржирзЛ рж╣рж▓рзЛ:</p>
                              
                                  <h3>R1:</h3>
                                  <pre>
                              router bgp 65100
                               bgp router-id 192.168.1.1
                               bgp log-neighbor-changes
                               no bgp default ipv4-unicast
                               neighbor 2001:DB8:0:12::2 remote-as 65200
                               !
                               address-family ipv6
                                neighbor 2001:DB8:0:12::2 activate
                                redistribute connected
                                  </pre>
                              
                                  <h3>R2:</h3>
                                  <pre>
                              router bgp 65200
                               bgp router-id 192.168.2.2
                               bgp log-neighbor-changes
                               no bgp default ipv4-unicast
                               neighbor 2001:DB8:0:12::1 remote-as 65100
                               neighbor 2001:DB8:0:23::3 remote-as 65300
                               !
                               address-family ipv6
                                neighbor 2001:DB8:0:12::1 activate
                                neighbor 2001:DB8:0:23::3 activate
                                network 2001:DB8::2/128
                                network 2001:DB8:0:12::/64
                                network 2001:DB8:0:23::/64
                                  </pre>
                              
                                  <h3>R3:</h3>
                                  <pre>
                              router bgp 65300
                               bgp router-id 192.168.3.3
                               bgp log-neighbor-changes
                               no bgp default ipv4-unicast
                               neighbor 2001:DB8:0:23::2 remote-as 65200
                               !
                               address-family ipv6
                                neighbor 2001:DB8:0:23::2 activate
                                network 2001:DB8::3/128
                                network 2001:DB8:0:3::/64
                                network 2001:DB8:0:23::/64
                                  </pre>
                              
                                  <h2>BGP ржирзЗржЗржмрж╛рж░ ржнрзЗрж░рж┐ржлрж┐ржХрзЗрж╢ржи:</h2>
                                  <h3>IPv6 Capabilities:</h3>
                                  <p>BGP рж╕рзЗрж╢ржи ржирзЗржЧрзЛрж╢рж┐ржпрж╝рзЗрж╢ржирзЗрж░ рж╕ржоржпрж╝ рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐ рждрж╛ржжрзЗрж░ <strong>AFI Capabilities</strong> ржПржХрзНрж╕ржЪрзЗржЮрзНржЬ ржХрж░рзЗред</p>
                                  <p><code>show bgp ipv6 unicast neighbors &lt;ip-address&gt; [detail]</code> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ IPv6 ржХрзНржпрж╛ржкрж╛ржмрж┐рж▓рж┐ржЯрж┐ ржирзЗржЧрзЛрж╢рж┐ржпрж╝рзЗрж╢ржи рж╕ржлрж▓ рж╣ржпрж╝рзЗржЫрзЗ ржХрж┐ржирж╛ рждрж╛ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ ржпрж╛ржпрж╝ред</p>
                              
                                  <h3>BGP рж╕рзЗрж╢ржи рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕:</h3>
                                  <p><code>show bgp ipv6 unicast summary</code> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ BGP рж╕рзЗрж╢ржирзЗрж░ рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕, рж░рзБржЯ рж╕ржВржЦрзНржпрж╛ ржПржмржВ рж╕рзЗрж╢ржи ржЖржкржЯрж╛ржЗржо ржжрзЗржЦрж╛ржирзЛ ржпрж╛ржпрж╝ред</p>
                              
                                  <h2>BGP ржЯрзЗржмрж┐рж▓ ржПржмржВ ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ:</h2>
                                  <h3>BGP ржЯрзЗржмрж┐рж▓:</h3>
                                  <p><code>show bgp ipv6 unicast</code> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ IPv6 BGP ржЯрзЗржмрж┐рж▓ ржжрзЗржЦрж╛ржирзЛ ржпрж╛ржпрж╝ред</p>
                                  <p>ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, <code>::</code> ржирзЗржХрзНрж╕ржЯ рж╣ржк ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗ ржпрзЗ рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ рж╕рзНржерж╛ржирзАржпрж╝ржнрж╛ржмрзЗ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржЬрзЗржирж╛рж░рзЗржЯ ржХрж░рзЗржЫрзЗред</p>
                              
                                  <h3>ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ:</h3>
                                  <p><code>show bgp ipv6 unicast &lt;prefix/prefix-length&gt;</code> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ IPv6 рж░рзБржЯрзЗрж░ ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржжрзЗржЦрж╛ржирзЛ ржпрж╛ржпрж╝ред</p>
                                  <p>ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, <strong>AS_Path</strong>, <strong>Origin</strong>, ржПржмржВ <strong>Local Preference</strong> ржлрж┐рж▓рзНржбржЧрзБрж▓рж┐ IPv4 рж░рзБржЯрзЗрж░ ржорждрзЛржЗред</p>
                              
                                  <h2>рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк:</h2>
                                  <ul>
                                      <li>IPv6 BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржЬржирзНржп <strong>IPv6 Address Family</strong> ржЕрзНржпрж╛ржХрзНржЯрж┐ржнрзЗржЯ ржХрж░рждрзЗ рж╣ржмрзЗ ржПржмржВ ржирзЗржЗржмрж╛рж░ ржЕрзНржпрж╛ржХрзНржЯрж┐ржнрзЗржЯ ржХрж░рждрзЗ рж╣ржмрзЗред</li>
                                      <li><strong>ржЧрзНрж▓рзЛржмрж╛рж▓ ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕</strong> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ BGP ржкрж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░рж╛ рж╕рзБржкрж╛рж░рж┐рж╢ ржХрж░рж╛ рж╣ржпрж╝ред</li>
                                      <li><code>show bgp ipv6 unicast</code> ржПржмржВ <code>show bgp ipv6 unicast summary</code> ржХржорж╛ржирзНржбржЧрзБрж▓рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ IPv6 BGP рж╕рзЗрж╢ржи ржПржмржВ рж░рзБржЯржЧрзБрж▓рж┐ ржорзНржпрж╛ржирзЗржЬ ржХрж░рж╛ ржпрж╛ржпрж╝ред</li>
                                  </ul>


                                      <h1>IPv6 ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h1>
                                      <p>
                                          ржЖржЧрзЗ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╕ржорж╕рзНржд BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржирж┐ржпрж╝ржо IPv6-ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗржУ ржкрзНрж░ржпрзЛржЬрзНржп, рждржмрзЗ IPv6 ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ рж╢рзБрж░рзБ ржХрж░рждрзЗ рж╣ржмрзЗ ржПржмржВ ржирзЗржЗржмрж╛рж░ржХрзЗ рж╕ржХрзНрж░рж┐ржпрж╝ ржХрж░рждрзЗ рж╣ржмрзЗред рж╢рзБржзрзБржорж╛рждрзНрж░ IPv6 ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕рж┐ржВржпрзБржХрзНржд рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐ржХрзЗ BGP RID рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХржнрж╛ржмрзЗ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рждрзЗ рж╣ржмрзЗ ржпрж╛рждрзЗ рж╕рзЗрж╢ржи ржЧржаржи ржХрж░рж╛ ржпрж╛ржпрж╝ред
                                          BGP рж╕рзЗрж╢ржи рж╕рзНржерж╛ржкржирзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд ржкрзНрж░рзЛржЯрзЛржХрж▓ AFI/SAFI рж░рзБржЯ ржмрж┐ржЬрзНржЮрж╛ржкржи ржерзЗржХрзЗ рж╕рзНржмрж╛ржзрзАржиред BGP ржжрзНржмрж╛рж░рж╛ ржмрзНржпржмрж╣рзГржд TCP рж╕рзЗрж╢ржи ржПржХржЯрж┐ рж▓рзЗржпрж╝рж╛рж░ 4 ржкрзНрж░рзЛржЯрзЛржХрж▓, ржПржмржВ ржПржЯрж┐ ржПржХржЯрж┐ рж╕рзЗрж╢ржи adjacency ржЧржаржи ржПржмржВ рж░рзБржЯ ржмрж┐ржирж┐ржоржпрж╝ ржХрж░рждрзЗ IPv4 ржмрж╛ IPv6 ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗред IPv4 BGP рж╕рзЗрж╢ржирзЗрж░ ржорж╛ржзрзНржпржорзЗ IPv6 ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржмрж┐ржЬрзНржЮрж╛ржкржи ржжрзЗржУржпрж╝рж╛ рж╕ржорзНржнржм, рждржмрзЗ ржПржЯрж┐ ржПржЗ ржмржЗржпрж╝рзЗрж░ рж╕рзБржпрзЛржЧрзЗрж░ ржмрж╛ржЗрж░рзЗ ржХрж╛рж░ржг ржЕрждрж┐рж░рж┐ржХрзНржд ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржкрзНрж░ржпрж╝рзЛржЬржиред
                                      </p>
                                  
                                      <h2>ржирзЛржЯ:</h2>
                                      <p>
                                          ржЕржкрж╛рж░рзЗрж╢ржирж╛рж▓ ржЬржЯрж┐рж▓рждрж╛ ржПржбрж╝рж╛рждрзЗ BGP ржкрж┐ржпрж╝рж╛рж░рж┐ржВржпрж╝рзЗрж░ ржЬржирзНржп ржЕржиржирзНржп ржЧрзНрж▓рзЛржмрж╛рж▓ ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕рж┐ржВ ржкрзНрж░рж╕рзНрждрж╛ржмрж┐ржд ржкржжрзНржзрждрж┐ред рж▓рж┐ржЩрзНржХ-рж▓рзЛржХрж╛рж▓ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ BGP ржкрж┐ржпрж╝рж╛рж░рж┐ржВ ржЭрзБржБржХрж┐ рждрзИрж░рж┐ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржпржжрж┐ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗ ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓рж┐ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржирж┐рж░рзНржзрж╛рж░ржг ржирж╛ ржХрж░рж╛ рж╣ржпрж╝ред рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржмрзНржпрж░рзНржерждрж╛ ржмрж╛ ржХрзЗржмрж▓рж┐ржВ ржкрж░рж┐ржмрж░рзНрждржи MAC ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░ржмрзЗ, ржпрж╛рж░ ржлрж▓рзЗ ржПржХржЯрж┐ ржирждрзБржи рж▓рж┐ржЩрзНржХ-рж▓рзЛржХрж╛рж▓ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ рждрзИрж░рж┐ рж╣ржмрзЗред ржПржЯрж┐ рж╕рзЗрж╢ржи ржмрзНржпрж░рзНржерждрж╛рж░ ржХрж╛рж░ржг рж╣ржмрзЗ ржХрж╛рж░ржг рж╕рзНржЯрзЗржЯрж▓рзЗрж╕ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржЕржЯрзЛржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржПржХржЯрж┐ ржирждрзБржи IP ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ рждрзИрж░рж┐ ржХрж░ржмрзЗред
                                      </p>
                                  
                                      <h2>ржЙржжрж╛рж╣рж░ржг 11-28 IPv6 BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h2>
                                      <pre>
                                  R1
                                  router bgp 65100
                                   bgp router-id 192.168.1.1
                                   bgp log-neighbor-changes
                                   no bgp default ipv4-unicast
                                   neighbor 2001:DB8:0:12::2 remote-as 65200
                                   !
                                   address-family ipv6
                                    neighbor 2001:DB8:0:12::2 activate
                                    redistribute connected
                                  
                                  R2
                                  router bgp 65200
                                   bgp router-id 192.168.2.2
                                   bgp log-neighbor-changes
                                   no bgp default ipv4-unicast
                                   neighbor 2001:DB8:0:12::1 remote-as 65100
                                   neighbor 2001:DB8:0:23::3 remote-as 65300
                                   !
                                   address-family ipv6
                                    neighbor 2001:DB8:0:12::1 activate
                                    neighbor 2001:DB8:0:23::3 activate
                                    network 2001:DB8::2/128
                                    network 2001:DB8:0:12::/64
                                    network 2001:DB8:0:23::/64
                                  
                                  R3
                                  router bgp 65300
                                   bgp router-id 192.168.3.3
                                   bgp log-neighbor-changes
                                   no bgp default ipv4-unicast
                                   neighbor 2001:DB8:0:23::2 remote-as 65200
                                   !
                                   address-family ipv6
                                    neighbor 2001:DB8:0:23::2 activate
                                    network 2001:DB8::3/128
                                    network 2001:DB8:0:3::/64
                                    network 2001:DB8:0:23::/64
                                      </pre>
                                  
                                      <h2>ржирзЛржЯ:</h2>
                                      <p>
                                          IOS-ржП IPv4 ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ рж░рж╛ржЙржЯрж┐ржВ ржХрзНрж╖ржорждрж╛ ржбрж┐ржлрж▓рзНржЯржнрж╛ржмрзЗ ржмрж┐ржЬрзНржЮрж╛ржкрж┐ржд рж╣ржпрж╝ ржпржжрж┐ ржирж╛ IPv4 ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐рждрзЗ ржирзЗржЗржмрж╛рж░ рж╕рзНржкрж╖рзНржЯржнрж╛ржмрзЗ рж╢рж╛ржЯ ржбрж╛ржЙржи ржХрж░рж╛ рж╣ржпрж╝ ржмрж╛ BGP ржкрзНрж░рж╕рзЗрж╕рзЗ <code>no bgp default ipv4-unicast</code> ржХржорж╛ржирзНржбрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЧрзНрж▓рзЛржмрж╛рж▓рж┐ рж╢рж╛ржЯ ржбрж╛ржЙржи ржХрж░рж╛ рж╣ржпрж╝ред
                                      </p>
                                  
                                      <h2>ржЙржжрж╛рж╣рж░ржг 11-29 IPv6 ржХрзНрж╖ржорждрж╛рж░ ржЬржирзНржп BGP ржирзЗржЗржмрж╛рж░ ржжрзЗржЦрзБржи</h2>
                                      <pre>
                                  R1# show bgp ipv6 unicast neighbors 2001:DB8:0:12::2
                                  ! Output omitted for brevity
                                  BGP neighbor is 2001:DB8:0:12::2,  remote AS 65200, external link
                                  BGP version 4, remote router ID 192.168.2.2
                                  BGP state = Established, up for 00:28:25
                                  Last read 00:00:54, last write 00:00:34, hold time is 180, keepalive interval is 60 seconds
                                  Neighbor capabilities:
                                    Route refresh: advertised and received(new)
                                    Four-octets ASN Capability: advertised and received
                                    Address family IPv6 Unicast: advertised and received
                                    Enhanced Refresh Capability: advertised and received
                                  ..
                                  For address family: IPv6 Unicast
                                    Session: 2001:DB8:0:12::2
                                    BGP table version 13, neighbor version 13/0
                                    Output queue size : 0
                                    Index 1, Advertise bit 0
                                    1 update-group member
                                    Slow-peer detection is disabled
                                    Slow-peer split-update-group dynamic is disabled
                                    Sent       Rcvd
                                    Prefix activity:               ----       ----
                                    Prefixes Current:               3          5 (Consumes 520 bytes)
                                    Prefixes Total:                 6         10
                                      </pre>
                                  
                                      <h2>ржЙржжрж╛рж╣рж░ржг 11-30 IPv6 BGP рж╕рзЗрж╢ржи ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛</h2>
                                      <pre>
                                  R2# show bgp ipv6 unicast summary
                                  BGP router identifier 192.168.2.2, local AS number 65200
                                  BGP table version is 19, main routing table version 19
                                  7 network entries using 1176 bytes of memory
                                  8 path entries using 832 bytes of memory
                                  3/3 BGP path/bestpath attribute entries using 456 bytes of memory
                                  2 BGP AS-PATH entries using 48 bytes of memory
                                  0 BGP route-map cache entries using 0 bytes of memory
                                  0 BGP filter-list cache entries using 0 bytes of memory
                                  BGP using 2512 total bytes of memory
                                  BGP activity 7/0 prefixes, 8/0 paths, scan interval 60 secs
                                  
                                  Neighbor         V     AS MsgRcvd MsgSent TblVer InQ OutQ Up/Down  State/PfxRcd
                                  2001:DB8:0:12::1 4  65100      35      37     19   0    0 00:25:08        3
                                  2001:DB8:0:23::3 4  65300      32      37     19   0    0 00:25:11        3
                                      </pre>
                                  
                                      <h2>ржЙржжрж╛рж╣рж░ржг 11-31 IPv6 BGP ржЯрзЗржмрж┐рж▓ ржжрзЗржЦрзБржи</h2>
                                      <pre>
                                  R1# show bgp ipv6 unicast
                                  BGP table version is 13, local router ID is 192.168.1.1
                                  Status codes: s suppressed, d damped, h history, * valid, > best, i - internal,
                                                r RIB-failure, S Stale, m multipath, b backup-path, f RT-Filter,
                                                x best-external, a additional-path, c RIB-compressed,
                                  Origin codes: i - IGP, e - EGP, ? - incomplete
                                  RPKI validation codes: V valid, I invalid, N Not found
                                  
                                       Network          Next Hop            Metric LocPrf Weight Path
                                   *>  2001:DB8::1/128  ::                       0         32768 ?
                                   *>  2001:DB8::2/128  2001:DB8:0:12::2         0             0 65200 i
                                   *>  2001:DB8::3/128  2001:DB8:0:12::2         0             0 65200 65300 i
                                   *>  2001:DB8:0:1::/64 ::                      0         32768 ?
                                   *>  2001:DB8:0:3::/64 2001:DB8:0:12::2        0             0 65200 65300 i
                                   *  2001:DB8:0:12::/64 2001:DB8:0:12::2        0             0 65200 i
                                   *>                    ::                      0         32768 ?
                                   *>  2001:DB8:0:23::/64 2001:DB8:0:12::2       0             0 65200 65300 i
                                      </pre>
                                  
                                      <h2>ржЙржжрж╛рж╣рж░ржг 11-32 ржПржХржЯрж┐ IPv6 рж░рзБржЯрзЗрж░ ржЬржирзНржп BGP ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржжрзЗржЦрзБржи</h2>
                                      <pre>
                                  R3# show bgp ipv6 unicast 2001:DB8::1/128
                                  BGP routing table entry for 2001:DB8::1/128, version 9
                                  Paths: (1 available, best #1, table default)
                                    Not advertised to any peer
                                    Refresh Epoch 2
                                    65200 65100
                                      2001:DB8:0:23::2 (FE80::2) from 2001:DB8:0:23::2 (192.168.2.2)
                                        Origin incomplete, localpref 100, valid, external, best
                                        rx pathid: 0, tx pathid: 0x0
                                      </pre>
                                  
                                      <h2>ржЙржжрж╛рж╣рж░ржг 11-33 BGP рж╢рзЗржЦрж╛ IPv6 рж░рзБржЯрзЗрж░ ржЬржирзНржп ржЧрзНрж▓рзЛржмрж╛рж▓ RIB</h2>
                                      <pre>
                                  R2# show ipv6 route bgp
                                  IPv6 Routing Table - default - 10 entries
                                  Codes: C - Connected, L - Local, S - Static, U - Per-user Static route
                                         B - BGP, HA - Home Agent, MR - Mobile Router, R - RIP
                                         H - NHRP, I1 - ISIS L1, I2 - ISIS L2, IA - ISIS interarea
                                         IS - ISIS summary, D - EIGRP, EX - EIGRP external, NM - NEMO
                                         ND - ND Default, NDp - ND Prefix, DCE - Destination, NDr - Redirect
                                         RL - RPL, O - OSPF Intra, OI - OSPF Inter, OE1 - OSPF ext 1
                                         OE2 - OSPF ext 2, ON1 - OSPF NSSA ext 1, ON2 - OSPF NSSA ext 2
                                         la - LISP alt, lr - LISP site-registrations, ld - LISP dyn-eid
                                         a - Application
                                  B   2001:DB8::1/128 [20/0]
                                       via FE80::1, GigabitEthernet0/0
                                  B   2001:DB8::3/128 [20/0]
                                       via FE80::3, GigabitEthernet0/1
                                  B   2001:DB8:0:1::/64 [20/0]
                                       via FE80::1, GigabitEthernet0/0
                                  B   2001:DB8:0:3::/64 [20/0]
                                       via FE80::3, GigabitEthernet0/1
                                      </pre>

                                          <h1>IPv6 BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржирзЛржЯ</h1>
                                      
                                          <h2>ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржЯржкрзЛрж▓ржЬрж┐:</h2>
                                          <ul>
                                              <li><strong>R1</strong> (AS 65100) ржПржмржВ <strong>R2</strong> (AS 65200) ржПрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ рж▓рж┐ржЩрзНржХред</li>
                                              <li><strong>R2</strong> (AS 65200) ржПржмржВ <strong>R3</strong> (AS 65300) ржПрж░ ржоржзрзНржпрзЗ ржПржХржЯрж┐ рж▓рж┐ржЩрзНржХред</li>
                                          </ul>
                                      
                                          <h2>IPv6 ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕рж┐ржВ:</h2>
                                          <ul>
                                              <li>R1 ржПржмржВ R2 ржПрж░ ржоржзрзНржпрзЗ рж▓рж┐ржЩрзНржХ: <code>2001:DB8:0:12::/64</code></li>
                                              <li>R2 ржПржмржВ R3 ржПрж░ ржоржзрзНржпрзЗ рж▓рж┐ржЩрзНржХ: <code>2001:DB8:0:23::/64</code></li>
                                              <li>R1 ржПрж░ рж▓рзБржкржмрзНржпрж╛ржХ: <code>2001:DB8::1/128</code></li>
                                              <li>R2 ржПрж░ рж▓рзБржкржмрзНржпрж╛ржХ: <code>2001:DB8::2/128</code></li>
                                              <li>R3 ржПрж░ рж▓рзБржкржмрзНржпрж╛ржХ: <code>2001:DB8::3/128</code></li>
                                          </ul>
                                      
                                          <h2>R1 ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
                                          <pre>
                                      R1# configure terminal
                                      R1(config)# interface GigabitEthernet0/0
                                      R1(config-if)# ipv6 address 2001:DB8:0:12::1/64
                                      R1(config-if)# no shutdown
                                      R1(config-if)# exit
                                      
                                      R1(config)# interface Loopback0
                                      R1(config-if)# ipv6 address 2001:DB8::1/128
                                      R1(config-if)# exit
                                      
                                      R1(config)# router bgp 65100
                                      R1(config-router)# bgp router-id 192.168.1.1
                                      R1(config-router)# no bgp default ipv4-unicast
                                      R1(config-router)# neighbor 2001:DB8:0:12::2 remote-as 65200
                                      R1(config-router)# address-family ipv6 unicast
                                      R1(config-router-af)# neighbor 2001:DB8:0:12::2 activate
                                      R1(config-router-af)# network 2001:DB8::1/128
                                      R1(config-router-af)# redistribute connected
                                      R1(config-router-af)# exit
                                          </pre>
                                      
                                          <h2>R2 ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
                                          <pre>
                                      R2# configure terminal
                                      R2(config)# interface GigabitEthernet0/0
                                      R2(config-if)# ipv6 address 2001:DB8:0:12::2/64
                                      R2(config-if)# no shutdown
                                      R2(config-if)# exit
                                      
                                      R2(config)# interface GigabitEthernet0/1
                                      R2(config-if)# ipv6 address 2001:DB8:0:23::2/64
                                      R2(config-if)# no shutdown
                                      R2(config-if)# exit
                                      
                                      R2(config)# interface Loopback0
                                      R2(config-if)# ipv6 address 2001:DB8::2/128
                                      R2(config-if)# exit
                                      
                                      R2(config)# router bgp 65200
                                      R2(config-router)# bgp router-id 192.168.2.2
                                      R2(config-router)# no bgp default ipv4-unicast
                                      R2(config-router)# neighbor 2001:DB8:0:12::1 remote-as 65100
                                      R2(config-router)# neighbor 2001:DB8:0:23::3 remote-as 65300
                                      R2(config-router)# address-family ipv6 unicast
                                      R2(config-router-af)# neighbor 2001:DB8:0:12::1 activate
                                      R2(config-router-af)# neighbor 2001:DB8:0:23::3 activate
                                      R2(config-router-af)# network 2001:DB8::2/128
                                      R2(config-router-af)# network 2001:DB8:0:12::/64
                                      R2(config-router-af)# network 2001:DB8:0:23::/64
                                      R2(config-router-af)# exit
                                          </pre>
                                      
                                          <h2>R3 ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
                                          <pre>
                                      R3# configure terminal
                                      R3(config)# interface GigabitEthernet0/0
                                      R3(config-if)# ipv6 address 2001:DB8:0:23::3/64
                                      R3(config-if)# no shutdown
                                      R3(config-if)# exit
                                      
                                      R3(config)# interface Loopback0
                                      R3(config-if)# ipv6 address 2001:DB8::3/128
                                      R3(config-if)# exit
                                      
                                      R3(config)# router bgp 65300
                                      R3(config-router)# bgp router-id 192.168.3.3
                                      R3(config-router)# no bgp default ipv4-unicast
                                      R3(config-router)# neighbor 2001:DB8:0:23::2 remote-as 65200
                                      R3(config-router)# address-family ipv6 unicast
                                      R3(config-router-af)# neighbor 2001:DB8:0:23::2 activate
                                      R3(config-router-af)# network 2001:DB8::3/128
                                      R3(config-router-af)# network 2001:DB8:0:23::/64
                                      R3(config-router-af)# exit
                                          </pre>
                                      
                                          <h2>ржХржорж╛ржирзНржбрж╕ ржЯрзБ ржнрзЗрж░рж┐ржлрж╛ржЗ:</h2>
                                          <ol>
                                              <li><strong>BGP рж╕рзЗрж╢ржи рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЪрзЗржХ ржХрж░рзБржи:</strong>
                                                  <pre>R1# show bgp ipv6 unicast summary</pre>
                                              </li>
                                              <li><strong>BGP ржЯрзЗржмрж┐рж▓ ржЪрзЗржХ ржХрж░рзБржи:</strong>
                                                  <pre>R1# show bgp ipv6 unicast</pre>
                                              </li>
                                              <li><strong>IPv6 рж░рзБржЯрж┐ржВ ржЯрзЗржмрж┐рж▓ ржЪрзЗржХ ржХрж░рзБржи:</strong>
                                                  <pre>R1# show ipv6 route bgp</pre>
                                              </li>
                                          </ol>
                                      
                                          <h2>ржЖржЙржЯржкрзБржЯ ржЙржжрж╛рж╣рж░ржг:</h2>
                                          <h3>R1 ржПрж░ BGP ржЯрзЗржмрж┐рж▓:</h3>
                                          <pre>
                                      R1# show bgp ipv6 unicast
                                      BGP table version is 5, local router ID is 192.168.1.1
                                      Status codes: s suppressed, d damped, h history, * valid, > best, i - internal
                                      Origin codes: i - IGP, e - EGP, ? - incomplete
                                      
                                           Network          Next Hop            Metric LocPrf Weight Path
                                       *>  2001:DB8::1/128  ::                       0         32768 ?
                                       *>  2001:DB8::2/128  2001:DB8:0:12::2         0             0 65200 i
                                       *>  2001:DB8::3/128  2001:DB8:0:12::2         0             0 65200 65300 i
                                       *>  2001:DB8:0:12::/64 ::                      0         32768 ?
                                       *>  2001:DB8:0:23::/64 2001:DB8:0:12::2        0             0 65200 65300 i
                                          </pre>

                                              <h1>IPv6 рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржи</h1>
                                              <p>
                                                  IPv4 рж░рзБржЯржЧрзБрж▓рж┐рж░ ржорждрзЛ ржПржХржЗ ржкрзНрж░ржХрзНрж░рж┐ржпрж╝рж╛ржпрж╝ IPv6 рж░рзБржЯржЧрзБрж▓рж┐ржХрзЗ рж╕рж╛ржорж╛рж░рж╛ржЗржЬ ржмрж╛ ржЕрзНржпрж╛ржЧрзНрж░рж┐ржЧрзЗржЯ ржХрж░рж╛ рж╣ржпрж╝, ржПржмржВ ржлрж░ржорзНржпрж╛ржЯржЯрж┐ ржЕржнрж┐ржирзНржи, рждржмрзЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржиржЯрж┐ IPv6 ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐рж░ ржЕржзрзАржирзЗ рж╕рзНржерж╛ржкржи ржХрж░рж╛ рж╣ржпрж╝ред ржПржЬржирзНржп <code>aggregate-address prefix/prefix-length [summary-only] [as-set]</code> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред
                                              </p>
                                          
                                              <h2>ржЙржжрж╛рж╣рж░ржг 11-34: R2-ржП IPv6 BGP ржЕрзНржпрж╛ржЧрзНрж░рж┐ржЧрзЗрж╢ржи ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h2>
                                              <pre>
                                          router bgp 65200
                                           bgp router-id 192.168.2.2
                                           bgp log-neighbor-changes
                                           neighbor 2001:DB8:0:12::1 remote-as 65100
                                           neighbor 2001:DB8:0:23::3 remote-as 65300
                                           !
                                           address-family ipv4
                                            no neighbor 2001:DB8:0:12::1 activate
                                            no neighbor 2001:DB8:0:23::3 activate
                                           exit-address-family
                                           !
                                           address-family ipv6
                                            bgp scan-time 6
                                            network 2001:DB8::2/128
                                            network 2001:DB8:0:12::/64
                                            aggregate-address 2001:DB8::/59 summary-only
                                            neighbor 2001:DB8:0:12::1 activate
                                            neighbor 2001:DB8:0:23::3 activate
                                           exit-address-family
                                              </pre>
                                          
                                              <h2>ржЙржжрж╛рж╣рж░ржг 11-35: IPv6 рж░рзБржЯ ржЕрзНржпрж╛ржЧрзНрж░рж┐ржЧрзЗрж╢ржи ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛</h2>
                                              <pre>
                                          R3# show bgp ipv6 unicast | b Network
                                          Network          Next Hop          Metric LocPrf Weight Path
                                          *>  2001:DB8::/59  2001:DB8:0:23::2       0             0 65200 i
                                          *>  2001:DB8::3/128 ::                     0         32768 i
                                          *>  2001:DB8:0:3::/64 ::                   0         32768 i
                                          *>  2001:DB8:0:23::/64 ::                  0         32768 i
                                          
                                          R1# show bgp ipv6 unicast | b Network
                                          Network          Next Hop          Metric LocPrf Weight Path
                                          *>  2001:DB8::/59  2001:DB8:0:12::2       0             0 65200 i
                                          *>  2001:DB8::1/128 ::                     0         32768 ?
                                          *>  2001:DB8:0:1::/64 ::                   0         32768 ?
                                          *>  2001:DB8:0:12::/64 ::                  0         32768 ?
                                          *>  2001:DB8:0:23::/64 2001:DB8:0:12::2    0 65200 65300 i
                                              </pre>
                                          
                                              <h2>IPv6 рж▓рзБржкржмрзНржпрж╛ржХ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржи</h2>
                                              <p>
                                                  IPv6 рж▓рзБржкржмрзНржпрж╛ржХ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ржЧрзБрж▓рж┐ (<code>2001:db8:0:1/128</code>, <code>2001:db8:0:2/128</code>, ржПржмржВ <code>2001:db8:0:3/128</code>) рж╕рж╛ржорж╛рж░рж╛ржЗржЬ ржХрж░рж╛ ржмрзЗрж╢ рж╕рж╣ржЬ, ржХрж╛рж░ржг ржПржЧрзБрж▓рж┐ рж╕ржмржЗ ржмрзЗрж╕ IPv6 рж╕рж╛ржорж╛рж░рж┐ рж░рзЗржЮрзНржЬ <code>2001:db8:0:0::/64</code>-ржП ржкржбрж╝рзЗред ржЪрждрзБрж░рзНрже рж╣рзЗржХрзНрж╕ржЯрзЗржЯржЯрж┐ ржжрж╢ржорж┐ржХ ржорж╛ржи 1, 2, ржмрж╛ 3 ржжрж┐ржпрж╝рзЗ рж╢рзБрж░рзБ рж╣ржпрж╝, ржпрж╛ ржорж╛рждрзНрж░ 2 ржмрж┐ржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ; ржПржЗ рж░рзЗржЮрзНржЬржЯрж┐ рж╕рж╣ржЬрзЗржЗ <code>2001:db8:0:0::/62</code> (ржмрж╛ <code>2001:db8::/62</code>) ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж░рзЗржЮрзНржЬрзЗ рж╕рж╛ржорж╛рж░рж╛ржЗржЬ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред
                                              </p>
                                          
                                              <h2>R1 ржПржмржВ R2 ржПрж░ ржоржзрзНржпрзЗ ржкрж┐ржпрж╝рж╛рж░рж┐ржВ рж▓рж┐ржЩрзНржХ рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржи</h2>
                                              <p>
                                                  R1 ржПржмржВ R2 ржПрж░ ржоржзрзНржпрзЗ ржкрж┐ржпрж╝рж╛рж░рж┐ржВ рж▓рж┐ржЩрзНржХ (<code>2001:db8:0:12::/64</code>) рж╕рж╛ржорж╛рж░рж╛ржЗржЬ ржХрж░рж╛рж░ ржЬржирзНржп ржкрзНрж░ржержорзЗ рж╣рзЗржХрзНрж╕рзЗ ржЪрж┐ржирзНрждрж╛ ржХрж░рждрзЗ рж╣ржмрзЗ, ржжрж╢ржорж┐ржХ ржорж╛ржи ржиржпрж╝ред ржЪрждрзБрж░рзНрже рж╣рзЗржХрзНрж╕ржЯрзЗржЯржЯрж┐ ржжрж╢ржорж┐ржХ ржорж╛ржи 18 ржмрж╣ржи ржХрж░рзЗ (12 ржиржпрж╝), ржпрж╛рж░ ржЬржирзНржп ржирзНржпрзВржирждржо 5 ржмрж┐ржЯ ржкрзНрж░ржпрж╝рзЛржЬржиред ржирж┐ржЪрзЗрж░ рж╕рж╛рж░ржгрзАрждрзЗ рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржирзЗрж░ ржЬржирзНржп ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржмрж┐ржЯ, IPv6 рж╕рж╛ржорж╛рж░рж┐ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржПржмржВ рж╕рж╛ржорж╛рж░рж┐ рж░рзЗржЮрзНржЬрзЗрж░ ржХржорзНржкрзЛржирзЗржирзНржЯ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐ рждрж╛рж▓рж┐ржХрж╛ржнрзБржХрзНржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред
                                              </p>
                                          
                                              <h3>рж╕рж╛рж░ржгрзА 11-5: IPv6 рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржи ржЯрзЗржмрж┐рж▓</h3>
                                              <table>
                                                  <thead>
                                                      <tr>
                                                          <th>ржмрж┐ржЯ ржкрзНрж░ржпрж╝рзЛржЬржи</th>
                                                          <th>рж╕рж╛ржорж╛рж░рж┐ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕</th>
                                                          <th>ржХржорзНржкрзЛржирзЗржирзНржЯ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЧрзБрж▓рж┐</th>
                                                      </tr>
                                                  </thead>
                                                  <tbody>
                                                      <tr>
                                                          <td>2</td>
                                                          <td><code>2001:db8:0:0::/62</code></td>
                                                          <td><code>2001:db8:0:0::/64</code> ржерзЗржХрзЗ <code>2001:db8:0:3::/64</code></td>
                                                      </tr>
                                                      <tr>
                                                          <td>3</td>
                                                          <td><code>2001:db8:0:0::/61</code></td>
                                                          <td><code>2001:db8:0:0::/64</code> ржерзЗржХрзЗ <code>2001:db8:0:7::/64</code></td>
                                                      </tr>
                                                      <tr>
                                                          <td>4</td>
                                                          <td><code>2001:db8:0:0::/60</code></td>
                                                          <td><code>2001:db8:0:0::/64</code> ржерзЗржХрзЗ <code>2001:db8:0:F::/64</code></td>
                                                      </tr>
                                                      <tr>
                                                          <td>5</td>
                                                          <td><code>2001:db8:0:0::/59</code></td>
                                                          <td><code>2001:db8:0:0::/64</code> ржерзЗржХрзЗ <code>2001:db8:0:1F::/64</code></td>
                                                      </tr>
                                                      <tr>
                                                          <td>6</td>
                                                          <td><code>2001:db8:0:0::/58</code></td>
                                                          <td><code>2001:db8:0:0::/64</code> ржерзЗржХрзЗ <code>2001:db8:0:3F::/64</code></td>
                                                      </tr>
                                                  </tbody>
                                              </table>
                                          
                                              <h2>R2 ржПржмржВ R3 ржПрж░ ржоржзрзНржпрзЗ ржкрж┐ржпрж╝рж╛рж░рж┐ржВ рж▓рж┐ржЩрзНржХ рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржи</h2>
                                              <p>
                                                  ржмрж░рзНрждржорж╛ржирзЗ R2 ржПржмржВ R3 ржПрж░ ржоржзрзНржпрзЗ ржкрж┐ржпрж╝рж╛рж░рж┐ржВ рж▓рж┐ржЩрзНржХ (<code>2001:db8:0:23::/64</code>) рж╕рж╛ржорж╛рж░рж╛ржЗржЬ ржПржмржВ рж╕рж╛ржкрзНрж░рзЗрж╕ ржХрж░рж╛ рж╣ржпрж╝ржирж┐, ржХрж╛рж░ржг ржПржЯрж┐ ржПржЦржиржУ R1-ржПрж░ рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ ржжрзГрж╢рзНржпржорж╛ржи (<strong>ржЙржжрж╛рж╣рж░ржг 11-35</strong>-ржП)ред рж╣рзЗржХрзНрж╕ ржорж╛ржи 23 (ржЕрж░рзНржерж╛рзО 0x23) ржжрж╢ржорж┐ржХ ржорж╛ржи 35-ржП рж░рзВржкрж╛ржирзНрждрж░рж┐ржд рж╣ржпрж╝, ржпрж╛рж░ ржЬржирзНржп 6 ржмрж┐ржЯ ржкрзНрж░ржпрж╝рзЛржЬржиред <code>2001:db8:0:23::/64</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЯрж┐ рж╕рж╛ржорж╛рж░рж╛ржЗржЬ ржХрж░рж╛рж░ ржЬржирзНржп рж╕рж╛ржорж╛рж░рж┐ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж░рзЗржЮрзНржЬржЯрж┐ <code>2001:db8::/58</code>-ржП ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ рж╣ржмрзЗред ржирж┐ржЪрзЗрж░ ржЙржжрж╛рж╣рж░ржгрзЗ R2-ржП ржПржЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржкрж░рж┐ржмрж░рзНрждржи ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред
                                              </p>
                                          
                                              <h3>ржЙржжрж╛рж╣рж░ржг 11-36: 2001:db8:0:23::/64 ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж╕рж╛ржорж╛рж░рж╛ржЗржЬ ржХрж░рж╛рж░ ржЬржирзНржп ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржкрж░рж┐ржмрж░рзНрждржи</h3>
                                              <pre>
                                          R2# configure terminal
                                          Enter configuration commands, one per line.  End with CNTL/Z.
                                          R2(config)# router bgp 65200
                                          R2(config-router)# address-family ipv6 unicast
                                          R2(config-router-af)# no aggregate-address 2001:DB8::/59 summary-only
                                          R2(config-router-af)# aggregate-address 2001:DB8::/58 summary-only
                                              </pre>
                                          
                                              <h3>ржЙржжрж╛рж╣рж░ржг 11-37: 2001:db8:0:23::/64 ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗрж░ рж╕рж╛ржорж╛рж░рж╛ржЗржЬрзЗрж╢ржи ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛</h3>
                                              <pre>
                                          R1# show bgp ipv6 unicast | b Network
                                          Network            Next Hop          Metric LocPrf Weight Path
                                          *>  2001:DB8::/58      2001:DB8:0:12::2       0             0 65200 i
                                          *>  2001:DB8::1/128    ::                     0         32768 ?
                                          *>  2001:DB8:0:1::/64  ::                     0         32768 ?
                                          *>  2001:DB8:0:12::/64 ::                     0         32768 ?
                                              </pre>
                                          
                                              <p>
                                                  ржПржЗ ржЙржжрж╛рж╣рж░ржгрзЗ ржжрзЗржЦрж╛ ржпрж╛ржЪрзНржЫрзЗ ржпрзЗ <code>2001:db8:0:23::/64</code> ржирзЗржЯржУржпрж╝рж╛рж░рзНржХржЯрж┐ ржПржЦржи ржЕрзНржпрж╛ржЧрзНрж░рж┐ржЧрзЗржЯ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ рж╕рзНржкрзЗрж╕рзЗрж░ ржоржзрзНржпрзЗ рж░ржпрж╝рзЗржЫрзЗ ржПржмржВ ржПржЯрж┐ ржЖрж░ R1-ржП ржмрж┐ржЬрзНржЮрж╛ржкрж┐ржд рж╣ржЪрзНржЫрзЗ ржирж╛ред
                                              </p>


                                                  <style>
                                                      body {
                                                          font-family: Arial, sans-serif;
                                                          line-height: 1.6;
                                                          margin: 20px;
                                                      }
                                                      table {
                                                          width: 100%;
                                                          border-collapse: collapse;
                                                          margin: 20px 0;
                                                      }
                                                      table, th, td {
                                                          border: 1px solid #ddd;
                                                      }
                                                      th, td {
                                                          padding: 8px;
                                                          text-align: left;
                                                      }
                                                      th {
                                                          background-color: #f2f2f2;
                                                      }
                                                      code {
                                                          background: #eaeaea;
                                                          padding: 2px 5px;
                                                          border-radius: 3px;
                                                      }
                                                  </style>
                                              </head>
                                              <body>
                                                  <h1>BGP ржХржорж╛ржирзНржб рж░рзЗржлрж╛рж░рзЗржирзНрж╕ (ржЙржжрж╛рж╣рж░ржг рж╕рж╣)</h1>
                                                  <table>
                                                      <thead>
                                                          <tr>
                                                              <th>ржЯрж╛рж╕рзНржХ</th>
                                                              <th>ржХржорж╛ржирзНржб рж╕рж┐ржиржЯрзНржпрж╛ржХрзНрж╕</th>
                                                              <th>ржЙржжрж╛рж╣рж░ржг</th>
                                                          </tr>
                                                      </thead>
                                                      <tbody>
                                                          <tr>
                                                              <td>BGP рж░рж╛ржЙржЯрж╛рж░ ржкрзНрж░рж╕рзЗрж╕ рж╢рзБрж░рзБ ржХрж░рзБржи</td>
                                                              <td><code>router bgp as-number</code></td>
                                                              <td><code>router bgp 65001</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>BGP ржкрж┐ржпрж╝рж╛рж░ рж╕рзЗрж╢ржи рж╕рзНржерж╛ржкржирзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ ржкрж┐ржпрж╝рж╛рж░ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзБржи</td>
                                                              <td><code>neighbor ip-address remote-as as-number</code></td>
                                                              <td><code>neighbor 192.168.1.2 remote-as 65002</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ IPv4 ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржб ржирж┐рж╖рзНржХрзНрж░рж┐ржпрж╝ ржХрж░рзБржи</td>
                                                              <td><code>no bgp default ipv4-unicast</code></td>
                                                              <td><code>no bgp default ipv4-unicast</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржПржмржВ рж╕рж╛ржм-ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ рж╢рзБрж░рзБ ржХрж░рзБржи</td>
                                                              <td><code>address-family afi safi</code></td>
                                                              <td><code>address-family ipv6 unicast</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐рж░ ржЬржирзНржп BGP ржкрж┐ржпрж╝рж╛рж░ рж╕ржХрзНрж░рж┐ржпрж╝ ржХрж░рзБржи</td>
                                                              <td><code>neighbor ip-address activate</code></td>
                                                              <td><code>neighbor 2001:db8::1 activate</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>BGP-ржП ржПржХржЯрж┐ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рзБржи</td>
                                                              <td><code>network network mask subnet-mask [route-map route-map-name]</code></td>
                                                              <td><code>network 192.168.1.0 mask 255.255.255.0</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>ржПржХржЯрж┐ BGP ржЕрзНржпрж╛ржЧрзНрж░рж┐ржЧрзЗржЯ IPv4 ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рзБржи</td>
                                                              <td><code>aggregate-address network subnet-mask [summary-only] [as-set]</code></td>
                                                              <td><code>aggregate-address 192.168.0.0 255.255.0.0 summary-only</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>ржПржХржЯрж┐ BGP ржЕрзНржпрж╛ржЧрзНрж░рж┐ржЧрзЗржЯ IPv6 ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рзБржи</td>
                                                              <td><code>aggregate-address prefix/prefix-length [summary-only] [as-set]</code></td>
                                                              <td><code>aggregate-address 2001:db8::/32 summary-only</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>BGP ржбрзЗржЯрж╛ржмрзЗрж╕рзЗрж░ ржмрж┐рж╖ржпрж╝ржмрж╕рзНрждрзБ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзБржи</td>
                                                              <td><code>show bgp afi safi [network] [detailed]</code></td>
                                                              <td><code>show bgp ipv4 unicast</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>BGP ржЯрзЗржмрж┐рж▓ ржПржмржВ ржкрж┐ржпрж╝рж╛рж░рж┐ржВ рж╕рзЗрж╢ржирзЗрж░ рж╕рж╛рж░рж╛ржВрж╢ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзБржи</td>
                                                              <td><code>show bgp afi safi summary</code></td>
                                                              <td><code>show bgp ipv6 unicast summary</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрж┐ржпрж╝рж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржЖрж▓рзЛржЪрж┐ржд BGP рж╕рзЗржЯрж┐ржВрж╕ ржПржмржВ рж╕рзЗржЗ ржкрж┐ржпрж╝рж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржмрж┐ржирж┐ржоржпрж╝ ржХрж░рж╛ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕рзЗрж░ рж╕ржВржЦрзНржпрж╛ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзБржи</td>
                                                              <td><code>show bgp afi safi neighbors ip-address</code></td>
                                                              <td><code>show bgp ipv4 unicast neighbors 192.168.1.2</code></td>
                                                          </tr>
                                                          <tr>
                                                              <td>ржПржХржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ BGP ржкрж┐ржпрж╝рж╛рж░рзЗрж░ ржЬржирзНржп Adj-RIB-Out BGP ржЯрзЗржмрж┐рж▓ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзБржи</td>
                                                              <td><code>show bgp afi safi neighbor ip-address advertised-routes</code></td>
                                                              <td><code>show bgp ipv6 unicast neighbor 2001:db8::1 advertised-routes</code></td>
                                                          </tr>
                                                      </tbody>
                                                  </table>




                                                      <h1>BGP (Border Gateway Protocol)</h1>
                                                  
                                                      <h2>рзз. рж╕рж╛ржзрж╛рж░ржг ржзрж╛рж░ржгрж╛:</h2>
                                                      <p>
                                                          BGP рж╣рж▓рзЛ ржПржХржЯрж┐ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж░рж╛ржЙржЯрж┐ржВ ржкрзНрж░рзЛржЯрзЛржХрж▓ ржпрж╛ TCP (ржкрзЛрж░рзНржЯ 179)-ржПрж░ ржЙржкрж░ ржЪрж▓рзЗред<br>
                                                          TCP ржХрж╛ржирзЗржХрж╢ржи рждрзИрж░рж┐ рж╣ржУржпрж╝рж╛рж░ ржкрж░рзЗржЗ BGP рж╕рзЗрж╢ржи рж╢рзБрж░рзБ рж╣ржпрж╝ред<br>
                                                          ржЕрж░рзНржерж╛рзО, BGP ржЪрж╛рж▓рж╛ржирзЛрж░ ржЬржирзНржп ржЙржнржпрж╝ рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржкрзМржБржЫрж╛ржирзЛрж░ ржХрзНрж╖ржорждрж╛ (reachability) ржерж╛ржХрждрзЗ рж╣ржмрзЗред
                                                      </p>
                                                  
                                                      <h3>Path Vector Routing Protocol (ржкрж╛рже ржнрзЗржХрзНржЯрж░ рж░рж╛ржЙржЯрж┐ржВ ржкрзНрж░рзЛржЯрзЛржХрж▓):</h3>
                                                      <p>
                                                          ржПржЯрж┐ ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯрзЗрж░ ржнрж┐рждрзНрждрж┐рждрзЗ рж╕рзЗрж░рж╛ ржкрже ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзЗред<br>
                                                          ржПржХржЯрж┐ рж░рзБржЯ ржмрж▓рждрзЗ ржмрзЛржЭрж╛ржпрж╝:<br>
                                                          - ржЧржирзНрждржмрзНржп (destination) ржПржмржВ<br>
                                                          - рж╕рзЗржЗ ржЧржирзНрждржмрзНржпрзЗ ржкрзМржБржЫрж╛ржирзЛрж░ ржкржерзЗрж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп (attributes)ред<br>
                                                          Incremental BGP updates (ржХрзНрж░ржоржмрж░рзНржзржорж╛ржи ржЖржкржбрзЗржЯ): рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрж░рж┐ржмрж░рзНрждрж┐ржд рж░рзБржЯржЧрзБрж▓рзЛрж░ ржЖржкржбрзЗржЯ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝ред
                                                      </p>
                                                  
                                                      <h2>рзи. ржкрж╛рже ржнрзЗржХрзНржЯрж░ рж░рж╛ржЙржЯрж┐ржВ ржкрзНрж░рзЛржЯрзЛржХрж▓</h2>
                                                      <p>
                                                          ржПржЯрж┐ ржмрж┐ржнрж┐ржирзНржи Autonomous System (AS)-ржПрж░ ржоржзрзНржпрзЗ рж░рж╛ржЙржЯ рждрзИрж░рж┐ ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред<br>
                                                          рж░рзБржЯрзЗ ржЙрж▓рзНрж▓рзЗржЦ ржерж╛ржХрзЗ ржХрзЛржи ржХрзЛржи AS-ржПрж░ ржоржзрзНржп ржжрж┐ржпрж╝рзЗ ржЧржирзНрждржмрзНржпрзЗ ржкрзМржБржЫрж╛ржирзЛ ржпрж╛ржмрзЗред ржПржЗ рждрж╛рж▓рж┐ржХрж╛ржХрзЗ ржмрж▓рзЗ AS Pathред<br>
                                                          AS Path:<br>
                                                          - рж▓рзБржк ржПржбрж╝рж╛рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред<br>
                                                          - ржЧржирзНрждржмрзНржпрзЗ ржкрзМржБржЫрж╛ржирзЛрж░ рж╕рзЗрж░рж╛ ржкрже ржирж┐рж░рзНржмрж╛ржЪржирзЗржУ ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред<br>
                                                          ржЙржжрж╛рж╣рж░ржг:
                                                      </p>
                                                      <pre>
                                                  192.168.1.0/24 10.2.4.67 121 0 6461 7018 6337 11268 i
                                                  ржПржЦрж╛ржирзЗ "AS Path" = 6461 7018 6337 11268
                                                      </pre>
                                                  
                                                      <h2>рзй. Internal & External BGP</h2>
                                                      <h3>eBGP (External BGP):</h3>
                                                      <p>
                                                          ржмрж┐ржнрж┐ржирзНржи AS-ржПрж░ ржоржзрзНржпрзЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ/рж░рзБржЯ ржмрж┐ржирж┐ржоржпрж╝ред<br>
                                                          Routing Policy ржмрж╛рж╕рзНрждржмрж╛ржпрж╝ржирзЗрж░ ржЬржирзНржп (ржпрзЗржоржи: ржЗржиржмрж╛ржЙржирзНржб/ржЖржЙржЯржмрж╛ржЙржирзНржб ржЯрзНрж░рж╛ржлрж┐ржХ ржХржирзНржЯрзНрж░рзЛрж▓)ред
                                                      </p>
                                                      <h3>iBGP (Internal BGP):</h3>
                                                      <p>
                                                          ржПржХржЗ AS-ржПрж░ ржнрзЗрждрж░ рж░рзБржЯ ржПржмржВ ржХрж╛рж╕рзНржЯржорж╛рж░ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржмрж╣ржи ржХрж░рзЗред<br>
                                                          ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж░рзБржЯ (рж╕ржорзНржкрзВрж░рзНржг ржмрж╛ ржЖржВрж╢рж┐ржХ) AS-ржПрж░ ржнрзЗрждрж░ ржнрж╛ржЧ ржХрж░рж╛ рж╣ржпрж╝ред
                                                      </p>
                                                  
                                                      <h2>рзк. BGP ржорзНржпрж╛рж╕рзЗржЬ ржЯрж╛ржЗржк</h2>
                                                      <ol>
                                                          <li><strong>Open:</strong><br>
                                                              TCP ржХрж╛ржирзЗржХрж╢ржи рж╕рзНржерж╛ржкржирзЗрж░ ржкрж░рзЗ ржкрзНрж░рзЗрж░рж┐ржд рж╣ржпрж╝ред<br>
                                                              ржУржкрзЗржи ржорзНржпрж╛рж╕рзЗржЬ ржирж┐рж╢рзНржЪрж┐ржд рж╣рж▓рзЗ (Keepalive-ржПрж░ ржорж╛ржзрзНржпржорзЗ), BGP session рждрзИрж░рж┐ рж╣ржпрж╝ред<br>
                                                              ржПрждрзЗ ржерж╛ржХрзЗ:<br>
                                                              - ржкрзНрж░рзЗрж░ржХрзЗрж░ ASN (AS ржиржорзНржмрж░)<br>
                                                              - BGP ржнрж╛рж░рзНрж╕ржи<br>
                                                              - рж░рж╛ржЙржЯрж╛рж░ ID<br>
                                                              - Hold-time (рзйx keepalive interval)<br>
                                                              - ржРржЪрзНржЫрж┐ржХржнрж╛ржмрзЗ: authentication info
                                                          </li>
                                                          <li><strong>Keepalive:</strong><br>
                                                              ржУржкрзЗржи ржорзНржпрж╛рж╕рзЗржЬ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛рж░ ржЬржирзНржп ржПржмржВ рж╕рзЗрж╢ржи рж╕ржХрзНрж░рж┐ржпрж╝ рж░рж╛ржЦрждрзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝ред (рзмрзж рж╕рзЗржХрзЗржирзНржб ржЕржирзНрждрж░)
                                                          </li>
                                                          <li><strong>Update:</strong><br>
                                                              ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж╕ржВржХрзНрж░рж╛ржирзНржд рждржерзНржп ржмрж┐ржирж┐ржоржпрж╝рзЗрж░ ржЬржирзНржпред<br>
                                                              ржПржХржЯрж┐ ржЖржкржбрзЗржЯ ржПржХрзЗржХржЯрж┐ ржкрж╛ржерзЗрж░ ржЬржирзНржпред<br>
                                                              ржПрждрзЗ ржерж╛ржХрзЗ:<br>
                                                              - Withdrawn routes: ржЖрж░ ржкрж╛ржУрзЯрж╛ ржпрж╛ржмрзЗ ржирж╛ ржПржоржи рж░рзБржЯ<br>
                                                              - Path attributes: рж░рзБржЯрзЗрж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп<br>
                                                              - NLRI (Network Layer Reachability Information): ржХрзЛржи ржХрзЛржи ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ ржкрзМржБржЫрж╛ржирзЛ ржпрж╛ржмрзЗ
                                                          </li>
                                                          <li><strong>Notification:</strong><br>
                                                              ржХрзЛржирзЛ рждрзНрж░рзБржЯрж┐ ржзрж░рж╛ ржкрзЬрж▓рзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝ред<br>
                                                              рж╕рзЗрж╢ржи рж╕рж╛ржерзЗ рж╕рж╛ржерзЗ ржмржирзНржз ржХрж░рж╛ рж╣ржпрж╝ред<br>
                                                              рждрзНрж░рзБржЯрж┐рж░ ржмрж┐ржмрж░ржг ржерж╛ржХрзЗред
                                                          </li>
                                                      </ol>
                                                  
                                                      <h2>рзл. BGP Neighbor (ржкрж┐рзЯрж╛рж░) States</h2>
                                                      <p>
                                                          BGP ржирзЛржб рзмржЯрж┐ ржзрж╛ржк ржЕрждрж┐ржХрзНрж░ржо ржХрж░рзЗ:
                                                      </p>
                                                      <ol>
                                                          <li><strong>Idle</strong> тАУ ржкрзНрж░рждрж┐ржмрзЗрж╢рзА ржЦрзЛржБржЬрзЗред</li>
                                                          <li><strong>Connect</strong> тАУ TCP handshake рж╢рзБрж░рзБред</li>
                                                          <li><strong>Active</strong> тАУ TCP ржмрзНржпрж░рзНрже рж╣рж▓рзЗ ржкрзБржирж░рж╛ржпрж╝ ржЪрзЗрж╖рзНржЯрж╛ред</li>
                                                          <li><strong>OpenSent</strong> тАУ ржУржкрзЗржи ржорзНржпрж╛рж╕рзЗржЬ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред</li>
                                                          <li><strong>OpenConfirm</strong> тАУ Keepalive ржПрж░ ржЬржирзНржп ржЕржкрзЗржХрзНрж╖рж╛ред</li>
                                                          <li><strong>Established</strong> тАУ рж╕рзЗрж╢ржи рж╕ржлрж▓, рж░рж╛ржЙржЯрж┐ржВ рждржерзНржп ржмрж┐ржирж┐ржоржпрж╝ рж╢рзБрж░рзБред</li>
                                                      </ol>
                                                  
                                                      <h2>рзм. BGP Neighbor рж╕ржорзНржкрж░рзНржХ (ржкрж┐рзЯрж╛рж░рж┐ржВ)</h2>
                                                      <h3>eBGP ржкрж┐рзЯрж╛рж░рж┐ржВ:</h3>
                                                      <p>
                                                          ржнрж┐ржирзНржи AS-ржПрж░ ржоржзрзНржпрзЗред<br>
                                                          рж╕рж╛ржзрж╛рж░ржгржд рж╕рж░рж╛рж╕рж░рж┐ рж╕ржВржпрзБржХрзНрждред<br>
                                                          IP ржарж┐ржХрж╛ржирж╛ TCP рж╕рзЗрж╢ржирзЗрж░ ржарж┐ржХрж╛ржирж╛рж░ рж╕рж╛ржерзЗ ржорж┐рж▓рзЗ ржерж╛ржХрждрзЗ рж╣ржмрзЗред<br>
                                                          ржЙржжрж╛рж╣рж░ржг:
                                                      </p>
                                                      <pre>
                                                  router bgp 17821
                                                  neighbor 172.16.12.2 remote-as 65000
                                                  !
                                                  address-family ipv4
                                                  neighbor 172.16.12.2 activate
                                                      </pre>
                                                  
                                                      <h3>iBGP ржкрж┐рзЯрж╛рж░рж┐ржВ:</h3>
                                                      <p>
                                                          ржПржХржЗ AS-ржПрж░ ржоржзрзНржпрзЗред<br>
                                                          рж╕рж░рж╛рж╕рж░рж┐ рж╕ржВржпрзБржХрзНржд рж╣рждрзЗ рж╣ржпрж╝ ржирж╛ (IGP ржжрж┐рзЯрзЗ ржкрзМржБржЫрж╛ржирзЛ ржпрж╛рзЯ)ред<br>
                                                          рж╕рж╛ржзрж╛рж░ржгржд loopback address ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯред<br>
                                                          ржЙржжрж╛рж╣рж░ржг:
                                                      </p>
                                                      <pre>
                                                  router bgp 17821
                                                  neighbor 10.10.10.2 remote-as 17821
                                                      </pre>
                                                  
                                                      <h2>рзн. iBGP ржПрж░ ржХрж╛ржЬ</h2>
                                                      <p>
                                                          ржирж┐ржЬрж╕рзНржм ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж░рзБржЯ ржкрзНрж░ржХрж╛рж╢ ржХрж░рж╛ред<br>
                                                          ржмрж╛ржЗрж░рзЗрж░ AS ржерзЗржХрзЗ ржЖрж╕рж╛ рж░рзБржЯржЧрзБрж▓рж┐ AS ржПрж░ ржнрзЗрждрж░ ржЫржбрж╝рж┐ржпрж╝рзЗ ржжрзЗржпрж╝рж╛ред<br>
                                                          iBGP рж░рж╛ржЙржЯрж╛рж░ iBGP ржерзЗржХрзЗ рж╢рзЗржЦрж╛ рж░рзБржЯ ржЕржирзНржп iBGP ржкрж┐ржпрж╝рж╛рж░ржХрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗ ржирж╛ (рж▓рзБржк ржПржбрж╝рж╛рждрзЗ)ред<br>
                                                          ржлрж▓рзЗ full-mesh iBGP рж▓рж╛ржЧрзЗред<br>
                                                          ржЙржжрж╛рж╣рж░ржг (full-mesh):
                                                      </p>
                                                      <pre>
                                                  router bgp 17821
                                                  neighbor 10.10.10.2 remote-as 17821
                                                  neighbor 10.10.10.3 remote-as 17821
                                                  neighbor 10.10.10.4 remote-as 17821
                                                      </pre>
                                                  
                                                      <h2>рзо. Loopback ржерзЗржХрзЗ iBGP ржЪрж╛рж▓рж╛ржирзЛ</h2>
                                                      <p>
                                                          ржЖржкржбрзЗржЯрзЗрж░ рж╕рзЛрж░рзНрж╕ ржарж┐ржХрж╛ржирж╛ ржарж┐ржХ рж░рж╛ржЦрждрзЗ <code>update-source loopback</code> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред<br>
                                                          ржЙржжрж╛рж╣рж░ржг:
                                                      </p>
                                                      <pre>
                                                  router bgp 17821
                                                  neighbor 10.10.10.1 remote-as 17821
                                                  neighbor 10.10.10.1 update-source loopback 0
                                                      </pre>
                                                  
                                                      <h2>рзп. BGP Synchronous Rule</h2>
                                                      <p>
                                                          iBGP рж╢рзЗржЦрж╛ рж░рзБржЯ рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ ржпрзЛржЧ рж╣ржмрзЗ ржирж╛ ржмрж╛ eBGP рждрзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗ ржирж╛ ржпржжрж┐ ржирж╛ IGP ржПрж░ ржорж╛ржзрзНржпржорзЗ рж╢рзЗржЦрж╛ ржпрж╛ржпрж╝ред<br>
                                                          ржХрж┐ржирзНрждрзБ ржпржжрж┐ AS ржПрж░ ржоржзрзНржпрзЗ рж╕ржорзНржкрзВрж░рзНржг full-mesh iBGP ржерж╛ржХрзЗ, рждржЦржи ржПржЯрж┐ ржмржирзНржз ржХрж░рж╛ ржирж┐рж░рж╛ржкржжред
                                                      </p>
                                                  
                                                      <h2>рззрзж. BGP-рждрзЗ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржШрзЛрж╖ржгрж╛ (Advertise Networks)</h2>
                                                      <ol>
                                                          <li><strong>network ржХржорж╛ржирзНржб ржжрж┐рзЯрзЗ:</strong><br>
                                                              ржпржжрж┐ рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ ржерж╛ржХрзЗ, рждржЦржиржЗ BGP рждрзЗ ржкрж╛ржарж╛ржмрзЗред<br>
                                                              <pre>
                                                  router bgp 17821
                                                  address-family ipv4 unicast
                                                  network &lt;prefix&gt; mask &lt;subnet-mask&gt;
                                                              </pre>
                                                          </li>
                                                          <li><strong>redistribute ржХрж░рзЗ:</strong><br>
                                                              static ржмрж╛ connected route ржерзЗржХрзЗред<br>
                                                              ржЙржжрж╛рж╣рж░ржг ржЯржкрзЛрж▓ржЬрж┐:
                                                              <pre>
                                                  AS 17821
                                                  AS 17660
                                                  AS 15169
                                                              </pre>
                                                          </li>
                                                      </ol>

                                                          <h1>Network Topology</h1>
                                                          <pre>
                                                                        [R1]          [R2]          [R3]
                                                                          \            |            /
                                                                           \           |           /
                                                                            \          |          /
                                                                             \         |         /
                                                                              [TR1]---[TR2]---[TR3]
                                                                             /   \    /   \    /   \
                                                                            /     \  /     \  /     \
                                                                         [R4]   [R5]     [R6]     [R7]
                                                          </pre>
                                                          <p>R1, R2, R3 = Provider Routers</p>
                                                          <p>R4, R6 = Border Routers</p>
                                                          <p>R5, R7 = Access Routers</p>
                                                          <p>TR1, TR2, TR3 = Transit Routers</p>
                                                      
                                                          <h1>Router Configurations</h1>
                                                          <h2>R1 (Provider Router)</h2>
                                                          <pre>
                                                      conf t
                                                      hostname R1
                                                      no ip domain-lookup
                                                      
                                                      interface Loopback0
                                                       ip address 1.1.1.1 255.255.255.255
                                                      
                                                      interface e0/0
                                                       ip address 10.10.10.2 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/1
                                                       ip address 20.20.20.2 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/2
                                                       ip address 30.30.30.2 255.255.255.0
                                                       no shutdown
                                                      
                                                      end
                                                      wr
                                                          </pre>
                                                      
                                                          <h2>R2 (Provider Router)</h2>
                                                          <pre>
                                                      conf t
                                                      hostname R2
                                                      no ip domain-lookup
                                                      
                                                      interface Loopback0
                                                       ip address 2.2.2.2 255.255.255.255
                                                      
                                                      interface e0/0
                                                       ip address 10.10.10.3 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/1
                                                       ip address 20.20.20.3 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/2
                                                       ip address 30.30.30.3 255.255.255.0
                                                       no shutdown
                                                      
                                                      end
                                                      wr
                                                          </pre>
                                                      
                                                          <h2>R3 (Provider Router)</h2>
                                                          <pre>
                                                      conf t
                                                      hostname R3
                                                      no ip domain-lookup
                                                      
                                                      interface Loopback0
                                                       ip address 3.3.3.3 255.255.255.255
                                                      
                                                      interface e0/0
                                                       ip address 10.10.10.4 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/1
                                                       ip address 20.20.20.4 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/2
                                                       ip address 30.30.30.4 255.255.255.0
                                                       no shutdown
                                                      
                                                      end
                                                      wr
                                                          </pre>
                                                      
                                                          <h2>R4 (Border Router)</h2>
                                                          <pre>
                                                      conf t
                                                      hostname R4
                                                      no ip domain-lookup
                                                      
                                                      interface Loopback0
                                                       ip address 4.4.4.4 255.255.255.255
                                                      
                                                      interface e0/0
                                                       ip address 10.10.10.5 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/1
                                                       ip address 20.20.20.5 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/2
                                                       ip address 30.30.30.5 255.255.255.0
                                                       no shutdown
                                                      
                                                      end
                                                      wr
                                                          </pre>
                                                      
                                                          <h2>R5 (Access Router)</h2>
                                                          <pre>
                                                      conf t
                                                      hostname R5
                                                      no ip domain-lookup
                                                      
                                                      interface Loopback0
                                                       ip address 5.5.5.5 255.255.255.255
                                                      
                                                      interface e0/0
                                                       ip address 10.10.10.6 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/1
                                                       ip address 20.20.20.6 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/2
                                                       ip address 30.30.30.6 255.255.255.0
                                                       no shutdown
                                                      
                                                      end
                                                      wr
                                                          </pre>
                                                      
                                                          <h2>R6 (Border Router)</h2>
                                                          <pre>
                                                      conf t
                                                      hostname R6
                                                      no ip domain-lookup
                                                      
                                                      interface Loopback0
                                                       ip address 6.6.6.6 255.255.255.255
                                                      
                                                      interface e0/0
                                                       ip address 10.10.10.7 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/1
                                                       ip address 20.20.20.7 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/2
                                                       ip address 30.30.30.7 255.255.255.0
                                                       no shutdown
                                                      
                                                      end
                                                      wr
                                                          </pre>
                                                      
                                                          <h2>R7 (Access Router)</h2>
                                                          <pre>
                                                      conf t
                                                      hostname R7
                                                      no ip domain-lookup
                                                      
                                                      interface Loopback0
                                                       ip address 7.7.7.7 255.255.255.255
                                                      
                                                      interface e0/0
                                                       ip address 10.10.10.8 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/1
                                                       ip address 20.20.20.8 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/2
                                                       ip address 30.30.30.8 255.255.255.0
                                                       no shutdown
                                                      
                                                      end
                                                      wr
                                                          </pre>
                                                      
                                                          <h2>TR1 (Transit Router)</h2>
                                                          <pre>
                                                      conf t
                                                      hostname TR1
                                                      no ip domain-lookup
                                                      
                                                      interface e0/0
                                                       ip address 10.10.10.1 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/1
                                                       ip address 20.20.20.1 255.255.255.0
                                                       no shutdown
                                                      
                                                      interface e0/2
                                                       ip address 30.30.30.1 255.255.255.0
                                                       no shutdown
                                                      
                                                      end
                                                      wr
                                                          </pre>
                                                      
                                                          <h1>OSPF Configuration</h1>
                                                          <h2>R1 (OSPF Example)</h2>
                                                          <pre>
                                                      conf t
                                                      router ospf 1
                                                      router-id 1.1.1.1
                                                      network 10.10.10.0 0.0.0.255 area 0
                                                      network 20.20.20.0 0.0.0.255 area 0
                                                      network 30.30.30.0 0.0.0.255 area 0
                                                      network 1.1.1.1 0.0.0.0 area 0
                                                      end
                                                      wr
                                                          </pre>
                                                      
                                                          <h2>R2 (OSPF Example)</h2>
                                                          <pre>
                                                      conf t
                                                      router ospf 1
                                                      router-id 2.2.2.2
                                                      network 10.10.10.0 0.0.0.255 area 0
                                                      network 20.20.20.0 0.0.0.255 area 0
                                                      network 30.30.30.0 0.0.0.255 area 0
                                                      network 2.2.2.2 0.0.0.0 area 0
                                                      end
                                                      wr
                                                          </pre>
                                                      
                                                          <p>ржПржЗржнрж╛ржмрзЗ R3 ржерзЗржХрзЗ R7 ржкрж░рзНржпржирзНржд ржПржмржВ TR1, TR2, TR3 рж╕ржм ржЬрж╛рзЯржЧрж╛рзЯ OSPF configure рж╣ржмрзЗред рж╢рзБржзрзБ Router ID ржПржмржВ Loopback/Networks ржЕржирзБржпрж╛рзЯрзА IP ржЧрзБрж▓рзЛ adjust ржХрж░ржмрзЗред</p>

                                                              <h1>eBGP Setup among ISPs and Customers</h1>
                                                              <p>
                                                                  The configuration establishes eBGP (External BGP) relationships between Customers (CUST12, CUST34) and ISPs (AR1, AR2, AR3, AR4). There are two separate customers:
                                                              </p>
                                                              <ul>
                                                                  <li><strong>CUST12</strong>: Connected to AR1 (AS 10) and AR2 (AS 20).</li>
                                                                  <li><strong>CUST34</strong>: Connected to AR3 (AS 30) and AR4 (AS 40).</li>
                                                              </ul>
                                                          
                                                              <h2>IP Block Announcement</h2>
                                                              <p>
                                                                  The <code>network</code> command is used to announce the customer's IP blocks via BGP. For example:
                                                              </p>
                                                              <pre>
                                                                  network 192.168.12.0 mask 255.255.255.0
                                                                  network 192.168.13.0 mask 255.255.255.0
                                                                  network 192.168.12.0 mask 255.255.254.0
                                                              </pre>
                                                              <p>
                                                                  This allows CUST12 to announce its IP blocks to the ISP routers (AR1, AR2). Similarly, CUST34 announces its IP blocks:
                                                              </p>
                                                              <pre>
                                                                  network 192.168.34.0 mask 255.255.255.0
                                                                  network 192.168.35.0 mask 255.255.255.0
                                                                  network 192.168.34.0 mask 255.255.254.0
                                                              </pre>
                                                          
                                                              <h2>IP Prefix-List for Filtering</h2>
                                                              <p>
                                                                  The prefix-list is used to control which IP blocks are announced. For example, in CUST12:
                                                              </p>
                                                              <pre>
                                                                  ip prefix-list PL-OWN-1 seq 5 permit 192.168.12.0/24
                                                                  ip prefix-list PL-OWN-1 seq 10 permit 192.168.12.0/23
                                                              </pre>
                                                              <p>
                                                                  This ensures that only the specified IP blocks (192.168.12.0/24 and 192.168.12.0/23) are announced. Similarly:
                                                              </p>
                                                              <pre>
                                                                  ip prefix-list PL-OWN-2 seq 5 permit 192.168.13.0/24
                                                                  ip prefix-list PL-OWN-2 seq 10 permit 192.168.12.0/23
                                                              </pre>
                                                          
                                                              <h2>Route-Map for Filtering</h2>
                                                              <p>
                                                                  Route-maps are used to apply the prefix-list filters to specific neighbors. For example, in CUST12:
                                                              </p>
                                                              <pre>
                                                                  route-map RM-AR1-OUT permit 10
                                                                  match ip address prefix-list PL-OWN-1
                                                              </pre>
                                                              <p>
                                                                  This ensures that only the IP blocks defined in <code>PL-OWN-1</code> are announced to AR1. Similarly:
                                                              </p>
                                                              <pre>
                                                                  route-map RM-AR2-OUT permit 10
                                                                  match ip address prefix-list PL-OWN-2
                                                              </pre>
                                                          
                                                              <h2>Attaching Route-Map to Neighbors</h2>
                                                              <p>
                                                                  The route-map is attached to the neighbor configuration to enforce the filtering. For example:
                                                              </p>
                                                              <pre>
                                                                  neighbor 10.10.2.1 route-map RM-AR1-OUT out
                                                                  neighbor 10.20.2.1 route-map RM-AR2-OUT out
                                                              </pre>
                                                              <p>
                                                                  This ensures that only the specified IP blocks are sent to the respective neighbors (AR1 and AR2).
                                                              </p>
                                                          
                                                              <h2>Key Points</h2>
                                                              <ul>
                                                                  <li><strong>Announce IP Blocks:</strong> Customers announce their IP blocks to ISPs.</li>
                                                                  <li><strong>Filter Announcements:</strong> Prefix-lists and route-maps ensure only specific IP blocks are announced.</li>
                                                                  <li><strong>Remove Private AS:</strong> Private AS numbers are removed during announcements.</li>
                                                                  <li><strong>Granular Control:</strong> Route-maps and prefix-lists provide precise control over routing announcements.</li>
                                                              </ul>

                                                              <h1>eBGP Configuration among ISPs and Customers</h1>
                                                              <h2>Task: Announce Corresponding IP Blocks + Inbound Filter (Prefix-list)</h2>
                                                          
                                                              <h3>CUST12 Configuration</h3>
                                                              <pre>
                                                                  conf t
                                                                  router bgp 12
                                                                  distance bgp 200 200 200
                                                                  no bgp default ipv4-unicast
                                                                  neighbor 10.10.2.1 remote-as 10
                                                                  neighbor 10.10.2.1 description AR1
                                                                  neighbor 10.20.2.1 remote-as 20
                                                                  neighbor 10.20.2.1 description AR2
                                                                  address-family ipv4 unicast
                                                                      neighbor 10.10.2.1 activate
                                                                      neighbor 10.10.2.1 remove-private-as
                                                                      neighbor 10.10.2.1 route-map RM-AR1-OUT out
                                                                      neighbor 10.20.2.1 activate
                                                                      neighbor 10.20.2.1 remove-private-as
                                                                      neighbor 10.20.2.1 route-map RM-AR2-OUT out
                                                                      network 192.168.12.0 mask 255.255.255.0
                                                                      network 192.168.13.0 mask 255.255.255.0
                                                                      network 192.168.12.0 mask 255.255.254.0
                                                                  exit
                                                                  exit
                                                                  !
                                                                  interface loopback 1
                                                                      ip address 192.168.12.1 255.255.255.0
                                                                  exit
                                                                  !
                                                                  interface loopback 2
                                                                      ip address 192.168.13.1 255.255.255.0
                                                                  exit
                                                                  !
                                                                  ip route 192.168.12.0 255.255.254.0 null0
                                                                  !
                                                                  ip prefix-list PL-OWN-1 seq 5 permit 192.168.12.0/24
                                                                  ip prefix-list PL-OWN-1 seq 10 permit 192.168.12.0/23
                                                                  ip prefix-list PL-OWN-2 seq 5 permit 192.168.13.0/24
                                                                  ip prefix-list PL-OWN-2 seq 10 permit 192.168.12.0/23
                                                                  route-map RM-AR1-OUT permit 10
                                                                      match ip address prefix-list PL-OWN-1
                                                                  exit
                                                                  route-map RM-AR2-OUT permit 10
                                                                      match ip address prefix-list PL-OWN-2
                                                                  exit
                                                                  exit
                                                                  wr
                                                              </pre>
                                                          
                                                              <h4>BGP Summary for CUST12</h4>
                                                              <pre>
                                                                  CUST12#show bgp ipv4 unicast summary
                                                                  Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
                                                                  10.10.2.1       4           10      19      20       27    0    0 00:06:44       24
                                                                  10.20.2.1       4           20      19      20       27    0    0 00:06:42       24
                                                              </pre>
                                                          
                                                              <h3>CUST34 Configuration</h3>
                                                              <pre>
                                                                  conf t
                                                                  router bgp 34
                                                                  distance bgp 200 200 200
                                                                  no bgp default ipv4-unicast
                                                                  neighbor 10.30.2.1 remote-as 30
                                                                  neighbor 10.30.2.1 description AR3
                                                                  neighbor 10.40.2.1 remote-as 40
                                                                  neighbor 10.40.2.1 description AR4
                                                                  address-family ipv4 unicast
                                                                      neighbor 10.30.2.1 activate
                                                                      neighbor 10.30.2.1 remove-private-as
                                                                      neighbor 10.30.2.1 route-map RM-AR3-OUT out
                                                                      neighbor 10.40.2.1 activate
                                                                      neighbor 10.40.2.1 remove-private-as
                                                                      neighbor 10.40.2.1 route-map RM-AR4-OUT out
                                                                      network 192.168.34.0 mask 255.255.255.0
                                                                      network 192.168.35.0 mask 255.255.255.0
                                                                      network 192.168.34.0 mask 255.255.254.0
                                                                  exit
                                                                  exit
                                                                  !
                                                                  interface loopback 1
                                                                      ip address 192.168.34.1 255.255.255.0
                                                                  exit
                                                                  !
                                                                  interface loopback 2
                                                                      ip address 192.168.35.1 255.255.255.0
                                                                  exit
                                                                  !
                                                                  ip route 192.168.34.0 255.255.254.0 null0
                                                                  !
                                                                  ip prefix-list PL-OWN-1 seq 5 permit 192.168.34.0/24
                                                                  ip prefix-list PL-OWN-1 seq 10 permit 192.168.34.0/23
                                                                  ip prefix-list PL-OWN-2 seq 5 permit 192.168.35.0/24
                                                                  ip prefix-list PL-OWN-2 seq 10 permit 192.168.34.0/23
                                                                  route-map RM-AR3-OUT permit 10
                                                                      match ip address prefix-list PL-OWN-1
                                                                  exit
                                                                  route-map RM-AR4-OUT permit 10
                                                                      match ip address prefix-list PL-OWN-2
                                                                  exit
                                                                  exit
                                                                  wr
                                                              </pre>
                                                          
                                                              <h4>BGP Summary for CUST34</h4>
                                                              <pre>
                                                                  CUST34#show bgp ipv4 unicast summary
                                                                  Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
                                                                  10.30.2.1       4           30      12      13       27    0    0 00:00:43       24
                                                                  10.40.2.1       4           40      12      13       27    0    0 00:00:45       24
                                                              </pre>
                                                          
                                                              <h1>Task-0: eBGP Config among ISPs and Customers</h1>
                                                              <h2>рзз. eBGP Setup among ISPs and Customers:</h2>
                                                              <p>
                                                                  ржкрзНрж░ржержорзЗржЗ Customer (CUST12, CUST34) ржПржмржВ ISP (AR1, AR2, AR3, AR4) ржПрж░ ржоржзрзНржпрзЗ eBGP (External BGP) рж╕ржорзНржкрж░рзНржХ ржЧрзЬрж╛ рж╣рзЯрзЗржЫрзЗред ржПржЦрж╛ржирзЗ ржжрзБржЗржЯрж╛ ржЖрж▓рж╛ржжрж╛ customer ржЖржЫрзЗ:
                                                              </p>
                                                              <ul>
                                                                  <li><b>CUST12 ржПрж░ ржЬржирзНржп:</b> AR1 (AS 10), AR2 (AS 20)</li>
                                                                  <li><b>CUST34 ржПрж░ ржЬржирзНржп:</b> AR3 (AS 30), AR4 (AS 40)</li>
                                                              </ul>
                                                          
                                                              <h2>рзи. IP Block Announce ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд ржХржорж╛ржирзНржб:</h2>
                                                              <h3>рзи.рзз network ржХржорж╛ржирзНржб:</h3>
                                                              <p>CUST12:</p>
                                                              <pre>
                                                          network 192.168.12.0 mask 255.255.255.0
                                                          network 192.168.13.0 mask 255.255.255.0
                                                          network 192.168.12.0 mask 255.255.254.0
                                                              </pre>
                                                              <p>ржПржЗ ржХржорж╛ржирзНржбржЧрзБрж▓рзЛрж░ ржорж╛ржзрзНржпржорзЗ CUST12 рждрж╛рж░ ржирж┐ржЬрж╕рзНржм IP block ржЧрзБрж▓рзЛ BGP ржПрж░ ржорж╛ржзрзНржпржорзЗ announce ржХрж░ржЫрзЗред ржЕрж░рзНржерж╛рзО, рждрж╛рж░ IP ржЧрзБрж▓рзЛржХрзЗ рж╕рзЗ ржмрж╛ржЗрж░рзЗрж░ ISP рж░рж╛ржЙржЯрж╛рж░ (AR1, AR2) ржХрзЗ ржЬрж╛ржирж╛ржЪрзНржЫрзЗред</p>
                                                          
                                                              <p>CUST34:</p>
                                                              <pre>
                                                          network 192.168.34.0 mask 255.255.255.0
                                                          network 192.168.35.0 mask 255.255.255.0
                                                          network 192.168.34.0 mask 255.255.254.0
                                                              </pre>
                                                          
                                                              <h2>рзй. IP Prefix-List ржПрж░ ржХрж╛ржЬ (ржлрж┐рж▓рзНржЯрж╛рж░рж┐ржВ ржХрж░рж╛рж░ ржЬржирзНржп):</h2>
                                                              <h3>рзй.рзз ржЙржжрж╛рж╣рж░ржг (CUST12):</h3>
                                                              <pre>
                                                          ip prefix-list PL-OWN-1 seq 5 permit 192.168.12.0/24
                                                          ip prefix-list PL-OWN-1 seq 10 permit 192.168.12.0/23
                                                              </pre>
                                                              <p>
                                                                  PL-OWN-1 ржПржЗ prefix-list ржПрж░ ржорж╛ржзрзНржпржорзЗ 192.168.12.0/24 ржПржмржВ 192.168.12.0/23 IP ржЧрзБрж▓рзЛ рж╢рзБржзрзБ announce ржХрж░рж╛ рж╣ржмрзЗ ржмрж▓рзЗ ржарж┐ржХ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред
                                                                  ржЕрж░рзНржерж╛рзО, ржПржЗ prefix ржЧрзБрж▓рзЛрж░ ржмрж╛ржЗрж░рзЗ ржЕржирзНржп ржХрзЛржи IP block ржПржЗ рж░рж╛ржЙржЯрж╛рж░ announce ржХрж░ржмрзЗ ржирж╛ред
                                                              </p>
                                                          
                                                              <p>ржПржХржЗржнрж╛ржмрзЗ:</p>
                                                              <pre>
                                                          ip prefix-list PL-OWN-2 seq 5 permit 192.168.13.0/24
                                                          ip prefix-list PL-OWN-2 seq 10 permit 192.168.12.0/23
                                                              </pre>
                                                              <p>PL-OWN-2 ржЖрж░рзЗржХржЯрж╛ IP block ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░ржЫрзЗред</p>
                                                          
                                                              <h2>рзк. Route-map ржПрж░ ржХрж╛ржЬ (Prefix-list ржЕржирзБржпрж╛рзЯрзА filter ржХрж░рзЗ IP announce ржХрж░рж╛):</h2>
                                                              <h3>рзк.рзз ржЙржжрж╛рж╣рж░ржг (CUST12):</h3>
                                                              <pre>
                                                          route-map RM-AR1-OUT permit 10
                                                          match ip address prefix-list PL-OWN-1
                                                              </pre>
                                                              <p>ржПржЗ route-map AR1 (AS 10) ржПрж░ ржжрж┐ржХрзЗ ржпрзЗрж╕ржм route announce ржХрж░рж╛ рж╣ржмрзЗ, рждрж╛ PL-OWN-1 prefix-list ржЕржирзБржпрж╛рзЯрзА ржирж┐рж░рзНржзрж╛рж░рж┐рждред ржЕрж░рзНржерж╛рзО, рж╢рзБржзрзБ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ IP ржЧрзБрж▓рзЛ AR1-ржХрзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗред</p>
                                                          
                                                              <p>ржПржХржЗржнрж╛ржмрзЗ AR2 ржПрж░ ржЬржирзНржп:</p>
                                                              <pre>
                                                          route-map RM-AR2-OUT permit 10
                                                          match ip address prefix-list PL-OWN-2
                                                              </pre>
                                                          
                                                              <h2>рзл. Neighbor command-ржП route-map attach ржХрж░рж╛:</h2>
                                                              <pre>
                                                          neighbor 10.10.2.1 route-map RM-AR1-OUT out
                                                          neighbor 10.20.2.1 route-map RM-AR2-OUT out
                                                              </pre>
                                                              <p>ржПрж░ ржорж╛ржзрзНржпржорзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ route-map ржЕржирзБржпрж╛рзЯрзА ржпрзЗрж╕ржм IP block announce ржХрж░рж╛ рж╣ржмрзЗ, рждрж╛ neighbor (AR1, AR2) ржПрж░ ржХрж╛ржЫрзЗ ржпрж╛ржмрзЗред</p>
                                                          
                                                              <h2>ЁЯФС ржХрзЗржи ржПржЗржЧрзБрж▓рзЛ ржХрж░рж╛ рж╣рж▓рзЛ?</h2>
                                                              <ul>
                                                                  <li><b>ржирж┐ржЬрж╕рзНржм IP block announce ржХрж░рж╛:</b> ржпрзЗржи customer-рж░рж╛ рждрж╛ржжрзЗрж░ block ржЧрзБрж▓рзЛ ISP ржХрзЗ ржЬрж╛ржирж╛рждрзЗ ржкрж╛рж░рзЗред</li>
                                                                  <li><b>ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рзЗ announce ржХрж░рж╛:</b> ржпрзЗржи ржХрзЗржмрж▓ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ IP ржЧрзБрж▓рзЛржЗ ржмрж╛ржЗрж░рзЗ ржпрж╛рзЯ, ржХрзЛржи ржнрзБрж▓ ржмрж╛ ржЕрждрж┐рж░рж┐ржХрзНржд route ржирж╛ ржпрж╛рзЯред</li>
                                                                  <li><b>remove-private-as:</b> private AS number ржЧрзБрж▓рзЛ ржпрзЗржи announce ржХрж░рж╛рж░ рж╕ржорзЯ ржорзБржЫрзЗ ржпрж╛рзЯред</li>
                                                                  <li><b>Route-map + Prefix-list:</b> ржЖрж░рзЛ granular controlтАФржХрж╛рж░ ржХрж╛ржЫрзЗ ржХрзЛржи IP ржпрж╛ржмрзЗ, рж╕рзЗржЯрж╛ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ред</li>
                                                              </ul>

                                                              <h1>OSPF Configuration and Neighbor Information</h1>
                                                              
                                                              <h2>CR1 Configuration</h2>
                                                              <pre>
                                                              conf t
                                                              router ospf 1
                                                              router-id 10.10.0.1
                                                              passive-interface default
                                                              no passive-interface fastEthernet 0/0
                                                              no passive-interface fastEthernet 1/0
                                                              no passive-interface fastEthernet 2/0
                                                              exit
                                                              interface fastEthernet 0/0
                                                              ip ospf network point-to-point
                                                              ip ospf 1 area 0
                                                              exit
                                                              interface fastEthernet 1/0
                                                              ip ospf network point-to-point
                                                              ip ospf 1 area 0
                                                              exit
                                                              interface fastEthernet 2/0
                                                              ip ospf network point-to-point
                                                              ip ospf 1 area 0
                                                              exit
                                                              interface loopback0
                                                              ip ospf 1 area 0
                                                              exit
                                                              exit
                                                              wr
                                                              </pre>
                                                              
                                                              <h2>BR1 Configuration</h2>
                                                              <pre>
                                                              conf t
                                                              router ospf 1
                                                              router-id 10.10.0.2
                                                              passive-interface default
                                                              no passive-interface fastEthernet 0/0
                                                              default-information originate always
                                                              exit
                                                              interface fastEthernet 0/0
                                                              ip ospf network point-to-point
                                                              ip ospf 1 area 0
                                                              exit
                                                              interface loopback0
                                                              ip ospf 1 area 0
                                                              exit
                                                              exit
                                                              wr
                                                              </pre>
                                                              
                                                              <h2>PR1 Configuration</h2>
                                                              <pre>
                                                              conf t
                                                              router ospf 1
                                                              router-id 10.10.0.3
                                                              passive-interface default
                                                              no passive-interface fastEthernet 0/0
                                                              exit
                                                              interface fastEthernet 0/0
                                                              ip ospf network point-to-point
                                                              ip ospf 1 area 0
                                                              exit
                                                              interface loopback0
                                                              ip ospf 1 area 0
                                                              exit
                                                              exit
                                                              wr
                                                              </pre>
                                                              
                                                              <h2>AR1 Configuration</h2>
                                                              <pre>
                                                              conf t
                                                              router ospf 1
                                                              router-id 10.10.0.4
                                                              passive-interface default
                                                              no passive-interface fastEthernet 0/0
                                                              exit
                                                              interface fastEthernet 0/0
                                                              ip ospf network point-to-point
                                                              ip ospf 1 area 0
                                                              exit
                                                              interface loopback0
                                                              ip ospf 1 area 0
                                                              exit
                                                              exit
                                                              wr
                                                              </pre>
                                                              
                                                              <h2>CR1 OSPF Neighbors</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Neighbor ID</th>
                                                                      <th>Priority</th>
                                                                      <th>State</th>
                                                                      <th>Dead Time</th>
                                                                      <th>Address</th>
                                                                      <th>Interface</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>10.10.0.3</td>
                                                                      <td>0</td>
                                                                      <td>FULL/ -</td>
                                                                      <td>00:00:31</td>
                                                                      <td>10.10.1.6</td>
                                                                      <td>FastEthernet1/0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>10.10.0.4</td>
                                                                      <td>0</td>
                                                                      <td>FULL/ -</td>
                                                                      <td>00:00:38</td>
                                                                      <td>10.10.1.10</td>
                                                                      <td>FastEthernet2/0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>10.10.0.2</td>
                                                                      <td>0</td>
                                                                      <td>FULL/ -</td>
                                                                      <td>00:00:34</td>
                                                                      <td>10.10.1.2</td>
                                                                      <td>FastEthernet0/0</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>BR1 OSPF Neighbors</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Neighbor ID</th>
                                                                      <th>Priority</th>
                                                                      <th>State</th>
                                                                      <th>Dead Time</th>
                                                                      <th>Address</th>
                                                                      <th>Interface</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>10.10.0.1</td>
                                                                      <td>0</td>
                                                                      <td>FULL/ -</td>
                                                                      <td>00:00:33</td>
                                                                      <td>10.10.1.1</td>
                                                                      <td>FastEthernet0/0</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>PR1 OSPF Neighbors</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Neighbor ID</th>
                                                                      <th>Priority</th>
                                                                      <th>State</th>
                                                                      <th>Dead Time</th>
                                                                      <th>Address</th>
                                                                      <th>Interface</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>10.10.0.1</td>
                                                                      <td>0</td>
                                                                      <td>FULL/ -</td>
                                                                      <td>00:00:36</td>
                                                                      <td>10.10.1.5</td>
                                                                      <td>FastEthernet0/0</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>AR1 OSPF Neighbors</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Neighbor ID</th>
                                                                      <th>Priority</th>
                                                                      <th>State</th>
                                                                      <th>Dead Time</th>
                                                                      <th>Address</th>
                                                                      <th>Interface</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>10.10.0.1</td>
                                                                      <td>0</td>
                                                                      <td>FULL/ -</td>
                                                                      <td>00:00:39</td>
                                                                      <td>10.10.1.9</td>
                                                                      <td>FastEthernet0/0</td>
                                                                  </tr>
                                                              </table>



                                                                  <h1>OSPF Overview (рж╕рж╣ржЬржнрж╛ржмрзЗ)</h1>
                                                                  <p>OSPF рж╣рж▓рзЛ ржПржХржЯрж┐ dynamic routing protocol, ржпрж╛ ржПржХрж╛ржзрж┐ржХ рж░рж╛ржЙржЯрж╛рж░ржХрзЗ ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржжрзНрж░рзБрждрждржо ржкрже (best path) ржЦрзБржБржЬрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред ржЖржорж░рж╛ ржПржЦрж╛ржирзЗ OSPF process ржЪрж╛рж▓рж┐рзЯрзЗ, ржкрзНрж░рждрзНржпрзЗржХржЯрж╛ рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржЬржирзНржп ржПржХржЯрж╛ Router-ID ржжрж┐рзЯрзЗржЫрж┐ред Router-ID рж╕рж╛ржзрж╛рж░ржгржд Loopback IP Address рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗрзЯрж╛ рж╣рзЯред Passive Interface ржорж╛ржирзЗ, ржУржЗ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржжрж┐рзЯрзЗ OSPF Hello Packet ржпрж╛ржмрзЗ ржирж╛, ржорж╛ржирзЗ ржЕржирзНржп рж░рж╛ржЙржЯрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ relation (neighbor) рж╣ржмрзЗ ржирж╛ред</p>
                                                              
                                                                  <h2>Passive-interface Concept</h2>
                                                                  <p><code>passive-interface default</code> ржжрж┐рж▓рзЗ рж╕ржм ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ OSPF ржПрж░ ржЬржирзНржп ржмржирзНржз рж╣рзЯрзЗ ржпрж╛ржмрзЗред ржпрзЗржЧрзБрж▓рзЛ ржжрж┐рзЯрзЗ OSPF ржЪрж╛рж▓рж╛рждрзЗ ржЪрж╛ржЗ (ржпрзЗржоржи ржЕржирзНржп рж░рж╛ржЙржЯрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рж╛ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕), рж╕рзЗржЧрзБрж▓рзЛржХрзЗ <code>no passive-interface</code> ржжрж┐рзЯрзЗ ржЦрзБрж▓рзЗ ржжрж┐рждрзЗ рж╣ржмрзЗред</p>
                                                                  <pre>passive-interface default
                                                                    no passive-interface fastEthernet 0/0</pre>
                                                                  <p>ржорж╛ржирзЗ, рж╕ржм interface ржмржирзНржз, рж╢рзБржзрзБ Fa0/0 ржжрж┐рзЯрзЗ OSPF ржЪрж╛рж▓рж╛ржмрзЗред</p>
                                                              
                                                                  <h2>Point-to-Point (P2P) Interface Type</h2>
                                                                  <p>ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗ <code>ip ospf network point-to-point</code> ржжрж┐рж▓рзЗ ржмрзБржЭрж╛ржмрзЗ ржпрзЗ ржПржЯрж╛ P2P рж▓рж┐ржВржХ, ржорж╛ржирзЗ ржжрзБржЗржЯрж╛ рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ рж╕рж░рж╛рж╕рж░рж┐ рж╕ржВржпрзЛржЧред ржПрждрзЗ ржХрж░рзЗ OSPF ржПрж░ ржоржзрзНржпрзЗ DR/BDR ржирж┐рж░рзНржмрж╛ржЪржи рж╣ржмрзЗ ржирж╛, ржХрж╛рж░ржи ржПржЯрж╛ ржПржХрзЗржмрж╛рж░рзЗ рж╕рж░рж╛рж╕рж░рж┐ ржХрж╛ржирзЗржХрж╢ржиред</p>
                                                              
                                                                  <h2>SOHO Network ржП Example Discussion</h2>
                                                                  <p>ржзрж░рзЛ ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ рзкржЯрж╛ рж░рж╛ржЙржЯрж╛рж░ ржЖржЫрзЗ (CR1, BR1, PR1, AR1)ред ржПржЧрзБрж▓рзЛ ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ ржирж┐ржЬрзЗржжрзЗрж░ ржоржзрзНржпрзЗ OSPF ржжрж┐рзЯрзЗ ржХрж╛ржирзЗржХрзНржЯрзЗржбред рждрж╛ржжрзЗрж░ ржоржзрзНржпрзЗ ржХрзЗ ржХрзЛржерж╛рзЯ ржХрж╛ржирзЗржХрзНржЯрзЗржб, рж╕рзЗржЯрж╛ neighbor output ржжрзЗржЦрж┐рзЯрзЗ ржжрж┐ржЪрзНржЫрзЗред</p>
                                                                  <p>ржЙржжрж╛рж╣рж░ржг ржЖрж▓рзЛржЪржирж╛:</p>
                                                                  <table border="1">
                                                                      <tr>
                                                                          <th>Router</th>
                                                                          <th>Neighbor</th>
                                                                          <th>Link</th>
                                                                      </tr>
                                                                      <tr>
                                                                          <td>CR1</td>
                                                                          <td>PR1 (10.10.0.3), AR1 (10.10.0.4), BR1 (10.10.0.2)</td>
                                                                          <td>Fa1/0, Fa2/0, Fa0/0</td>
                                                                      </tr>
                                                                      <tr>
                                                                          <td>BR1</td>
                                                                          <td>CR1 (10.10.0.1)</td>
                                                                          <td>Fa0/0</td>
                                                                      </tr>
                                                                      <tr>
                                                                          <td>PR1</td>
                                                                          <td>CR1 (10.10.0.1)</td>
                                                                          <td>Fa0/0</td>
                                                                      </tr>
                                                                      <tr>
                                                                          <td>AR1</td>
                                                                          <td>CR1 (10.10.0.1)</td>
                                                                          <td>Fa0/0</td>
                                                                      </tr>
                                                                  </table>
                                                                  <p>ЁЯСЙ рждрж╛ржЗ, CR1 рж╣ржЪрзНржЫрзЗ ржПржХржЯрж╛ central router ржпрзЗржЯрж╛ рж╕ржмрж╛ржЗржХрзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рзЗ рж░рзЗржЦрзЗржЫрзЗред</p>
                                                              
                                                                  <h2>Default Route ржПржмржВ OSPF</h2>
                                                                  <p>BR1 ржерзЗржХрзЗ ржмрж╛ржЗрж░рзЗрж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржпрзЗрждрзЗ рж╣рж▓рзЗ, <code>default-information originate always</code> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ, ржпрж╛рждрзЗ OSPF ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЕржирзНржп рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рзЛ default route (0.0.0.0/0) ржкрж╛рзЯред</p>
                                                              
                                                                  <h2>Practical SOHO ржорждржи ржЪрж┐ржирзНрждрж╛</h2>
                                                                  <p>ржзрж░рзЛ рждрзБржорж┐ ржПржХржЯрж╛ ISP ржмрж╛ ржЫрзЛржЯ ржЕржлрж┐рж╕ ржЪрж╛рж▓рж╛ржЪрзНржЫрзЛред рждрзЛржорж╛рж░ ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ рзк ржЯрж╛ рж░рж╛ржЙржЯрж╛рж░ ржЖржЫрзЗред ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯ ржХрж░рж╛рж░ ржЬржирзНржп OSPF ржЗржЙржЬ ржХрж░ржЫрзЛред ржпрзЗржЧрзБрж▓рзЛ internal interface (LAN), рж╕рзЗржЦрж╛ржирзЗ <code>passive-interface</code> ржжрж┐ржЪрзНржЫрзЛ, ржпрж╛рждрзЗ ржУржЧрзБрж▓рзЛ ржжрж┐рзЯрзЗ OSPF ржЪрж▓рждрзЗ ржирж╛ ржкрж╛рж░рзЗред ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯрзЗржб рж▓рж┐ржВржХржЧрзБрж▓рзЛрждрзЗ <code>point-to-point</code> ржжрж┐рзЯрзЗ OSPF neighbor рждрзИрж░рж┐ ржХрж░ржЫрзЛред BR1 ржжрж┐рзЯрзЗ ржмрж╛ржЗрж░рзЗрж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ, рждрж╛ржЗ ржУржЯрж╛ default route ржжрзЗрзЯред</p>
                                                              
                                                                  <h2>рж╢рзЗрж╖ ржХржерж╛ (Summary)</h2>
                                                                  <ul>
                                                                      <li>OSPF IGP ржжрж┐рзЯрзЗ рж░рж╛ржЙржЯрж╛рж░ ржХрж╛ржирзЗржХрж╢ржиред</li>
                                                                      <li><code>passive-interface</code> ржжрж┐рзЯрзЗ controlред</li>
                                                                      <li><code>point-to-point</code> ржжрж┐рзЯрзЗ рж╕рзЛржЬрж╛рж╕рзБржЬрж┐ рж▓рж┐ржВржХред</li>
                                                                      <li>default route propagate ржХрж░рж╛ рж╣ржЪрзНржЫрзЗ BR1 ржерзЗржХрзЗред</li>
                                                                  </ul>


                                                              

                                                              <h1>OSPF Configuration for SOHO Network</h1>
                                                              
                                                              <h2>OSPF Command vs Explanation (Side by Side Table)</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>ржЖржкржирж╛рж░ ржжрзЗржУрзЯрж╛ ржХржорж╛ржирзНржб</th>
                                                                      <th>ржмрзНржпрж╛ржЦрзНржпрж╛ (Explanation in Bengali)</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>conf t</td>
                                                                      <td>рж░рж╛ржЙржЯрж╛рж░рзЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржбрзЗ ржврзБржХрж╛рж░ ржХржорж╛ржирзНржбред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>router ospf 1</td>
                                                                      <td>OSPF process 1 рж╢рзБрж░рзБ ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>router-id 10.10.0.X</td>
                                                                      <td>ржПржЗ рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржЬржирзНржп ржПржХржЯрж┐ ржЗржЙржирж┐ржХ ржЖржЗржбрж┐ (Router-ID) рж╕рзЗржЯ ржХрж░рж╛ред рж╕рж╛ржзрж╛рж░ржгржд Loopback IP рж╣рзЯред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>passive-interface default</td>
                                                                      <td>рж╕ржм ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржерзЗржХрзЗ OSPF Hello packet ржмржирзНржз ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>no passive-interface fastEthernet 0/0</td>
                                                                      <td>ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ (ржпрзЗржЦрж╛ржирзЗ ржЕржирзНржп рж░рж╛ржЙржЯрж╛рж░ ржХрж╛ржирзЗржХрзНржЯрзЗржб) OSPF ржПрж░ ржЬржирзНржп ржЪрж╛рж▓рзБ рж░рж╛ржЦрж╛ рж╣ржЪрзНржЫрзЗред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>no passive-interface fastEthernet 1/0</td>
                                                                      <td>(CR1 ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ) ржПржЗ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржжрж┐рзЯрзЗ OSPF ржЪрж╛рж▓рзБ ржерж╛ржХржмрзЗред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>no passive-interface fastEthernet 2/0</td>
                                                                      <td>(CR1 ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ) ржЖрж░рзЗржХржЯрж┐ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржжрж┐рзЯрзЗ OSPF ржЪрж╛рж▓рзБ ржерж╛ржХржмрзЗред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>default-information originate always</td>
                                                                      <td>(BR1 ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ) ржПржЗ рж░рж╛ржЙржЯрж╛рж░ OSPF ржжрж┐рзЯрзЗ ржЕржирзНржпржжрзЗрж░ ржЬржирзНржп default route (0.0.0.0/0) ржкрж╛ржарж╛ржмрзЗред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>interface fastEthernet 0/0</td>
                                                                      <td>ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржбрзЗ ржпрж╛ржУрзЯрж╛ред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>ip ospf network point-to-point</td>
                                                                      <td>P2P (Point-to-Point) рж▓рж┐ржВржХ рж╣рж┐рж╕рзЗржмрзЗ OSPF treat ржХрж░ржмрзЗ (ржбрж╛ржЗрж░рзЗржХрзНржЯ ржХрж╛ржирзЗржХрж╢ржи)ред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>ip ospf 1 area 0</td>
                                                                      <td>OSPF process 1 ржХрзЗ Area 0 рждрзЗ ржпрзБржХрзНржд ржХрж░рж╛ред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>interface loopback0</td>
                                                                      <td>Loopback ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржиред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>ip ospf 1 area 0</td>
                                                                      <td>Loopback ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ржХрзЗржУ OSPF ржПрж░ рж╕рж╛ржерзЗ ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржЪрзНржЫрзЗред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>exit</td>
                                                                      <td>ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржб ржерзЗржХрзЗ ржмрзЗрж░ рж╣ржУрзЯрж╛ред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>wr</td>
                                                                      <td>рж░рж╛ржЙржЯрж╛рж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи Save ржХрж░рж╛ (write memory)ред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>show ip ospf neighbor</td>
                                                                      <td>ржХрзЛржи ржХрзЛржи рж░рж╛ржЙржЯрж╛рж░ OSPF Neighbor рж╣рж┐рж╕рзЗржмрзЗ ржпрзБржХрзНржд ржЖржЫрзЗ рждрж╛ ржжрзЗржЦрж╛рж░ ржЬржирзНржпред</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>OSPF Configuration Table (Side by Side for CR1, BR1, PR1, AR1)</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Feature</th>
                                                                      <th>CR1</th>
                                                                      <th>BR1</th>
                                                                      <th>PR1</th>
                                                                      <th>AR1</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>Router-ID</td>
                                                                      <td>router-id 10.10.0.1</td>
                                                                      <td>router-id 10.10.0.2</td>
                                                                      <td>router-id 10.10.0.3</td>
                                                                      <td>router-id 10.10.0.4</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>Passive all interfaces?</td>
                                                                      <td>passive-interface default</td>
                                                                      <td>passive-interface default</td>
                                                                      <td>passive-interface default</td>
                                                                      <td>passive-interface default</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>No passive interface (Active Links)</td>
                                                                      <td>no passive-interface fastEthernet 0/0<br>no passive-interface fastEthernet 1/0<br>no passive-interface fastEthernet 2/0</td>
                                                                      <td>no passive-interface fastEthernet 0/0</td>
                                                                      <td>no passive-interface fastEthernet 0/0</td>
                                                                      <td>no passive-interface fastEthernet 0/0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>Point-to-Point Interface type</td>
                                                                      <td>ip ospf network point-to-point on all FastEthernet</td>
                                                                      <td>ip ospf network point-to-point on Fa0/0</td>
                                                                      <td>ip ospf network point-to-point on Fa0/0</td>
                                                                      <td>ip ospf network point-to-point on Fa0/0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>OSPF Area assignment</td>
                                                                      <td>ip ospf 1 area 0 (all interfaces + loopback)</td>
                                                                      <td>ip ospf 1 area 0 (Fa0/0 + loopback)</td>
                                                                      <td>ip ospf 1 area 0 (Fa0/0 + loopback)</td>
                                                                      <td>ip ospf 1 area 0 (Fa0/0 + loopback)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>Loopback in OSPF?</td>
                                                                      <td>Yes</td>
                                                                      <td>Yes</td>
                                                                      <td>Yes</td>
                                                                      <td>Yes</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>Default Route Advertisement?</td>
                                                                      <td>No</td>
                                                                      <td>default-information originate always</td>
                                                                      <td>No</td>
                                                                      <td>No</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>Purpose (Role)</td>
                                                                      <td>Core Router (connects all other routers)</td>
                                                                      <td>Border Router (connect to outside/Internet)</td>
                                                                      <td>Provider Router (upstream ISP/peer)</td>
                                                                      <td>Access Router (customer/peer connection)</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>Neighbor Relation Summary (OSPF Neighbor)</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Router</th>
                                                                      <th>Neighbors (Router ID)</th>
                                                                      <th>Through Interface</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>CR1</td>
                                                                      <td>10.10.0.2 (BR1), 10.10.0.3 (PR1), 10.10.0.4 (AR1)</td>
                                                                      <td>Fa0/0 (BR1), Fa1/0 (PR1), Fa2/0 (AR1)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>BR1</td>
                                                                      <td>10.10.0.1 (CR1)</td>
                                                                      <td>Fa0/0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>PR1</td>
                                                                      <td>10.10.0.1 (CR1)</td>
                                                                      <td>Fa0/0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>AR1</td>
                                                                      <td>10.10.0.1 (CR1)</td>
                                                                      <td>Fa0/0</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржХрж╛ржЬ</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Router Name</th>
                                                                      <th>ржХрж╛ржЬ</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>CR1</td>
                                                                      <td>ржХрзЗржирзНржжрзНрж░рзАрзЯ рж░рж╛ржЙржЯрж╛рж░, рж╕ржмрж╛рж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯрзЗржб, OSPF ржЪрж╛рж▓рж╛рзЯред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>BR1</td>
                                                                      <td>ржмрж╛ржЗрж░рзЗрж░ ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржмрж╛ ржЕржирзНржп ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ ржпрж╛ржУрзЯрж╛рж░ рж░рж╛рж╕рзНрждрж╛ ржжрзЗрзЯ, Default Route propagate ржХрж░рзЗред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>PR1</td>
                                                                      <td>ржЕржирзНржп ISP ржмрж╛ Provider рж░рж╛ржЙржЯрж╛рж░, CR1-ржПрж░ рж╕рж╛ржерзЗ OSPF ржЪрж╛рж▓рж╛рзЯред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>AR1</td>
                                                                      <td>ржЧрзНрж░рж╛рж╣ржХ ржмрж╛ Access рж░рж╛ржЙржЯрж╛рж░, CR1-ржПрж░ рж╕рж╛ржерзЗ OSPF ржЪрж╛рж▓рж╛рзЯред</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>Diagram рж╣рж┐рж╕рж╛ржмрзЗ ржХрж▓рзНржкржирж╛ ржХрж░рж▓рзЗ (Textual View)</h2>
                                                              <pre>
                                                                      [PR1]      [AR1]
                                                                        |          |
                                                                       Fa1/0    Fa2/0
                                                                        \        /
                                                                         [CR1]--------[BR1]
                                                                             Fa0/0
                                                              </pre>
                                                              
                                                              <h2>рж╕ржВржХрзНрж╖рзЗржкрзЗ</h2>
                                                              <ul>
                                                                  <li>CR1 рж╕ржмрж╛рж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯрзЗржб, ржорзВрж▓ рж╣рж╛ржмред</li>
                                                                  <li>BR1 ржЗржирзНржЯрж╛рж░ржирзЗржЯрзЗрж░ ржЬржирзНржп ржбрж┐ржлрж▓рзНржЯ рж░рзБржЯ ржжрж┐рзЯрзЗ ржжрж┐ржЪрзНржЫрзЗред</li>
                                                                  <li>рж╕ржм ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржкрзНржпрж╛рж╕рж┐ржн, рж╢рзБржзрзБ OSPF ржЪрж╛рж▓рж╛ржирзЛрж░ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ ржЫрж╛рзЬрж╛ред</li>
                                                                  <li>ржкрзЯрзЗржирзНржЯ ржЯрзБ ржкрзЯрзЗржирзНржЯ рж▓рж┐ржВржХ рж╣ржУрзЯрж╛рзЯ OSPF ржжрзНрж░рзБржд ржХрж╛ржЬ ржХрж░рзЗред</li>
                                                                  <li>Loopback IP ржерзЗржХрзЗ Router-ID рждрзИрж░рж┐ред</li>
                                                              </ul>
                                                              

                                                              
                                                              <h1>iBGP Configuration for ISPs with Route Reflector and Peer Group</h1>
                                                              
                                                              <h2>CR1 Configuration</h2>
                                                              <pre>
                                                              conf t
                                                              router bgp 10
                                                              bgp router-id 10.10.0.1
                                                              distance bgp 200 200 200
                                                              no bgp default ipv4-unicast
                                                              neighbor IBGP-PEER peer-group
                                                              neighbor IBGP-PEER remote-as 10
                                                              neighbor IBGP-PEER update-source loopback 0
                                                              neighbor 10.10.0.2 peer-group IBGP-PEER
                                                              neighbor 10.10.0.2 description BR
                                                              neighbor 10.10.0.3 peer-group IBGP-PEER
                                                              neighbor 10.10.0.3 description PR
                                                              neighbor 10.10.0.4 peer-group IBGP-PEER
                                                              neighbor 10.10.0.4 description AR
                                                              address-family ipv4 unicast
                                                              neighbor 10.10.0.2 activate
                                                              neighbor 10.10.0.3 activate
                                                              neighbor 10.10.0.4 activate
                                                              neighbor IBGP-PEER next-hop-self
                                                              neighbor IBGP-PEER route-reflector-client
                                                              neighbor IBGP-PEER send-community
                                                              network 10.10.0.0 mask 255.255.252.0
                                                              exit
                                                              exit
                                                              ip route 10.10.0.0 255.255.252.0 null 0
                                                              exit
                                                              wr
                                                              </pre>
                                                              
                                                              <h2>BR1 Configuration</h2>
                                                              <pre>
                                                              conf t
                                                              router bgp 10
                                                              bgp router-id 10.10.0.2
                                                              distance bgp 200 200 200
                                                              no bgp default ipv4-unicast
                                                              neighbor 10.10.0.1 remote-as 10
                                                              neighbor 10.10.0.1 description CR
                                                              neighbor 10.10.0.1 update-source loopback 0
                                                              address-family ipv4 unicast
                                                              neighbor 10.10.0.1 activate
                                                              neighbor 10.10.0.1 next-hop-self
                                                              neighbor 10.10.0.1 send-community
                                                              exit
                                                              exit
                                                              exit
                                                              wr
                                                              </pre>
                                                              
                                                              <h2>PR1 Configuration</h2>
                                                              <pre>
                                                              conf t
                                                              router bgp 10
                                                              bgp router-id 10.10.0.3
                                                              distance bgp 200 200 200
                                                              no bgp default ipv4-unicast
                                                              neighbor 10.10.0.1 remote-as 10
                                                              neighbor 10.10.0.1 description CR
                                                              neighbor 10.10.0.1 update-source loopback 0
                                                              address-family ipv4 unicast
                                                              neighbor 10.10.0.1 activate
                                                              neighbor 10.10.0.1 next-hop-self
                                                              neighbor 10.10.0.1 send-community
                                                              exit
                                                              exit
                                                              exit
                                                              wr
                                                              </pre>
                                                              
                                                              <h2>AR1 Configuration</h2>
                                                              <pre>
                                                              conf t
                                                              router bgp 10
                                                              bgp router-id 10.10.0.4
                                                              distance bgp 200 200 200
                                                              no bgp default ipv4-unicast
                                                              neighbor 10.10.0.1 remote-as 10
                                                              neighbor 10.10.0.1 description CR
                                                              neighbor 10.10.0.1 update-source loopback 0
                                                              address-family ipv4 unicast
                                                              neighbor 10.10.0.1 activate
                                                              neighbor 10.10.0.1 next-hop-self
                                                              neighbor 10.10.0.1 send-community
                                                              network 10.10.2.0 mask 255.255.255.192
                                                              exit
                                                              exit
                                                              ip route 10.10.2.0 255.255.255.192 null 0
                                                              exit
                                                              wr
                                                              </pre>
                                                              
                                                              <h2>BGP Summary Output</h2>
                                                              
                                                              <h3>CR1#show bgp ipv4 unicast summary</h3>
                                                              <pre>
                                                              BGP router identifier 10.10.0.1, local AS number 10
                                                              BGP table version is 1, main routing table version 1
                                                              Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
                                                              10.10.0.2       4           10       4       4        1    0    0 00:01:33        0
                                                              10.10.0.3       4           10       4       4        1    0    0 00:00:43        0
                                                              10.10.0.4       4           10       2       2        1    0    0 00:00:14        0
                                                              </pre>
                                                              
                                                              <h3>BR1#show bgp ipv4 unicast summary</h3>
                                                              <pre>
                                                              BGP router identifier 10.10.0.2, local AS number 10
                                                              BGP table version is 1, main routing table version 1
                                                              Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
                                                              10.10.0.1       4           10       4       4        1    0    0 00:01:47        0
                                                              </pre>
                                                              
                                                              <h3>PR1#show bgp ipv4 unicast summary</h3>
                                                              <pre>
                                                              BGP router identifier 10.10.0.3, local AS number 10
                                                              BGP table version is 1, main routing table version 1
                                                              Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
                                                              10.10.0.1       4           10       4       4        1    0    0 00:01:05        0
                                                              </pre>
                                                              
                                                              <h3>AR1#show bgp ipv4 unicast summary</h3>
                                                              <pre>
                                                              BGP router identifier 10.10.0.4, local AS number 10
                                                              BGP table version is 1, main routing table version 1
                                                              Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/PfxRcd
                                                              10.10.0.1       4           10       2       2        1    0    0 00:00:39        0
                                                              </pre>
 

                                                                  <h1>iBGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h1>
                                                                  <p>ржПржЗ iBGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржиржЯрж┐ ржПржХржЯрж┐ ISP ржирзЗржЯржУржпрж╝рж╛рж░рзНржХрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрзЗржЦрж╛ржирзЗ CR1 (Core Router 1) рж░рж╛ржЙржЯ рж░рж┐ржлрзНрж▓рзЗржХрзНржЯрж░ (RR) рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржПржмржВ BR1, PR1, ржПржмржВ AR1 рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐ рждрж╛рж░ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯред ржирж┐ржЪрзЗ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржмрж╛ржВрж▓рж╛ржпрж╝ ржЖрж▓рзЛржЪржирж╛ ржХрж░рж╛ рж╣рж▓рзЛ:</p>
                                                              
                                                                  <h2>1. CR1 (Core Router 1) ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
                                                                  <p>CR1 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ рж░рж╛ржЙржЯ рж░рж┐ржлрзНрж▓рзЗржХрзНржЯрж░ (RR) рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржПржмржВ BR1, PR1, ржПржмржВ AR1 рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐ржХрзЗ рждрж╛рж░ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
                                                                  <pre>
                                                              router bgp 10
                                                              bgp router-id 10.10.0.1
                                                              distance bgp 200 200 200
                                                              no bgp default ipv4-unicast
                                                              
                                                              neighbor IBGP-PEER peer-group
                                                              neighbor IBGP-PEER remote-as 10
                                                              neighbor IBGP-PEER update-source loopback 0
                                                              
                                                              neighbor 10.10.0.2 peer-group IBGP-PEER
                                                              neighbor 10.10.0.2 description BR
                                                              neighbor 10.10.0.3 peer-group IBGP-PEER
                                                              neighbor 10.10.0.3 description PR
                                                              neighbor 10.10.0.4 peer-group IBGP-PEER
                                                              neighbor 10.10.0.4 description AR
                                                              
                                                              address-family ipv4 unicast
                                                               neighbor 10.10.0.2 activate
                                                               neighbor 10.10.0.3 activate
                                                               neighbor 10.10.0.4 activate
                                                               neighbor IBGP-PEER next-hop-self
                                                               neighbor IBGP-PEER route-reflector-client
                                                               neighbor IBGP-PEER send-community
                                                               network 10.10.0.0 mask 255.255.252.0
                                                              exit-address-family
                                                              
                                                              ip route 10.10.0.0 255.255.252.0 null 0
                                                                  </pre>
                                                              
                                                                  <h2>2. BR1 (Border Router 1) ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
                                                                  <p>BR1 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ CR1 ржПрж░ рж╕рж╛ржерзЗ iBGP ржкрж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░ржЫрзЗред</p>
                                                                  <pre>
                                                              router bgp 10
                                                              bgp router-id 10.10.0.2
                                                              distance bgp 200 200 200
                                                              no bgp default ipv4-unicast
                                                              
                                                              neighbor 10.10.0.1 remote-as 10
                                                              neighbor 10.10.0.1 description CR
                                                              neighbor 10.10.0.1 update-source loopback 0
                                                              
                                                              address-family ipv4 unicast
                                                               neighbor 10.10.0.1 activate
                                                               neighbor 10.10.0.1 next-hop-self
                                                               neighbor 10.10.0.1 send-community
                                                              exit-address-family
                                                                  </pre>
                                                              
                                                                  <h2>3. PR1 (Provider Router 1) ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
                                                                  <p>PR1 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ржУ CR1 ржПрж░ рж╕рж╛ржерзЗ iBGP ржкрж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░ржЫрзЗред</p>
                                                                  <pre>
                                                              router bgp 10
                                                              bgp router-id 10.10.0.3
                                                              distance bgp 200 200 200
                                                              no bgp default ipv4-unicast
                                                              
                                                              neighbor 10.10.0.1 remote-as 10
                                                              neighbor 10.10.0.1 description CR
                                                              neighbor 10.10.0.1 update-source loopback 0
                                                              
                                                              address-family ipv4 unicast
                                                               neighbor 10.10.0.1 activate
                                                               neighbor 10.10.0.1 next-hop-self
                                                               neighbor 10.10.0.1 send-community
                                                              exit-address-family
                                                                  </pre>
                                                              
                                                                  <h2>4. AR1 (Access Router 1) ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
                                                                  <p>AR1 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐ CR1 ржПрж░ рж╕рж╛ржерзЗ iBGP ржкрж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░ржЫрзЗ ржПржмржВ ржПржХржЯрж┐ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржЕрзНржпрж╛ржбржнрж╛рж░ржЯрж╛ржЗржЬ ржХрж░ржЫрзЗред</p>
                                                                  <pre>
                                                              router bgp 10
                                                              bgp router-id 10.10.0.4
                                                              distance bgp 200 200 200
                                                              no bgp default ipv4-unicast
                                                              
                                                              neighbor 10.10.0.1 remote-as 10
                                                              neighbor 10.10.0.1 description CR
                                                              neighbor 10.10.0.1 update-source loopback 0
                                                              
                                                              address-family ipv4 unicast
                                                               neighbor 10.10.0.1 activate
                                                               neighbor 10.10.0.1 next-hop-self
                                                               neighbor 10.10.0.1 send-community
                                                               network 10.10.2.0 mask 255.255.255.192
                                                              exit-address-family
                                                              
                                                              ip route 10.10.2.0 255.255.255.192 null 0
                                                                  </pre>
                                                              
                                                                  <h2>5. BGP рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЪрзЗржХ ржХрж░рж╛:</h2>
                                                                  <p>рж╕ржм рж░рж╛ржЙржЯрж╛рж░рзЗ BGP рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ ржЪрзЗржХ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржПржмржВ рж╕ржм ржкрж┐ржпрж╝рж╛рж░рж┐ржВ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржПрж╕рзНржЯрж╛ржмрж▓рж┐рж╢ рж╣ржпрж╝рзЗржЫрзЗред</p>
                                                                  <pre>
                                                              CR1#show bgp ipv4 unicast summary
                                                              BR1#show bgp ipv4 unicast summary
                                                              PR1#show bgp ipv4 unicast summary
                                                              AR1#show bgp ipv4 unicast summary
                                                                  </pre>
                                                              
                                                                  <p>ржПржЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржорж╛ржзрзНржпржорзЗ CR1 рж░рж╛ржЙржЯ рж░рж┐ржлрзНрж▓рзЗржХрзНржЯрж░ рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗ ржПржмржВ BR1, PR1, ржПржмржВ AR1 рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐ рждрж╛рж░ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗред рж╕ржм рж░рж╛ржЙржЯрж╛рж░ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржкрж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░рзЗржЫрзЗ ржПржмржВ BGP ржЯрзЗржмрж┐рж▓рзЗ рж░рзБржЯржЧрзБрж▓рж┐ рж╢рзЗржпрж╝рж╛рж░ ржХрж░ржЫрзЗред</p>


                                                              <h1>iBGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржПржмржВ BGP рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕</h1>
                                                              
                                                              <h2>iBGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рждрзБрж▓ржирж╛ (CR1, BR1, PR1, AR1)</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржзрж╛ржк</th>
                                                                      <th>CR1 (Core Router 1)</th>
                                                                      <th>BR1 (Border Router 1)</th>
                                                                      <th>PR1 (Provider Router 1)</th>
                                                                      <th>AR1 (Access Router 1)</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>BGP ржкрзНрж░рж╕рзЗрж╕ рж╢рзБрж░рзБ</td>
                                                                      <td><code>router bgp 10</code></td>
                                                                      <td><code>router bgp 10</code></td>
                                                                      <td><code>router bgp 10</code></td>
                                                                      <td><code>router bgp 10</code></td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рж░рж╛ржЙржЯрж╛рж░ ржЖржЗржбрж┐</td>
                                                                      <td><code>bgp router-id 10.10.0.1</code></td>
                                                                      <td><code>bgp router-id 10.10.0.2</code></td>
                                                                      <td><code>bgp router-id 10.10.0.3</code></td>
                                                                      <td><code>bgp router-id 10.10.0.4</code></td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>BGP ржбрж┐рж╕ржЯрзНржпрж╛ржирзНрж╕</td>
                                                                      <td><code>distance bgp 200 200 200</code></td>
                                                                      <td><code>distance bgp 200 200 200</code></td>
                                                                      <td><code>distance bgp 200 200 200</code></td>
                                                                      <td><code>distance bgp 200 200 200</code></td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>IPv4 ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржбрж┐рж╕ржПржмрж▓</td>
                                                                      <td><code>no bgp default ipv4-unicast</code></td>
                                                                      <td><code>no bgp default ipv4-unicast</code></td>
                                                                      <td><code>no bgp default ipv4-unicast</code></td>
                                                                      <td><code>no bgp default ipv4-unicast</code></td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>ржкрж┐ржпрж╝рж╛рж░ ржЧрзНрж░рзБржк рждрзИрж░рж┐</td>
                                                                      <td>
                                                                          <code>neighbor IBGP-PEER peer-group</code><br>
                                                                          <code>neighbor IBGP-PEER remote-as 10</code><br>
                                                                          <code>neighbor IBGP-PEER update-source loopback 0</code>
                                                                      </td>
                                                                      <td>-</td>
                                                                      <td>-</td>
                                                                      <td>-</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>ржкрж┐ржпрж╝рж╛рж░ ржпрзЛржЧ</td>
                                                                      <td>
                                                                          <code>neighbor 10.10.0.2 peer-group IBGP-PEER</code><br>
                                                                          <code>neighbor 10.10.0.3 peer-group IBGP-PEER</code><br>
                                                                          <code>neighbor 10.10.0.4 peer-group IBGP-PEER</code>
                                                                      </td>
                                                                      <td>
                                                                          <code>neighbor 10.10.0.1 remote-as 10</code><br>
                                                                          <code>neighbor 10.10.0.1 update-source loopback 0</code>
                                                                      </td>
                                                                      <td>
                                                                          <code>neighbor 10.10.0.1 remote-as 10</code><br>
                                                                          <code>neighbor 10.10.0.1 update-source loopback 0</code>
                                                                      </td>
                                                                      <td>
                                                                          <code>neighbor 10.10.0.1 remote-as 10</code><br>
                                                                          <code>neighbor 10.10.0.1 update-source loopback 0</code>
                                                                      </td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>IPv4 ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржлрзНржпрж╛ржорж┐рж▓рж┐</td>
                                                                      <td>
                                                                          <code>address-family ipv4 unicast</code><br>
                                                                          <code>neighbor 10.10.0.2 activate</code><br>
                                                                          <code>neighbor 10.10.0.3 activate</code><br>
                                                                          <code>neighbor 10.10.0.4 activate</code><br>
                                                                          <code>neighbor IBGP-PEER next-hop-self</code><br>
                                                                          <code>neighbor IBGP-PEER route-reflector-client</code><br>
                                                                          <code>neighbor IBGP-PEER send-community</code><br>
                                                                          <code>network 10.10.0.0 mask 255.255.252.0</code>
                                                                      </td>
                                                                      <td>
                                                                          <code>address-family ipv4 unicast</code><br>
                                                                          <code>neighbor 10.10.0.1 activate</code><br>
                                                                          <code>neighbor 10.10.0.1 next-hop-self</code><br>
                                                                          <code>neighbor 10.10.0.1 send-community</code>
                                                                      </td>
                                                                      <td>
                                                                          <code>address-family ipv4 unicast</code><br>
                                                                          <code>neighbor 10.10.0.1 activate</code><br>
                                                                          <code>neighbor 10.10.0.1 next-hop-self</code><br>
                                                                          <code>neighbor 10.10.0.1 send-community</code>
                                                                      </td>
                                                                      <td>
                                                                          <code>address-family ipv4 unicast</code><br>
                                                                          <code>neighbor 10.10.0.1 activate</code><br>
                                                                          <code>neighbor 10.10.0.1 next-hop-self</code><br>
                                                                          <code>neighbor 10.10.0.1 send-community</code><br>
                                                                          <code>network 10.10.2.0 mask 255.255.255.192</code>
                                                                      </td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ рж░рзБржЯ</td>
                                                                      <td><code>ip route 10.10.0.0 255.255.252.0 null 0</code></td>
                                                                      <td>-</td>
                                                                      <td>-</td>
                                                                      <td><code>ip route 10.10.2.0 255.255.255.192 null 0</code></td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>BGP рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕ рждрзБрж▓ржирж╛ (CR1, BR1, PR1, AR1)</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>рж░рж╛ржЙржЯрж╛рж░</th>
                                                                      <th>ржирзЗржЗржмрж╛рж░</th>
                                                                      <th>AS</th>
                                                                      <th>MsgRcvd</th>
                                                                      <th>MsgSent</th>
                                                                      <th>TblVer</th>
                                                                      <th>Up/Down</th>
                                                                      <th>State/PfxRcd</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td rowspan="3">CR1</td>
                                                                      <td>10.10.0.2</td>
                                                                      <td>10</td>
                                                                      <td>4</td>
                                                                      <td>4</td>
                                                                      <td>1</td>
                                                                      <td>00:01:33</td>
                                                                      <td>0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>10.10.0.3</td>
                                                                      <td>10</td>
                                                                      <td>4</td>
                                                                      <td>4</td>
                                                                      <td>1</td>
                                                                      <td>00:00:43</td>
                                                                      <td>0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>10.10.0.4</td>
                                                                      <td>10</td>
                                                                      <td>2</td>
                                                                      <td>2</td>
                                                                      <td>1</td>
                                                                      <td>00:00:14</td>
                                                                      <td>0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>BR1</td>
                                                                      <td>10.10.0.1</td>
                                                                      <td>10</td>
                                                                      <td>4</td>
                                                                      <td>4</td>
                                                                      <td>1</td>
                                                                      <td>00:01:47</td>
                                                                      <td>0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>PR1</td>
                                                                      <td>10.10.0.1</td>
                                                                      <td>10</td>
                                                                      <td>4</td>
                                                                      <td>4</td>
                                                                      <td>1</td>
                                                                      <td>00:01:05</td>
                                                                      <td>0</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>AR1</td>
                                                                      <td>10.10.0.1</td>
                                                                      <td>10</td>
                                                                      <td>2</td>
                                                                      <td>2</td>
                                                                      <td>1</td>
                                                                      <td>00:00:39</td>
                                                                      <td>0</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>ржЯрзЗржмрж┐рж▓рзЗрж░ ржмрзНржпрж╛ржЦрзНржпрж╛:</h2>
                                                              <ol>
                                                                  <li><strong>CR1 (Core Router 1):</strong>
                                                                      <ul>
                                                                          <li>CR1 рж░рж╛ржЙржЯ рж░рж┐ржлрзНрж▓рзЗржХрзНржЯрж░ (RR) рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржЫрзЗред</li>
                                                                          <li><code>IBGP-PEER</code> ржкрж┐ржпрж╝рж╛рж░ ржЧрзНрж░рзБржк рждрзИрж░рж┐ ржХрж░рзЗ BR1, PR1, ржПржмржВ AR1 ржХрзЗ ржХрзНрж▓рж╛ржпрж╝рзЗржирзНржЯ рж╣рж┐рж╕рзЗржмрзЗ ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
                                                                          <li><code>next-hop-self</code>, <code>route-reflector-client</code>, ржПржмржВ <code>send-community</code> ржХржорж╛ржирзНржбржЧрзБрж▓рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
                                                                          <li>ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ <code>10.10.0.0/22</code> ржЕрзНржпрж╛ржбржнрж╛рж░ржЯрж╛ржЗржЬ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
                                                                      </ul>
                                                                  </li>
                                                                  <li><strong>BR1, PR1, AR1:</strong>
                                                                      <ul>
                                                                          <li>ржПржЗ рж░рж╛ржЙржЯрж╛рж░ржЧрзБрж▓рж┐ CR1 ржПрж░ рж╕рж╛ржерзЗ ржкрж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░рзЗржЫрзЗред</li>
                                                                          <li>рж╕ржмрж╛ржЗ <code>next-hop-self</code> ржПржмржВ <code>send-community</code> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржЫрзЗред</li>
                                                                          <li>AR1 ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ <code>10.10.2.0/26</code> ржЕрзНржпрж╛ржбржнрж╛рж░ржЯрж╛ржЗржЬ ржХрж░рзЗржЫрзЗред</li>
                                                                      </ul>
                                                                  </li>
                                                                  <li><strong>BGP рж╕рзНржЯрзНржпрж╛ржЯрж╛рж╕:</strong>
                                                                      <ul>
                                                                          <li>рж╕ржм рж░рж╛ржЙржЯрж╛рж░рзЗ BGP ржкрж┐ржпрж╝рж╛рж░рж┐ржВ рж╕ржарж┐ржХржнрж╛ржмрзЗ ржПрж╕рзНржЯрж╛ржмрж▓рж┐рж╢ рж╣ржпрж╝рзЗржЫрзЗред</li>
                                                                          <li><code>State/PfxRcd</code> ржХрж▓рж╛ржорзЗ <code>0</code> ржорж╛ржирзЗ ржПржЦржирзЛ ржХрзЛржирзЛ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ рж░рж┐рж╕рж┐ржн рж╣ржпрж╝ржирж┐ (рж╢рзБрж░рзБрждрзЗ ржПржЯрж┐ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХ)ред</li>
                                                                      </ul>
                                                                  </li>
                                                              </ol>
                                                              

                                                              
                                                              <h2>BGP Path Attributes (ржмрж╛ржВрж▓рж╛)</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Attribute Name</th>
                                                                      <th>ржХрж╛ржЬ (Function)</th>
                                                                      <th>ржзрж░ржи (Type)</th>
                                                                      <th>ржмрзЗржЫрзЗ ржирзЗрзЯрж╛рж░ ржирж┐рзЯржо (Preference Rule)</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>AS_PATH</td>
                                                                      <td>ржХрзЛржи ржХрзЛржи AS ржкрзЗрж░рж┐рзЯрзЗ ржПрж╕рзЗржЫрзЗ (ржкржерзЗрж░ рждрж╛рж▓рж┐ржХрж╛)</td>
                                                                      <td>Well-known Mandatory</td>
                                                                      <td>ржХржо рж╕ржВржЦрзНржпржХ AS_PATH ржкржЫржирзНржжржирзАрзЯ (Shortest Path)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>NEXT_HOP</td>
                                                                      <td>ржЧржирзНрждржмрзНржпрзЗ ржкрзМржБржЫрж╛ржирзЛрж░ ржЬржирзНржп ржкрж░ржмрж░рзНрждрзА рж╣ржкрзЗрж░ IP ржарж┐ржХрж╛ржирж╛</td>
                                                                      <td>Well-known Mandatory</td>
                                                                      <td>ржЕржмрж╢рзНржпржЗ ржкрзМржБржЫрж╛рждрзЗ рж╣ржмрзЗ, ржиржЗрж▓рзЗ рж░рзБржЯ ржЧрзНрж░рж╣ржг рж╣ржмрзЗ ржирж╛</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>ORIGIN</td>
                                                                      <td>рж░рзБржЯ ржХрзЛржерж╛ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ (ржЙрзОржкрждрзНрждрж┐)</td>
                                                                      <td>Well-known Mandatory</td>
                                                                      <td>IGP (i) < EGP (e) < Incomplete (?)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>LOCAL_PREF</td>
                                                                      <td>ржХрзЛржи ржкржерзЗ AS ржерзЗржХрзЗ ржмрзЗрж░ рж╣ржмрзЗ (Outbound)</td>
                                                                      <td>Well-known Discretionary</td>
                                                                      <td>рж╕рж░рзНржмрзЛржЪрзНржЪ Local Preference ржкржЫржирзНржжржирзАрзЯ</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>COMMUNITY</td>
                                                                      <td>Prefix ржЧрзБржЪрзНржЫржмржжрзНржз ржХрж░рзЗ ржирзАрждрж┐ ржкрзНрж░рзЯрзЛржЧ</td>
                                                                      <td>Optional Transitive</td>
                                                                      <td>ржирзАрждрж┐ ржЕржирзБржпрж╛рзЯрзА ржХрж╛ржЬ (Grouping based policy)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>AGGREGATOR</td>
                                                                      <td>ржХрзЗ рж╕рж╛рж░рж╛ржВрж╢ (Aggregate) рждрзИрж░рж┐ ржХрж░рзЗржЫрзЗ</td>
                                                                      <td>Optional Transitive</td>
                                                                      <td>рждржерзНржп рж╕рж╣ ржпрзЛржЧ рж╣рзЯ (Informational)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>MED (Multi-Exit Discriminator)</td>
                                                                      <td>ржкрзНрж░рждрж┐ржмрзЗрж╢рзА AS-ржХрзЗ ржкрзНрж░ржмрзЗрж╢ржкрже рж╕ржорзНржкрж░рзНржХрзЗ ржЬрж╛ржирж╛рзЯ (Inbound)</td>
                                                                      <td>Optional Non-transitive</td>
                                                                      <td>рж╕рж░рзНржмржирж┐ржорзНржи MED ржкржЫржирзНржжржирзАрзЯ (Lowest MED wins)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>ATOMIC_AGGREGATE</td>
                                                                      <td>рж╕рж╛рж░рж╛ржВрж╢рзЗрж░ рж╕ржорзЯ рждржерзНржп рж╣рж╛рж░рж╛ржирзЛрж░ ржЗржЩрзНржЧрж┐ржд</td>
                                                                      <td>Well-known Discretionary</td>
                                                                      <td>Aggregation рж╕ржВржХрзНрж░рж╛ржирзНржд</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>BGP Best Path Selection Rules (ржмрж╛ржВрж▓рж╛)</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>ржХрзНрж░ржо (Order)</th>
                                                                      <th>ржирж┐рзЯржо (Rule)</th>
                                                                      <th>ржмрзНржпрж╛ржЦрзНржпрж╛ (Explanation)</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>1</td>
                                                                      <td>Highest LOCAL_PREF</td>
                                                                      <td>рж╕рж░рзНржмрзЛржЪрзНржЪ Local Preference-ржпрзБржХрзНржд ржкрже ржмрзЗржЫрзЗ ржирзЗрзЯ</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>2</td>
                                                                      <td>Locally originated routes</td>
                                                                      <td>ржирж┐ржЬрзЗрж░ ржЙрзОржкржирзНржи ржХрж░рж╛ рж░рзБржЯ</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>3</td>
                                                                      <td>Shortest AS_PATH</td>
                                                                      <td>ржХржо рж╕ржВржЦрзНржпржХ AS ржкрж╛рж░ рж╣ржУрзЯрж╛ ржкрже</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>4</td>
                                                                      <td>Lowest ORIGIN code</td>
                                                                      <td>IGP < EGP < Incomplete</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>5</td>
                                                                      <td>Lowest MED</td>
                                                                      <td>рж╕ржмржЪрзЗрзЯрзЗ ржХржо MED-ржпрзБржХрзНржд ржкрже</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>6</td>
                                                                      <td>eBGP over iBGP</td>
                                                                      <td>eBGP рж░рзБржЯ ржмрзЗрж╢рж┐ ржкржЫржирзНржжржирзАрзЯ</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>7</td>
                                                                      <td>Lowest IGP cost to NEXT_HOP</td>
                                                                      <td>ржкрж░ржмрж░рзНрждрзА рж╣ржкрзЗ ржкрзМржБржЫрж╛ржирзЛрж░ IGP ржЦрж░ржЪ ржХржо</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>8</td>
                                                                      <td>Oldest eBGP route</td>
                                                                      <td>рж╕ржмржЪрзЗрзЯрзЗ ржкрзБрж░рзЛржирзЛ eBGP рж░рзБржЯ</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>9</td>
                                                                      <td>Lowest Router ID</td>
                                                                      <td>ржХржо Router ID-ржпрзБржХрзНржд ржкрже</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>10</td>
                                                                      <td>Lowest Neighbor IP</td>
                                                                      <td>ржХржо IP Address-ржпрзБржХрзНржд ржкрзНрж░рждрж┐ржмрзЗрж╢рзА</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>11</td>
                                                                      <td>If no route to NEXT_HOP, discard path</td>
                                                                      <td>ржкрж░ржмрж░рзНрждрзА рж╣ржкрзЗ рж░рзБржЯ ржирж╛ ржерж╛ржХрж▓рзЗ ржмрж╛рждрж┐рж▓</td>
                                                                  </tr>
                                                              </table>
                                                              

                                                              <h1>ЁЯМР BGP Path Attributes (BGP ржкржерзЗрж░ ржмрзИрж╢рж┐рж╖рзНржЯрзНржп)</h1>
                                                              
                                                              <h2>тЬ│я╕П BGP Path Attribute ржХрзА?</h2>
                                                              <p>BGP (Border Gateway Protocol)-ржПрж░ ржорж╛ржзрзНржпржорзЗ рж░рж╛ржЙржЯрж┐ржВ ржЖржкржбрзЗржЯрзЗ ржпрзЗрж╕ржм рждржерзНржп ржерж╛ржХрзЗ, рж╕рзЗржЧрзБрж▓рзЛржЗ Path Attributesред</p>
                                                              <p>ржПржЧрзБрж▓рзЛ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрж░рзНржпржирзНржд ржкрзМржБржЫрж╛ржирзЛрж░ ржкрже ржмрж░рзНржгржирж╛ ржХрж░рзЗред</p>
                                                              <p>ржирзАрждрж┐ржорж╛рж▓рж╛рж░ (Policy) ржорж╛ржзрзНржпржорзЗ ржкрже ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред</p>
                                                              
                                                              <h2>ЁЯФС ржкрзНрж░ржзрж╛ржи BGP Path Attributes ржУ рждрж╛ржжрзЗрж░ ржмрзНржпрж╛ржЦрзНржпрж╛ (ржЙржжрж╛рж╣рж░ржгрж╕рж╣):</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Attribute ржирж╛ржо</th>
                                                                      <th>ржмрзНржпрж╛ржЦрзНржпрж╛</th>
                                                                      <th>ржЙржжрж╛рж╣рж░ржг</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>AS_PATH</td>
                                                                      <td>ржХрзЛржи ржХрзЛржи AS (Autonomous System) ржкрзЗрж░рж┐рзЯрзЗ ржЧржирзНрждржмрзНржпрзЗ ржкрзМржБржЫрзЗржЫрзЗ рждрж╛ ржжрзЗржЦрж╛рзЯред рж╕ржВржХрзНрж╖рж┐ржкрзНржд AS_PATH-ржХрзЗ ржмрзЗрж╢рж┐ ржкрзНрж░рж╛ржзрж╛ржирзНржпред</td>
                                                                      <td>ржпржжрж┐ 100.10.0.0/16 ржирзЗржЯржУрзЯрж╛рж░рзНржХ AS100 ржерзЗржХрзЗ AS200 ржУ AS300 рж╣рзЯрзЗ AS900-рждрзЗ ржпрж╛рзЯ, рждржмрзЗ AS_PATH рж╣ржмрзЗ: <code>300 200 100</code></td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>NEXT_HOP</td>
                                                                      <td>ржЧржирзНрждржмрзНржпрзЗ ржпрзЗрждрзЗ ржкрж░ржмрж░рзНрждрзА рж╣ржкрзЗрж░ (рж░рж╛ржЙржЯрж╛рж░) IP ржарж┐ржХрж╛ржирж╛ред</td>
                                                                      <td>eBGP рж╣рж▓рзЗ ржкрзНрж░рждрж┐ржмрзЗрж╢рзА AS-ржПрж░ IP, ржпрзЗржоржи: <code>130.10.0.1</code>; iBGP рж╣рж▓рзЗ рж▓рзБржкржмрзНржпрж╛ржХ ржарж┐ржХрж╛ржирж╛ред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>ORIGIN</td>
                                                                      <td>рж░рзБржЯ ржХрзЛржерж╛ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ рждрж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗред IGP (i), EGP (e), ржмрж╛ Incomplete (?) рж╣рждрзЗ ржкрж╛рж░рзЗред</td>
                                                                      <td>ржпржжрж┐ AS100 ржирж┐ржЬрзЗрж░ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржШрзЛрж╖ржгрж╛ ржжрзЗрзЯ, рждржмрзЗ ORIGIN рж╣ржмрзЗ <code>i (IGP)</code>ред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>LOCAL_PREF</td>
                                                                      <td>AS-ржПрж░ ржоржзрзНржпрзЗ ржХрзЛржи ржкрже ржжрж┐рзЯрзЗ ржмрж╛рж╣рж┐рж░ рж╣ржмрзЗ рждрж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рзЗред ржЙржЪрзНржЪрждрж░ ржорж╛ржи ржкржЫржирзНржжржирзАрзЯред</td>
                                                                      <td>ржпржжрж┐ AS100 ржерзЗржХрзЗ ржмрж╛рж╣рж┐рж░ рж╣ржУрзЯрж╛рж░ ржжрзБржЯрж┐ ржкрже ржерж╛ржХрзЗ: 200 (LOCAL_PREF=200) ржУ 500 (LOCAL_PREF=150), рждржмрзЗ рзирзжрзж ржкржЫржирзНржж рж╣ржмрзЗред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>COMMUNITY</td>
                                                                      <td>ржПржХ ржмрж╛ ржПржХрж╛ржзрж┐ржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ржХрзЗ ржЧрзНрж░рзБржк ржХрж░рзЗ ржирзАрждрж┐ржорж╛рж▓рж╛ ржкрзНрж░рзЯрзЛржЧред</td>
                                                                      <td>ржпрзЗржоржи: <code>100:200</code> ржХржорж┐ржЙржирж┐ржЯрж┐ ржЯрзНржпрж╛ржЧ ржжрж┐рзЯрзЗ ржмрж┐рж╢рзЗрж╖ ржирж┐рзЯржо ржкрзНрж░рзЯрзЛржЧред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>MED</td>
                                                                      <td>ржкрзНрж░рждрж┐ржмрзЗрж╢рзА AS-ржХрзЗ ржмрж▓рзЗ ржжрзЗрзЯ ржХрзЛржи ржкрзНрж░ржмрзЗрж╢ ржкрже ржкржЫржирзНржжржирзАрзЯред ржирж┐ржорзНржи MED ржкржЫржирзНржжржирзАрзЯред</td>
                                                                      <td>ржПржХржЗ ржЧржирзНрждржмрзНржпрзЗрж░ ржжрзБржЯрж┐ ржкрже, MED=10 ржПржмржВ MED=200, рж╣рж▓рзЗ MED=10 ржкржЫржирзНржжред</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>ЁЯФД AS_PATH ржЙржжрж╛рж╣рж░ржг (ржЪрж┐рждрзНрж░ ржнрж┐рждрзНрждрж┐ржХ):</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>ржЧржирзНрждржмрзНржп</th>
                                                                      <th>AS_PATH</th>
                                                                      <th>ржмрзНржпрж╛ржЦрзНржпрж╛</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>100.10.0.0/16</td>
                                                                      <td>300 200 100</td>
                                                                      <td>AS300 тЖТ AS200 тЖТ AS100</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>130.10.0.0/16</td>
                                                                      <td>300 200</td>
                                                                      <td>AS300 тЖТ AS200</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>100.10.0.0/16</td>
                                                                      <td>200 100</td>
                                                                      <td>AS200 тЖТ AS100</td>
                                                                  </tr>
                                                              </table>
                                                              <p>ржирж┐рзЯржо: ржпрзЗ AS_PATH рж╕ржмржЪрзЗрзЯрзЗ ржЫрзЛржЯ, рж╕рзЗржЗ ржкрже ржмрзЗржЫрзЗ ржирзЗрзЯред</p>
                                                              
                                                              <h2>ЁЯФД NEXT_HOP ржЙржжрж╛рж╣рж░ржг (ржЪрж┐рждрзНрж░ ржЕржирзБржпрж╛рзЯрзА):</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>ржХрж┐ржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ</th>
                                                                      <th>ржмрзНржпрж╛ржЦрзНржпрж╛</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>eBGP</td>
                                                                      <td>ржкрзНрж░рждрж┐ржмрзЗрж╢рзА AS ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ ржЖржкржбрзЗржЯрзЗ ржпрзЗ IP ржерж╛ржХрзЗ, рждрж╛ржЗ NEXT_HOPред ржпрзЗржоржи: <code>130.10.0.1</code></td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>iBGP</td>
                                                                      <td>eBGP ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ ржЖржкржбрзЗржЯ iBGP-рждрзЗ ржкрж╛ржарж╛рж▓рзЗ NEXT_HOP ржкрж░рж┐ржмрж░рзНрждржи рж╣рзЯ ржирж╛ред</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>Next-Hop-Self</td>
                                                                      <td>iBGP ржкрзНрж░рждрж┐ржмрзЗрж╢рзАрж░ ржЬржирзНржп ржирж┐ржЬрзЗржХрзЗ NEXT_HOP ржмрж╛ржирж╛рждрзЗ <code>next-hop-self</code> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ред</td>
                                                                  </tr>
                                                              </table>
                                                              <h3>ЁЯФ╕ ржЙржжрж╛рж╣рж░ржг:</h3>
                                                              <pre>router bgp 100
                                                              neighbor 100.10.0.11 remote-as 100
                                                              neighbor 100.10.0.11 next-hop-self</pre>
                                                              
                                                              <h2>ЁЯПБ ORIGIN Example (рж░рзБржЯрзЗрж░ ржЙрзОрж╕):</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>ORIGIN Code</th>
                                                                      <th>ржмрзНржпрж╛ржЦрзНржпрж╛</th>
                                                                      <th>ржЙржжрж╛рж╣рж░ржг</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>i (IGP)</td>
                                                                      <td>ржирж┐ржЬрзЗрж░ AS ржерзЗржХрзЗ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржШрзЛрж╖ржгрж╛</td>
                                                                      <td><code>network 100.10.0.0 mask 255.255.0.0</code></td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>e (EGP)</td>
                                                                      <td>EGP ржжрзНржмрж╛рж░рж╛ ржЖрж╕рж╛ (ржкрзБрж░рж╛рждржи)</td>
                                                                      <td>ржмрзНржпржмрж╣рзГржд рж╣рзЯ ржирж╛ рж╕рж╛ржзрж╛рж░ржгржд</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>? (Incomplete)</td>
                                                                      <td>рж░рж┐ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рж╛ рж░рзБржЯ, ржЙрзОрж╕ ржЕржЬрж╛ржирж╛</td>
                                                                      <td>OSPF ржерзЗржХрзЗ BGP рждрзЗ ржЖрж╕рж▓рзЗ</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>ЁЯУд LOCAL_PREF ржЙржжрж╛рж╣рж░ржг:</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Path</th>
                                                                      <th>LOCAL_PREF</th>
                                                                      <th>ржмрж╛ржЫрж╛ржЗ рж╣ржмрзЗ</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>AS200</td>
                                                                      <td>200</td>
                                                                      <td>тЬЕ (ржкржЫржирзНржжржирзАрзЯ)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>AS500</td>
                                                                      <td>150</td>
                                                                      <td>тЭМ</td>
                                                                  </tr>
                                                              </table>
                                                              <p>ржЙржЪрзНржЪ ржорж╛ржирзЗрж░ LOCAL_PREF рж╕ржм рж╕ржорзЯ ржмрзЗржЫрзЗ ржирзЗрзЯред</p>
                                                              
                                                              <h2>ЁЯП╖я╕П COMMUNITY ржЙржжрж╛рж╣рж░ржг:</h2>
                                                              <h3>ржЧрзНрж░рзБржкрж┐ржВ:</h3>
                                                              <pre><code>100:200 тЖТ ржорж╛ржирзЗ рж╣рж▓рзЛ AS100 ржерзЗржХрзЗ ржЖрж╕рж╛ ржПржмржВ рзирзжрзж ржирзАрждрж┐ржорж╛рж▓рж╛рзЯ ржкрзЬржмрзЗред</code></pre>
                                                              <h3>BGP Large Communities (RFC8092):</h3>
                                                              <pre><code>32-bit ASN:32-bit:32-bit
                                                              ржЙржжрж╛рж╣рж░ржг: 65000:100:200</code></pre>
                                                              
                                                              <h2>ЁЯЪк MED ржЙржжрж╛рж╣рж░ржг:</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>Path</th>
                                                                      <th>MED ржорж╛ржи</th>
                                                                      <th>ржкржЫржирзНржжржирзАрзЯ ржкрже</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>R1 тЖТ R3</td>
                                                                      <td>10</td>
                                                                      <td>тЬЕ</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>R2 тЖТ R4</td>
                                                                      <td>200</td>
                                                                      <td>тЭМ</td>
                                                                  </tr>
                                                              </table>
                                                              <p>ржирж┐ржорзНржи ржорж╛ржирзЗрж░ MED ржмрзЗрж╢рж┐ ржкрзНрж░рж╛ржзрж╛ржирзНржпред</p>
                                                              
                                                              <h2>тЪЩя╕П BGP Operation Flow (ржХрж╛ржЬрзЗрж░ ржзрж╛ржк):</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>ржзрж╛ржк</th>
                                                                      <th>ржмрзНржпрж╛ржЦрзНржпрж╛</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзз</td>
                                                                      <td>ржкрзНрж░рждрж┐ржмрзЗрж╢рзА ржерзЗржХрзЗ ржЖржкржбрзЗржЯ ржЧрзНрж░рж╣ржг (Inbound Updates)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзи</td>
                                                                      <td>BGP ржЯрзЗржмрж┐рж▓рзЗ рж╕ржВрж░ржХрзНрж╖ржг (BGP Table)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзй</td>
                                                                      <td>рж╕рзЗрж░рж╛ ржкрже ржирж┐рж░рзНржмрж╛ржЪржи (Best Path Selection)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзк</td>
                                                                      <td>рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ рж╕ржВржпрзЛржЬржи (Routing Table)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзл</td>
                                                                      <td>ржлрж░ржУрзЯрж╛рж░рзНржбрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ рж╕ржВржпрзЛржЬржи (Forwarding Table)</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзм</td>
                                                                      <td>ржЕржирзНржп BGP ржкрзНрж░рждрж┐ржмрзЗрж╢рзАрждрзЗ ржкрзНрж░рзЗрж░ржг (Outbound Updates)</td>
                                                                  </tr>
                                                              </table>
                                                              
                                                              <h2>тЬЕ BGP Best Path Selection (ржЙрждрзНрждржо ржкрже ржмрж╛ржЫрж╛ржЗрзЯрзЗрж░ ржзрж╛ржк):</h2>
                                                              <table>
                                                                  <tr>
                                                                      <th>ржХрзНрж░ржо</th>
                                                                      <th>ржирзАрждрж┐ржорж╛рж▓рж╛</th>
                                                                      <th>ржмрзНржпрж╛ржЦрзНржпрж╛</th>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзз</td>
                                                                      <td>Highest LOCAL_PREF</td>
                                                                      <td>рж╕рж░рзНржмрзЛржЪрзНржЪ Local Preference</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзи</td>
                                                                      <td>Locally originated route</td>
                                                                      <td>ржирж┐ржЬрзЗрж░ ржЙрзОржкрж╛ржжрж┐ржд рж░рзБржЯ</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзй</td>
                                                                      <td>Shortest AS_PATH</td>
                                                                      <td>ржХржо AS hop</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзк</td>
                                                                      <td>Lowest ORIGIN Code</td>
                                                                      <td>i < e < ?</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзл</td>
                                                                      <td>Lowest MED</td>
                                                                      <td>ржЫрзЛржЯ MED ржорж╛ржи</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзм</td>
                                                                      <td>eBGP over iBGP</td>
                                                                      <td>eBGP ржХрзЗ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзн</td>
                                                                      <td>Lowest IGP cost to NEXT_HOP</td>
                                                                      <td>IGP-рждрзЗ ржХржо ржЦрж░ржЪрзЗрж░ ржкрже</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзо</td>
                                                                      <td>Oldest eBGP route</td>
                                                                      <td>ржкрзБрж░ржирзЛ рж░рзБржЯ</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>рзп</td>
                                                                      <td>Lowest Router ID</td>
                                                                      <td>ржХржо Router ID</td>
                                                                  </tr>
                                                                  <tr>
                                                                      <td>ЁЯФЯ</td>
                                                                      <td>Lowest Neighbor IP</td>
                                                                      <td>ржХржо IP address</td>
                                                                  </tr>
                                                              </table>
         

                                                              
                                                              <h2>ЁЯФ╡ BGP Peer Group (ржмрж┐ржЬрж┐ржкрж┐ ржкрж┐рзЯрж╛рж░ ржЧрзНрж░рзБржк)</h2>
                                                              
                                                              <h3>ЁЯФ╢ рж╕ржорж╕рзНржпрж╛ (Problem):</h3>
                                                              <p>iBGP ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ ржПржХрж╛ржзрж┐ржХ рж░рж╛ржЙржЯрж╛рж░ ржерж╛ржХрж▓рзЗ, ржПржХржЗ ржЖржкржбрзЗржЯ ржмрж╛рж░ржмрж╛рж░ ржкрзНрж░рждрзНржпрзЗржХ ржирзЛржбрзЗрж░ ржЬржирзНржп рждрзИрж░рж┐ рж╣рзЯред<br>
                                                              ржПрждрзЗ CPU ржПрж░ ржЙржкрж░ ржЕржирж░рзНржержХ ржЪрж╛ржк ржкрзЬрзЗ, ржХрж╛рж░ржг ржПржХржЗ рж╣рж┐рж╕рж╛ржм ржмрж╛рж░ржмрж╛рж░ ржХрж░рж╛ рж╣рзЯред<br>
                                                              ржЕржержЪ рж╕ржм iBGP ржкрж┐рзЯрж╛рж░ ржПржХржЗ ржЖржкржбрзЗржЯ ржкрж╛рзЯ, ржорж╛ржирзЗ ржПржХржЗ рждржерзНржпред</p>
                                                              
                                                              <h3>ЁЯФ╢ рж╕ржорж╛ржзрж╛ржи (Solution):</h3>
                                                              <p>Peer Group рждрзИрж░рж┐ ржХрж░рж▓рзЗ:<br>
                                                              ржпрзЗрж╕ржм ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржПржХржЗ Outbound Policy, рждрж╛ржжрзЗрж░ ржПржХ ржЧрзНрж░рзБржкрзЗ рж░рж╛ржЦрж╛ ржпрж╛рзЯред<br>
                                                              ржПржХржмрж╛рж░ ржЖржкржбрзЗржЯ рждрзИрж░рж┐ ржХрж░рж▓рзЗржЗ, ржЧрзНрж░рзБржкрзЗрж░ рж╕ржм ржкрж┐рзЯрж╛рж░ рждрж╛ ржкрж╛ржмрзЗред<br>
                                                              ржПрждрзЗ CPU ржХржо ржЦрж░ржЪ рж╣рзЯ ржПржмржВ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рж╕рж╣ржЬ рж╣рзЯред</p>
                                                              
                                                              <h3>тЪЩя╕П Peer Group ржХрж╛ржЬрзЗрж░ ржирж┐рзЯржо:</h3>
                                                              <ul>
                                                                  <li>TCP рж╕рзЗрж╢ржи ржкрзНрж░рждрзНржпрзЗржХ ржкрж┐рзЯрж╛рж░рзЗрж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ рждрзИрж░рж┐ ржХрж░рждрзЗ рж╣рзЯред</li>
                                                                  <li>ржЧрзНрж░рзБржкрзЗ ржПржХржЗ Outbound Filter ржкрзНрж░ржпрзЛржЬрзНржп, ржХрж┐ржирзНрждрзБ Inbound Filter ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛ ржпрж╛рзЯред</li>
                                                              </ul>
                                                              
                                                              <h3>ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рж╕рж╣ржЬ:</h3>
                                                              <ol>
                                                                  <li>ржкрж┐рзЯрж╛рж░ ржЧрзНрж░рзБржк ржмрж╛ржирж╛ржУред</li>
                                                                  <li>ржЧрзНрж░рзБржкрзЗ ржкрж┐рзЯрж╛рж░ ржпрзЛржЧ ржХрж░рзЛред</li>
                                                                  <li>ржнржмрж┐рж╖рзНржпрждрзЗ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржмрзЬ рж╣рж▓рзЗ, рж╕рж╣ржЬрзЗ рж╕рзНржХрзЗрж▓ ржХрж░рж╛ ржпрж╛ржмрзЗред</li>
                                                              </ol>
                                                              
                                                              <h3>тЬЕ Best Practices:</h3>
                                                              <ul>
                                                                  <li>iBGP-рж░ ржЬржирзНржп рж╕ржмрж╕ржорзЯ Peer Group ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЛ, ржПржоржиржХрж┐ ржХржо ржкрж┐рзЯрж╛рж░ рж╣рж▓рзЗржУред</li>
                                                                  <li>eBGP-рж░ ржХрзНрж╖рзЗрждрзНрж░рзЗржУ peer-group ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржнрж╛рж▓рзЛ:
                                                                      <ul>
                                                                          <li>ржпржжрж┐ ржПржХржЗ AS ржПрж░ ржЕржирзЗржХ ржЧрзНрж░рж╛рж╣ржХ ржерж╛ржХрзЗ (RFC 2270)ред</li>
                                                                          <li>IXP-рждрзЗ (Internet Exchange Point), ржпрзЗржЦрж╛ржирзЗ ржкрж▓рж┐рж╕рж┐ ржПржХржЗ рж╣рзЯред</li>
                                                                      </ul>
                                                                  </li>
                                                              </ul>
                                                              
                                                              <h2>ЁЯФ╡ BGP Loop Prevention (рж░рж╛ржЙржЯрж┐ржВ рж▓рзБржк ржкрзНрж░рждрж┐рж░рзЛржз)</h2>
                                                              
                                                              <h3>ЁЯФ╢ eBGP-рждрзЗ рж▓рзБржк ржкрзНрж░рждрж┐рж░рзЛржз:</h3>
                                                              <p>AS_PATH ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржжрзЗржЦрзЗред<br>
                                                              ржпржжрж┐ ржирж┐ржЬрзЗрж░ AS ржиржорзНржмрж░ ржлрж┐рж░рзЗ ржЖрж╕рзЗ, рж▓рзБржк ржзрж░рж╛ ржкрзЬрзЗ, рж░рзБржЯ ржмрж╛рждрж┐рж▓ рж╣рзЯред</p>
                                                              
                                                              <h3>ЁЯФ╢ iBGP-рждрзЗ рж▓рзБржк ржкрзНрж░рждрж┐рж░рзЛржз:</h3>
                                                              <p>iBGP рж░рж╛ржЙржЯрж╛рж░ ржЕржирзНржп iBGP рж░рж╛ржЙржЯрж╛рж░ржХрзЗ iBGP ржерзЗржХрзЗ рж╢рзЗржЦрж╛ рж░рзБржЯ рж╢рзЗрзЯрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рзЗ ржирж╛ред<br>
                                                              рждрж╛ржЗ рж╕ржм iBGP рж░рж╛ржЙржЯрж╛рж░ ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯрзЗржб ржерж╛ржХрждрзЗ рж╣рзЯ (Full-Mesh)ред</p>
                                                              
                                                              <h3>тЪЩя╕П iBGP Full-Mesh рж╕рзНржХрзЗрж▓рж┐ржВ рж╕ржорж╕рзНржпрж╛:</h3>
                                                              <p>n(n-1)/2 рж╕рзЗрж╢ржи рж▓рж╛ржЧрзЗред<br>
                                                              ржпрзЗржоржи:<br>
                                                              рззрзж рж░рж╛ржЙржЯрж╛рж░ = рзкрзл рж╕рзЗрж╢ржи<br>
                                                              рззрзжрзж рж░рж╛ржЙржЯрж╛рж░ = рзкрзпрзлрзж рж╕рзЗрж╢ржи<br>
                                                              рж╕ржорж╛ржзрж╛ржи ржжрж░ржХрж╛рж░!</p>
                                                              
                                                              <h2>ЁЯФ╡ Route Reflector (RR) тАУ рж╕ржорж╛ржзрж╛ржи</h2>
                                                              
                                                              <h3>ЁЯФ╢ Route Reflector (RFC4456):</h3>
                                                              <p>RR-ржПрж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯрж░рж╛ рж╢рзБржзрзБ RR ржПрж░ рж╕рж╛ржерзЗ ржХрж╛ржирзЗржХрзНржЯрзЗржбред<br>
                                                              RR рж░рж╛ржЙржЯ ржкрзНрж░рждрж┐ржлрж▓рж┐ржд ржХрж░рзЗ (Reflect) ржЕржирзНржп ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржУ ржиржи-ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржжрзЗрж░ред<br>
                                                              ржПрждрзЗ рж╕ржм рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ рж╕рж░рж╛рж╕рж░рж┐ ржХрж╛ржирзЗржХрж╢ржирзЗрж░ ржжрж░ржХрж╛рж░ рж╣рзЯ ржирж╛ред<br>
                                                              ржПржХрж╛ржзрж┐ржХ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред</p>
                                                              
                                                              <h3>тЪЩя╕П RR ржХрж╛ржЬрзЗрж░ ржирж┐рзЯржо (ржЙржжрж╛рж╣рж░ржг рж╕рж╣):</h3>
                                                              <p>ржзрж░рж╛ ржпрж╛ржХ, AS 17821 ржП рж░рж╛ржЙржЯрж╛рж░ A, B, C, D ржЖржЫрзЗред C ржЖрж░ D рж╣рж▓рзЛ Route Reflectorред</p>
                                                              
                                                              <h3>тЬЕ RR ржХрзАржнрж╛ржмрзЗ ржЖржкржбрзЗржЯ ржкрж╛ржарж╛рзЯ:</h3>
                                                              <ul>
                                                                  <li>ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржерзЗржХрзЗ ржкрзЗрж▓рзЗ тЮбя╕П ржЕржирзНржп ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржУ ржиржи-ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржХрзЗ ржжрзЗрзЯред</li>
                                                                  <li>ржиржи-ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржерзЗржХрзЗ ржкрзЗрж▓рзЗ тЮбя╕П ржХрзЗржмрж▓ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржХрзЗ ржжрзЗрзЯред</li>
                                                                  <li>eBGP ржерзЗржХрзЗ ржкрзЗрж▓рзЗ тЮбя╕П ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржУ ржиржи-ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржЙржнрзЯржХрзЗржЗ ржжрзЗрзЯред</li>
                                                              </ul>
                                                              
                                                              <h2>ЁЯФ╡ RR рж▓рзБржк ржкрзНрж░рждрж┐рж░рзЛржз</h2>
                                                              
                                                              <h3>тЬЕ Originator_ID:</h3>
                                                              <p>RR ржХрзЛржи рж░рж╛ржЙржЯрж╛рж░ ржкрзНрж░ржержо рж░рзБржЯ ржкрж╛ржарж┐рзЯрзЗржЫрзЗ рж╕рзЗржЯрж╛ Originator_ID ржжрж┐рзЯрзЗ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзЗред<br>
                                                              ржирж┐ржЬрзЗрж░ ID ржжрзЗржЦрж▓рзЗ ржмрзБржЭржмрзЗ рж▓рзБржк рж╣рзЯрзЗржЫрзЗред</p>
                                                              
                                                              <h3>тЬЕ Cluster_List:</h3>
                                                              <p>ржХрзЛржи ржХрзЛржи ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ ржкрж╛рж░ рж╣рзЯрзЗржЫрзЗ, рждрж╛рж░ рж▓рж┐рж╕рзНржЯ рж░рж╛ржЦрзЗред<br>
                                                              ржпржжрж┐ ржирж┐ржЬрзЗрж░ Cluster_ID ржжрзЗржЦрждрзЗ ржкрж╛рзЯ, рж▓рзБржк рж╣рзЯрзЗржЫрзЗ, рж░рзБржЯ ржмрж╛рждрж┐рж▓ ржХрж░ржмрзЗред</p>
                                                              
                                                              <h2>ЁЯФ╡ RR ржбрж┐ржЬрж╛ржЗржи ржХрзМрж╢рж▓ (Best Practice)</h2>
                                                              
                                                              <h3>тЬЕ Cluster Design:</h3>
                                                              <p>AS-ржХрзЗ ржмрж┐ржнрж┐ржирзНржи ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗ ржнрж╛ржЧ ржХрж░рзЛред<br>
                                                              ржкрзНрж░рждрж┐ржЯрж╛ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗ:<br>
                                                              ржХржоржкржХрзНрж╖рзЗ рззржЯрж┐ RR, ржХрж┐ржЫрзБ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯред<br>
                                                              ржкрзНрж░рзЯрзЛржЬржирзЗ рззржЯрж┐рж░ ржмрзЗрж╢рж┐ RR (ржХрж┐ржирзНрждрзБ ржПржЯрж╛ рж╕рж╛ржзрж╛рж░ржгржд ржарж┐ржХ ржирж╛, ржЬржЯрж┐рж▓ рж╣рзЯ)ред<br>
                                                              ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗрж░ ржнрзЗрждрж░рзЗ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржжрзЗрж░ ржоржзрзНржпрзЗ ржкрж┐рзЯрж╛рж░рж┐ржВ ржкрзНрж░рзЯрзЛржЬржи ржирзЗржЗ, RR рж╕ржм рж░рзБржЯ ржкрж╛ржарж╛ржмрзЗред<br>
                                                              ржмрж┐ржнрж┐ржирзНржи ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗрж░ RR ржЧрзБрж▓рзЛ ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ ржкрзБрж░рзЛржкрзБрж░рж┐ ржорзЗрж╢ржбред</p>
                                                              
                                                              <h2>ЁЯФ╡ RR Example ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи (ржЙржжрж╛рж╣рж░ржг)</h2>
                                                              
                                                              <h3>тЬЕ RR рж░рж╛ржЙржЯрж╛рж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h3>
                                                              <pre>router bgp 17821
                                                              neighbor 2406:6400:2 remote-as 17821
                                                              neighbor 2406:6400:2 route-reflector-client
                                                              neighbor 2406:6400:3 remote-as 17821
                                                              neighbor 2406:6400:3 route-reflector-client
                                                              neighbor 2406:6400:4 remote-as 17821
                                                              neighbor 2406:6400:4 route-reflector-client</pre>
                                                              
                                                              <h3>тЬЕ RR Client ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h3>
                                                              <pre>router bgp 17821
                                                              neighbor 2406:6400:1 remote-as 17821</pre>
                                                              
                                                              <h2>ЁЯФ╡ RR Redundancy (рж░рж┐ржбрж╛ржирзНржбрзЗржирзНрж╕рж┐ ржмрж╛ ржмрзНржпрж╛ржХржЖржк)</h2>
                                                              
                                                              <h3>тЬЕ ржжрзБржЗржЯрж╛ ржЖрж▓рж╛ржжрж╛ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░:</h3>
                                                              <p>ржкрзНрж░рждрж┐ржЯрж╛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржжрзБржЗржЯрж╛ ржЖрж▓рж╛ржжрж╛ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗрж░ RR-рж░ рж╕рж╛ржерзЗ ржкрж┐рзЯрж╛рж░ ржХрж░рзЗред<br>
                                                              ржпрзЗржоржи:</p>
                                                              <pre>Cluster 1 -> RR1
                                                              Cluster 2 -> RR2</pre>
                                                              
                                                              <h3>тЬЕ Best Practice:</h3>
                                                              <p>ржПржХ ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗ ржжрзБржЗ RR ржирж╛ рж░рж╛ржЦрж╛ ржнрж╛рж▓рзЛ, ржмрж░ржВ ржнрж┐ржирзНржи ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ ржерзЗржХрзЗ ржкрж┐рзЯрж╛рж░ ржХрж░рзЛред<br>
                                                              рж╕ржм RR ржПрж░ ржоржзрзНржпрзЗ ржкрзБрж░рзЛржкрзБрж░рж┐ ржорзЗрж╢ржбред<br>
                                                              ржПрждрзЗ ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж░рж┐ржбрж╛ржирзНржбрзЗржирзНржЯ рж╣рзЯ, рж▓рзБржк рж░рзЛржз рж╣рзЯ, рж╕рзНржХрзЗрж▓ рж╕рж╣ржЬред</p>
                                                              
                                                              <h3>тЬЕ рж╕рж╛ржоржЧрзНрж░рж┐ржХ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржбрж┐ржЬрж╛ржЗржи: рж╣рж╛рзЯрж╛рж░рж╛рж░рзНржХрж┐ржХрзНржпрж╛рж▓ RR</h3>
                                                              <p>ржмрзЬ ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ рж╣рж╛рзЯрж╛рж░рж╛рж░рзНржХрж┐ржХрзНржпрж╛рж▓ Route Reflector ржбрж┐ржЬрж╛ржЗржи ржлрж▓рзЛ ржХрж░рзЛред<br>
                                                              ржЕрж░рзНржерж╛рзО, ржХрж┐ржЫрзБ RR ржЕржирзНржп ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗрж░ RR ржПрж░ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ рж╣рзЯред<br>
                                                              ржПрждрзЗ ржХржо рж╕рзЗрж╢ржи рж▓рж╛ржЧрзЗ, рж╕рж╣ржЬрзЗ рж╕рзНржХрзЗрж▓ рж╣рзЯред</p>
                                                              
                                                              <h3>ЁЯФС ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк ржбрж┐ржЬрж╛ржЗржи:</h3>
                                                              <pre>Cluster 1 -> RR1
                                                              Cluster 2 -> RR2
                                                              Cluster 3 -> RR3
                                                              Cluster 4 -> RR4
                                                              RR1, RR2, RR3, RR4 ржирж┐ржЬрзЗржжрзЗрж░ ржоржзрзНржпрзЗ ржХрж╛ржирзЗржХрзНржЯрзЗржбред</pre>
                                                              


                                                                  <h1>BGP Peer Group vs Route Reflector (RR)</h1>
                                                                  <table>
                                                                      <thead>
                                                                          <tr>
                                                                              <th>ржмрж┐рж╖рзЯ (Topic)</th>
                                                                              <th>BGP Peer Group</th>
                                                                              <th>Route Reflector (RR)</th>
                                                                          </tr>
                                                                      </thead>
                                                                      <tbody>
                                                                          <tr>
                                                                              <td>ржорзВрж▓ ржЙржжрзНржжрзЗрж╢рзНржп</td>
                                                                              <td>ржЖржкржбрзЗржЯ ржПржХржмрж╛рж░ рждрзИрж░рж┐ ржХрж░рзЗ ржПржХржЗ ржкрж▓рж┐рж╕рж┐рж░ ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржкрж╛ржарж╛ржирзЛ</td>
                                                                              <td>iBGP Full Mesh ржП рж╕рзАржорж╛ржмржжрзНржзрждрж╛ ржХрж╛ржЯрж┐рзЯрзЗ рж╕рзНржХрзЗрж▓рж┐ржВ рж╕рж╣ржЬ ржХрж░рж╛</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>ржпрзЗржЦрж╛ржирзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯ</td>
                                                                              <td>iBGP ржУ eBGP ржЙржнрзЯ ржХрзНрж╖рзЗрждрзНрж░рзЗржЗ, ржмрж┐рж╢рзЗрж╖ ржХрж░рзЗ ржПржХржЗ ржкрж▓рж┐рж╕рж┐рж░ ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржЬржирзНржп</td>
                                                                              <td>рж╢рзБржзрзБржорж╛рждрзНрж░ iBGP-рждрзЗ, Full Mesh ржП ржмрж┐ржХрж▓рзНржк рж╕ржорж╛ржзрж╛ржи</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>TCP Session</td>
                                                                              <td>ржкрзНрж░рждрж┐ржЯрж┐ ржкрж┐рзЯрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ TCP рж╕рзЗрж╢ржи рждрзИрж░рж┐ рж╣рзЯ</td>
                                                                              <td>ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржжрзЗрж░ рж╕рж╛ржерзЗ ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ TCP рж╕рзЗрж╢ржи, ржХрж┐ржирзНрждрзБ ржЕржирзНржпржжрзЗрж░ рж╕рж╛ржерзЗ ржкрзНрж░рзЯрзЛржЬржи ржирзЗржЗ</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>Routing Update ржкржжрзНржзрждрж┐</td>
                                                                              <td>ржПржХржмрж╛рж░ ржЖржкржбрзЗржЯ рждрзИрж░рж┐ рж╣рж▓рзЗ ржЧрзНрж░рзБржкрзЗрж░ рж╕ржм ржкрж┐рзЯрж╛рж░ ржкрж╛рзЯ</td>
                                                                              <td>RR ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржжрзЗрж░ ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ рж░рзБржЯ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ ржПржмржВ ржиржи-ржХрзНрж▓рж╛рзЯрзЗржирзНржЯржжрзЗрж░ ржкрзНрж░рждрж┐ржлрж▓рж┐ржд ржХрж░рзЗ (reflect)</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>Example (ржЙржжрж╛рж╣рж░ржг)</td>
                                                                              <td>
                                                                                  Peer Group: 3 ржЯрж╛ ржкрж┐рзЯрж╛рж░ ржЖржЫрзЗ ржпрж╛ржжрзЗрж░ ржПржХржЗ Outbound Policy:<br>
                                                                                  <pre>
                                                              neighbor 1.1.1.1 peer-group PEER1
                                                              neighbor 2.2.2.2 peer-group PEER1
                                                              neighbor 3.3.3.3 peer-group PEER1
                                                                                  </pre>
                                                                              </td>
                                                                              <td>
                                                                                  RR: RR ржПржмржВ рзйржЯрж┐ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯ:<br>
                                                                                  <pre>
                                                              neighbor 1.1.1.1 route-reflector-client
                                                              neighbor 2.2.2.2 route-reflector-client
                                                              neighbor 3.3.3.3 route-reflector-client
                                                                                  </pre>
                                                                              </td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рж╕рж╣ржЬ ржХрж░рзЗ?</td>
                                                                              <td>тЬЕ рж╣рзНржпрж╛ржБ, ржПржХржЗ ржзрж░ржирзЗрж░ ржкрж▓рж┐рж╕рж┐ рж╣рж▓рзЗ ржмрж╛рж░ржмрж╛рж░ рж▓рж┐ржЦрждрзЗ рж╣рзЯ ржирж╛</td>
                                                                              <td>тЬЕ рж╣рзНржпрж╛ржБ, ржХрж╛рж░ржг Full Mesh ржкрзНрж░рзЯрзЛржЬржи рж╣рзЯ ржирж╛</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>Loop Prevention ржХрж┐ржнрж╛ржмрзЗ?</td>
                                                                              <td>N/A (Loop рж░рзЛржзрзЗрж░ ржЬржирзНржп ржирзЯ)</td>
                                                                              <td>Originator_ID ржУ Cluster_List ржжрж┐рзЯрзЗ рж▓рзБржк ржЪрж┐рж╣рзНржирж┐ржд ржУ ржкрзНрж░рждрж┐рж░рзЛржз</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>CPU Efficiency (ржжржХрзНрж╖рждрж╛)</td>
                                                                              <td>тЬЕ рж╣рзНржпрж╛ржБ, ржПржХржмрж╛рж░ ржЖржкржбрзЗржЯ рждрзИрж░рж┐ рж╣рзЯ, ржЧрзНрж░рзБржкрзЗрж░ рж╕ржмрж╛ржЗ ржкрж╛рзЯ</td>
                                                                              <td>тЬЕ рж╣рзНржпрж╛ржБ, ржХрж╛рж░ржг рж╕ржм рж░рж╛ржЙржЯрж╛рж░ржХрзЗ ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ ржЖржкржбрзЗржЯ ржкрж╛ржарж╛рждрзЗ рж╣рзЯ ржирж╛</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>ржЙржжрзНржжрзЗрж╢рзНржп ржЕржирзБржпрж╛рзЯрзА Best Practice</td>
                                                                              <td>рж╕ржм iBGP ржкрж┐рзЯрж╛рж░рзЗрж░ ржЬржирзНржп Peer Group ржХрж░рж╛ ржнрж╛рж▓рзЛ</td>
                                                                              <td>ржмрзЬ iBGP ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ Route Reflector ржкрзНрж░рзЯрзЛржЬржи, ржиржЗрж▓рзЗ Full Mesh ржЕржирзЗржХ рж╕рзЗрж╢ржи рж▓рж╛ржЧрзЗ</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>рж╕рзНржХрзЗрж▓рж┐ржВ рж╕ржорж╕рзНржпрж╛ рж╕ржорж╛ржзрж╛ржи ржХрж░рзЗ?</td>
                                                                              <td>тЭМ ржирж╛, рж╢рзБржзрзБ ржХржиржлрж┐ржЧ рж╕рж╣ржЬ ржХрж░рзЗ, Full Mesh ржХржорж╛рзЯ ржирж╛</td>
                                                                              <td>тЬЕ рж╣рзНржпрж╛ржБ, Full Mesh ржПрж░ ржмрж┐ржХрж▓рзНржк, ржмрзЬ ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рж╣ржЬрзЗ рж╕рзНржХрзЗрж▓ рж╣рзЯ</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>Redundancy (ржмрзНржпрж╛ржХржЖржк)</td>
                                                                              <td>ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ ржХрж░рждрзЗ рж╣рзЯ, ржЧрзНрж░рзБржк рж▓рзЗржнрзЗрж▓рзЗ рж░рж┐ржбрж╛ржирзНржбрзЗржирзНрж╕рж┐ ржирж╛ржЗ</td>
                                                                              <td>тЬЕ ржПржХрж╛ржзрж┐ржХ RR рж░рж╛ржЦрж╛ ржпрж╛рзЯ ржнрж┐ржирзНржи ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░рзЗ, ржмрзНржпрж╛ржХржЖржк рж╣рж┐рж╕рзЗржмрзЗ</td>
                                                                          </tr>
                                                                      </tbody>
                                                                  </table>
                                                              
                                                                  <h2>ржЙржжрж╛рж╣рж░ржг ржжрж┐рзЯрзЗ ржкрж░рж┐рж╖рзНржХрж╛рж░ ржХрж░рж╛ ржпрж╛ржХ:</h2>
                                                                  <h3>ржЙржжрж╛рж╣рж░ржг рзз: BGP Peer Group</h3>
                                                                  <p>ржзрж░рзЛ, рзйржЯрж╛ iBGP ржкрж┐рзЯрж╛рж░ ржЖржЫрзЗ (R1, R2, R3), ржпрж╛ржжрзЗрж░ ржПржХржЗ Outbound Policyред</p>
                                                                  <pre>
                                                              router bgp 65000
                                                              neighbor PEER-GROUP peer-group
                                                              neighbor PEER-GROUP remote-as 65000
                                                              neighbor PEER-GROUP route-reflector-client
                                                              
                                                              neighbor 192.168.1.1 peer-group PEER-GROUP
                                                              neighbor 192.168.1.2 peer-group PEER-GROUP
                                                              neighbor 192.168.1.3 peer-group PEER-GROUP
                                                                  </pre>
                                                                  <p>тЮбя╕П ржПржЦрж╛ржирзЗ PEER-GROUP ржбрзЗржлрж╛ржЗржи ржХрж░рзЗ рж╕ржмрж╛ржЗржХрзЗ ржПржХржЗ ржЖржкржбрзЗржЯ ржжрзЗржУрзЯрж╛ рж╣ржЪрзНржЫрзЗред</p>
                                                              
                                                                  <h3>ржЙржжрж╛рж╣рж░ржг рзи: Route Reflector (RR)</h3>
                                                                  <p>ржзрж░рзЛ, R1 рж╣рж▓рзЛ RR, ржЖрж░ R2, R3, R4 рж╣рж▓рзЛ ржХрзНрж▓рж╛рзЯрзЗржирзНржЯред</p>
                                                                  <pre>
                                                              router bgp 65000
                                                              neighbor 192.168.1.2 remote-as 65000
                                                              neighbor 192.168.1.2 route-reflector-client
                                                              neighbor 192.168.1.3 remote-as 65000
                                                              neighbor 192.168.1.3 route-reflector-client
                                                              neighbor 192.168.1.4 remote-as 65000
                                                              neighbor 192.168.1.4 route-reflector-client
                                                                  </pre>
                                                                  <p>тЮбя╕П ржПржЦрж╛ржирзЗ R1 ржерзЗржХрзЗ R2, R3, R4 рж╕ржмрж╛ржЗ ржЖржкржбрзЗржЯ ржкрж╛ржмрзЗ, ржХрж┐ржирзНрждрзБ рждрж╛рж░рж╛ ржирж┐ржЬрзЗржжрзЗрж░ ржоржзрзНржпрзЗ ржХрж╛ржирзЗржХрзНржЯрзЗржб ржирж╛ рж╣рж▓рзЗржУ ржЪрж▓ржмрзЗред</p>
                                                              
                                                                  <h2>ржЙржкрж╕ржВрж╣рж╛рж░ (Summary):</h2>
                                                                  <table>
                                                                      <thead>
                                                                          <tr>
                                                                              <th>ржХрж╛ржЬ</th>
                                                                              <th>Peer Group</th>
                                                                              <th>Route Reflector (RR)</th>
                                                                          </tr>
                                                                      </thead>
                                                                      <tbody>
                                                                          <tr>
                                                                              <td>ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рж╕рж╣ржЬ ржХрж░рзЗ?</td>
                                                                              <td>тЬЕ</td>
                                                                              <td>тЬЕ</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>рж╕рзНржХрзЗрж▓рж┐ржВ рж╕рж╣ржЬ ржХрж░рзЗ?</td>
                                                                              <td>тЭМ (Full mesh ржерж╛ржХрзЗ)</td>
                                                                              <td>тЬЕ (Full mesh ржПрж░ ржжрж░ржХрж╛рж░ ржирж╛ржЗ)</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>Loop ржкрзНрж░рждрж┐рж░рзЛржз ржХрж░рзЗ?</td>
                                                                              <td>тЭМ</td>
                                                                              <td>тЬЕ (Originator_ID, Cluster_List)</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>рж░рж┐ржбрж╛ржирзНржбрзЗржирзНрж╕рж┐ рж╕рж╣ржЬ?</td>
                                                                              <td>тЭМ</td>
                                                                              <td>тЬЕ (ржмрж┐ржнрж┐ржирзНржи RR ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░)</td>
                                                                          </tr>
                                                                          <tr>
                                                                              <td>CPU Optimization?</td>
                                                                              <td>тЬЕ</td>
                                                                              <td>тЬЕ</td>
                                                                          </tr>
                                                                      </tbody>
                                                                  </table>
                                                         

                                                              


                                                                  <h2>BGP Configuration Table</h2>
                                                                  
                                                                  <table>
                                                                    <tr>
                                                                      <th>BR1</th>
                                                                      <th>PR1</th>
                                                                      <th>AR1</th>
                                                                      <th>BR2</th>
                                                                      <th>PR2</th>
                                                                      <th>AR2</th>
                                                                      <th>BR3</th>
                                                                      <th>PR3</th>
                                                                      <th>AR3</th>
                                                                      <th>BR4</th>
                                                                      <th>PR4</th>
                                                                      <th>AR4</th>
                                                                    </tr>
                                                                    <tr>
                                                                      <td>
                                                                        <pre>router bgp 10
                                                                  neighbor 172.16.10.1 remote-as 100
                                                                  neighbor 172.16.10.1 description TR1
                                                                  neighbor 172.16.20.1 remote-as 200
                                                                  neighbor 172.16.20.1 description TR2
                                                                  address-family ipv4 unicast
                                                                  neighbor 172.16.10.1 activate
                                                                  neighbor 172.16.20.1 activate
                                                                  exit
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 10
                                                                  no bgp enforce-first-as
                                                                  neighbor 192.168.65.254 remote-as 65500
                                                                  neighbor 192.168.65.254 description IXP
                                                                  neighbor 10.0.0.2 remote-as 20
                                                                  neighbor 10.0.0.2 description ISP2
                                                                  address-family ipv4 unicast
                                                                  neighbor 192.168.65.254 activate
                                                                  neighbor 192.168.65.254 remove-private-as
                                                                  neighbor 10.0.0.2 activate
                                                                  neighbor 10.0.0.2 remove-private-as
                                                                  exit
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 10
                                                                  neighbor 10.10.2.2 remote-as 12
                                                                  neighbor 10.10.2.2 description CUST12
                                                                  address-family ipv4 unicast
                                                                  neighbor 10.10.2.2 activate
                                                                  neighbor 10.10.2.2 prefix-list PL-CUST12-IN in
                                                                  neighbor 10.10.2.2 send-community
                                                                  neighbor 10.10.2.2 remove-private-as
                                                                  exit
                                                                  exit
                                                                  ip prefix-list PL-CUST12-IN permit 192.168.12.0/23 le 24
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 20
                                                                  neighbor 172.16.10.5 remote-as 100
                                                                  neighbor 172.16.10.5 description TR1
                                                                  neighbor 172.16.20.5 remote-as 200
                                                                  neighbor 172.16.20.5 description TR2
                                                                  address-family ipv4 unicast
                                                                  neighbor 172.16.10.5 activate
                                                                  neighbor 172.16.20.5 activate
                                                                  exit
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 20
                                                                  no bgp enforce-first-as
                                                                  neighbor 192.168.65.254 remote-as 65500
                                                                  neighbor 192.168.65.254 description IXP
                                                                  neighbor 10.0.0.1 remote-as 10
                                                                  neighbor 10.0.0.1 description ISP1
                                                                  address-family ipv4 unicast
                                                                  neighbor 192.168.65.254 activate
                                                                  neighbor 192.168.65.254 remove-private-as
                                                                  neighbor 10.0.0.1 remove-private-as
                                                                  neighbor 10.0.0.1 activate
                                                                  exit
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 20
                                                                  neighbor 10.20.2.2 remote-as 12
                                                                  neighbor 10.20.2.2 description CUST12
                                                                  address-family ipv4 unicast
                                                                  neighbor 10.20.2.2 activate
                                                                  neighbor 10.20.2.2 prefix-list PL-CUST12-IN in
                                                                  neighbor 10.20.2.2 send-community
                                                                  neighbor 10.20.2.2 remove-private-as
                                                                  exit
                                                                  exit
                                                                  ip prefix-list PL-CUST12-IN permit 192.168.12.0/23 le 24
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 30
                                                                  neighbor 172.16.10.9 remote-as 100
                                                                  neighbor 172.16.10.9 description TR1
                                                                  neighbor 172.16.20.9 remote-as 200
                                                                  neighbor 172.16.20.9 description TR2
                                                                  address-family ipv4 unicast
                                                                  neighbor 172.16.10.9 activate
                                                                  neighbor 172.16.20.9 activate
                                                                  exit
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 30
                                                                  no bgp enforce-first-as
                                                                  neighbor 192.168.65.254 remote-as 65500
                                                                  neighbor 192.168.65.254 description IXP
                                                                  neighbor 10.0.0.2 remote-as 40
                                                                  neighbor 10.0.0.2 description ISP4
                                                                  address-family ipv4 unicast
                                                                  neighbor 192.168.65.254 remove-private-as
                                                                  neighbor 10.0.0.2 remove-private-as
                                                                  neighbor 192.168.65.254 activate
                                                                  neighbor 10.0.0.2 activate
                                                                  exit
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 30
                                                                  neighbor 10.30.2.2 remote-as 34
                                                                  neighbor 10.30.2.2 description CUST34
                                                                  address-family ipv4 unicast
                                                                  neighbor 10.30.2.2 activate
                                                                  neighbor 10.30.2.2 prefix-list PL-CUST34-IN in
                                                                  neighbor 10.30.2.2 send-community
                                                                  neighbor 10.30.2.2 remove-private-as
                                                                  exit
                                                                  exit
                                                                  ip prefix-list PL-CUST34-IN permit 192.168.34.0/23 le 24
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 40
                                                                  neighbor 172.16.10.13 remote-as 100
                                                                  neighbor 172.16.10.13 description TR1
                                                                  neighbor 172.16.20.13 remote-as 200
                                                                  neighbor 172.16.20.13 description TR2
                                                                  address-family ipv4 unicast
                                                                  neighbor 172.16.10.13 activate
                                                                  neighbor 172.16.20.13 activate
                                                                  exit
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 40
                                                                  no bgp enforce-first-as
                                                                  neighbor 192.168.65.254 remote-as 65500
                                                                  neighbor 192.168.65.254 description IXP
                                                                  neighbor 10.0.0.1 remote-as 30
                                                                  neighbor 10.0.0.1 description ISP3
                                                                  address-family ipv4 unicast
                                                                  neighbor 192.168.65.254 remove-private-as
                                                                  neighbor 10.0.0.1 remove-private-as
                                                                  neighbor 192.168.65.254 activate
                                                                  neighbor 10.0.0.1 activate
                                                                  exit
                                                                  exit</pre>
                                                                      </td>
                                                                      <td>
                                                                        <pre>router bgp 40
                                                                  neighbor 10.40.2.2 remote-as 34
                                                                  neighbor 10.40.2.2 description CUST34
                                                                  address-family ipv4 unicast
                                                                  neighbor 10.40.2.2 activate
                                                                  neighbor 10.40.2.2 prefix-list PL-CUST34-IN in
                                                                  neighbor 10.40.2.2 send-community
                                                                  neighbor 10.40.2.2 remove-private-as
                                                                  exit
                                                                  exit
                                                                  ip prefix-list PL-CUST34-IN permit 192.168.34.0/23 le 24
                                                                  exit</pre>
                                                                      </td>
                                                                    </tr>
                                                                  </table>

 
                                                                  
                                                                  <h1>BGP ржкрж▓рж┐рж╕рж┐ ржирж┐рзЯржирзНрждрзНрж░ржг (BGP Policy Control)</h1>
                                                                  
                                                                  <h2>рзз. BGP ржирзАрждрж┐ржорж╛рж▓рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржЖржкржбрзЗржЯ ржирж┐рзЯржирзНрждрзНрж░ржг:</h2>
                                                                  <ul>
                                                                      <li><b>ржЗржиржмрж╛ржЙржирзНржб ржЖржкржбрзЗржЯ:</b> ржкрж┐рзЯрж╛рж░ (Peer) ржерзЗржХрзЗ ржЖрж╕рж╛ ржЖржкржбрзЗржЯред</li>
                                                                      <li><b>ржЖржЙржЯржмрж╛ржЙржирзНржб ржЖржкржбрзЗржЯ:</b> ржкрж┐рзЯрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржирзЛ ржЖржкржбрзЗржЯ (Best Paths)ред</li>
                                                                      <li>рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓ (Routing Table), BGP ржЯрзЗржмрж┐рж▓, ржлрж┐рж▓рзНржЯрж╛рж░ (ржирзАрждрж┐ржорж╛рж▓рж╛/Policy)ред</li>
                                                                  </ul>
                                                                  
                                                                  <h2>рзи. ржирзАрждрж┐ржорж╛рж▓рж╛рж░ ржорж╛ржзрзНржпржорзЗ Prefix ржирж┐рж░рзНржмрж╛ржЪржи:</h2>
                                                                  <ul>
                                                                      <li>Prefix list ржжрж┐рзЯрзЗ ржорж┐рж▓рж┐рзЯрзЗ ржжрзЗржЦрж╛ред</li>
                                                                      <li>AS path filter ржжрж┐рзЯрзЗ ржорж┐рж▓рж┐рзЯрзЗ ржжрзЗржЦрж╛ред</li>
                                                                      <li>Community tag filter ржжрж┐рзЯрзЗ ржорж┐рж▓рж┐рзЯрзЗ ржжрзЗржЦрж╛ред</li>
                                                                  </ul>
                                                                  
                                                                  <h2>рзй. ржирзАрждрж┐ржорж╛рж▓рж╛рж░ ржорж╛ржзрзНржпржорзЗ Attribute рж╕рзЗржЯрж┐ржВ:</h2>
                                                                  <ul>
                                                                      <li>AS path ржкрж░рж┐ржмрж░рзНрждржи (Prepend ржХрж░рж╛)ред</li>
                                                                      <li>Local Preference ржорж╛ржи ржирж┐рж░рзНржзрж╛рж░ржгред</li>
                                                                      <li>MED ржорж╛ржи ржирж┐рж░рзНржзрж╛рж░ржгред</li>
                                                                      <li>Community tag ржпрзЛржЧ/ржЕржкрж╕рж╛рж░ржгред</li>
                                                                  </ul>
                                                                  
                                                                  <h2>рзк. Attribute ржжрзНржмрж╛рж░рж╛ ржЯрзНрж░рж╛ржлрж┐ржХ ржирж┐рзЯржирзНрждрзНрж░ржг:</h2>
                                                                  <ul>
                                                                      <li><b>ржЗржиржмрж╛ржЙржирзНржб ржЯрзНрж░рж╛ржлрж┐ржХ:</b> AS Path, MED, Community tagред</li>
                                                                      <li><b>ржЖржЙржЯржмрж╛ржЙржирзНржб ржЯрзНрж░рж╛ржлрж┐ржХ:</b> Local Preferenceред</li>
                                                                  </ul>
                                                                  
                                                                  <h2>рзл. Prefix List:</h2>
                                                                  <ul>
                                                                      <li>ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Prefix ржмрж╛ Prefix-ржПрж░ ржкрж░рж┐рж╕рж░ ржирж┐рж░рзНржмрж╛ржЪржиред</li>
                                                                      <li>IRRToolSet, bgpq3 ржжрж┐рзЯрзЗ рждрзИрж░рж┐ред</li>
                                                                  </ul>
                                                                  
                                                                  <h2>рзм. Prefix List Filter (IOS):</h2>
                                                                  <pre>ip prefix-list TEST permit 0.0.0.0/0 ge 8 le 24</pre>
                                                                  <pre>ipv6 prefix-list TEST-v6 permit 2001:6400::/32 le 48</pre>
                                                                  <pre>ip prefix-list TEST deny 0.0.0.0/0</pre>
                                                                  
                                                                  <h2>рзн. AS Path Filter:</h2>
                                                                  <ul>
                                                                      <li>ржмрзЬ Prefix List-ржПрж░ ржмрж┐ржХрж▓рзНржкред</li>
                                                                      <li>Regular Expressions:</li>
                                                                  </ul>
                                                                  <pre>
                                                                  ^$  рж╕рзНржерж╛ржирзАрзЯржнрж╛ржмрзЗ рждрзИрж░рж┐
                                                                  _100$  AS 100 ржерзЗржХрзЗ ржЖржЧржд
                                                                  _100_200_  100 ржУ 200 рж╣рзЯрзЗ ржЧрзЗржЫрзЗ
                                                                  </pre>
                                                                  
                                                                  <h2>рзо. Community Access List:</h2>
                                                                  <ul>
                                                                      <li>Prefix ржирж┐рж░рзНржмрж╛ржЪржи ржУ ржЪрж┐рж╣рзНржирж┐рждржХрж░ржгрзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГрждред</li>
                                                                  </ul>
                                                                  
                                                                  <h2>рзп. ржирзАрждрж┐ржорж╛рж▓рж╛рж░ рж╕ржоржирзНржмрзЯ:</h2>
                                                                  <ul>
                                                                      <li>Route-map (IOS), Policy-statement (Junos), Route-policy (Huawei)ред</li>
                                                                  </ul>
                                                                  
                                                                  <h2>рззрзж. Route-map (IOS):</h2>
                                                                  <pre>
                                                                  route-map AS-OUT permit 10
                                                                  set as-path prepend 17821 17821 17821
                                                                  
                                                                  route-map LP-IN permit 10
                                                                  match as-path 1
                                                                  set local-preference 150
                                                                  </pre>
                                                                  
                                                                  <h2>рззрзз. Policy Filter ржкрзНрж░рзЯрзЛржЧ:</h2>
                                                                  <ul>
                                                                      <li>ржЗржиржмрж╛ржЙржирзНржб/ржЖржЙржЯржмрж╛ржЙржирзНржб ржЖржкржбрзЗржЯ ржирж┐рзЯржирзНрждрзНрж░ржгред</li>
                                                                      <li>Hard Reset/Soft Reset (Route Refresh)ред</li>
                                                                  </ul>
                                                                  
                                                                  <h2>рззрзи. Hard Reset:</h2>
                                                                  <pre>
                                                                  clear ip bgp *
                                                                  clear ip bgp &lt;peer-address&gt;
                                                                  </pre>
                                                                  
                                                                  <h2>рззрзй. Route Refresh:</h2>
                                                                  <pre>
                                                                  clear ip bgp &lt;peer-address&gt; [soft] in
                                                                  clear bgp ipv6 unicast &lt;peer-address&gt; [soft] in
                                                                  </pre>
                                                                  
                                                                  <h2>рззрзк. Soft Reconfiguration:</h2>
                                                                  <ul>
                                                                      <li>Route Refresh рж╕рж╛ржкрзЛрж░рзНржЯ ржирж╛ ржХрж░рж▓рзЗред</li>
                                                                      <li>ржЗржиржмрж╛ржЙржирзНржб ржЖржкржбрзЗржЯрзЗрж░ ржХржкрж┐ ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ рж╕ржВрж░ржХрзНрж╖ржгред</li>
                                                                  </ul>
                                                                  <pre>
                                                                  router bgp 17821
                                                                  neighbor 1.1.1.1 remote-as 100
                                                                  neighbor 1.1.1.1 route-map SET-LPREF in
                                                                  neighbor 1.1.1.1 soft-reconfiguration inbound
                                                                  clear ip bgp 1.1.1.1 soft [in|out]
                                                                  </pre>
                                                                  
                                                                  <h2>тЬЕ ржЙржкрж╕ржВрж╣рж╛рж░:</h2>
                                                                  <p>
                                                                      BGP ржирзАрждрж┐ржорж╛рж▓рж╛ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛рзЯ prefix ржирж┐рж░рзНржмрж╛ржЪржи, рж░рзБржЯрж┐ржВ ржХржирзНржЯрзНрж░рзЛрж▓, ржПржмржВ ржЯрзНрж░рж╛ржлрж┐ржХ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рж╛ ржпрж╛рзЯред Prefix List, AS path, Community, Route-map ржжрж┐рзЯрзЗ ржЖржкржбрзЗржЯ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рзЗред ржкрзНрж░рзЯрзЛржЬржирзЗ Hard/Soft Reset ржмрж╛ Route Refresh ржХрж░рзЗ ржирждрзБржи ржирзАрждрж┐ржорж╛рж▓рж╛ ржХрж╛рж░рзНржпржХрж░ ржХрж░рж╛ ржпрж╛рзЯред
                                                                  </p>
                                                                  
                                                                  <h3>Acknowledgement:</h3>
                                                                  <ul>
                                                                      <li>Philip Smith</li>
                                                                      <li>Cisco Systems</li>
                                                                  </ul>
                                                                  

                                                                      <h1>BGP Policy Control</h1>
                                                                  
                                                                      <h2>рзз. BGP ржирзАрждрж┐ржорж╛рж▓рж╛рж░ ржорж╛ржзрзНржпржорзЗ ржЖржкржбрзЗржЯ ржирж┐рзЯржирзНрждрзНрж░ржг:</h2>
                                                                      <p>BGP ржПрж░ ржЕржнрзНржпржирзНрждрж░рзАржг ржХрж╛рж░рзНржпржкрзНрж░ржгрж╛рж▓рзА:</p>
                                                                      <ul>
                                                                          <li><strong>ржЗржиржмрж╛ржЙржирзНржб (Inbound) ржЖржкржбрзЗржЯ:</strong> ржкрж┐рзЯрж╛рж░ (Peer) ржерзЗржХрзЗ ржЖрж╕рж╛ ржЖржкржбрзЗржЯред</li>
                                                                          <li><strong>ржЖржЙржЯржмрж╛ржЙржирзНржб (Outbound) ржЖржкржбрзЗржЯ:</strong> ржкрж┐рзЯрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржирзЛ ржЖржкржбрзЗржЯ (рж╢рзНрж░рзЗрж╖рзНржа ржкрже ржмрж╛ Best Paths)ред</li>
                                                                          <li><strong>рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓ (Routing Table) ржПржмржВ BGP ржЯрзЗржмрж┐рж▓:</strong> ржпрзЗржЦрж╛ржирзЗ рж╕ржм рж░рзБржЯ ржЬржорж╛ ржерж╛ржХрзЗред</li>
                                                                          <li><strong>ржлрж┐рж▓рзНржЯрж╛рж░ (ржирзАрждрж┐ржорж╛рж▓рж╛/Policy):</strong> ржХрзЛржи рж░рзБржЯ ржЧрзНрж░рж╣ржг/ржкрзНрж░рзЗрж░ржг ржХрж░рж╛ рж╣ржмрзЗ рждрж╛ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рзЗред</li>
                                                                      </ul>
                                                                  
                                                                      <h2>рзи. ржирзАрждрж┐ржорж╛рж▓рж╛рж░ ржорж╛ржзрзНржпржорзЗ Prefix ржирж┐рж░рзНржмрж╛ржЪржи:</h2>
                                                                      <ul>
                                                                          <li>Prefix list ржжрж┐рзЯрзЗ ржорж┐рж▓рж┐рзЯрзЗ ржжрзЗржЦрж╛ред</li>
                                                                          <li>AS path filter ржжрж┐рзЯрзЗ ржорж┐рж▓рж┐рзЯрзЗ ржжрзЗржЦрж╛ред</li>
                                                                          <li>Community tag filter ржжрж┐рзЯрзЗ ржорж┐рж▓рж┐рзЯрзЗ ржжрзЗржЦрж╛ред</li>
                                                                          <li>ржЙржкрж░рзЛржХрзНржд ржпрзЗржХрзЛржирзЛ ржПржХржЯрж┐рж░ ржмрж╛ ржПржХрж╛ржзрж┐ржХрзЗрж░ рж╕ржоржирзНржмрзЯрзЗред</li>
                                                                      </ul>
                                                                  
                                                                      <h2>рзй. ржирзАрждрж┐ржорж╛рж▓рж╛рж░ ржорж╛ржзрзНржпржорзЗ Attribute рж╕рзЗржЯрж┐ржВ:</h2>
                                                                      <ul>
                                                                          <li>AS path ржкрж░рж┐ржмрж░рзНрждржи (Prepend ржХрж░рж╛)ред</li>
                                                                          <li>Local Preference ржорж╛ржи ржирж┐рж░рзНржзрж╛рж░ржгред</li>
                                                                          <li>MED ржорж╛ржи ржирж┐рж░рзНржзрж╛рж░ржгред</li>
                                                                          <li>Community tag ржпрзЛржЧ/ржЕржкрж╕рж╛рж░ржгред</li>
                                                                      </ul>
                                                                  
                                                                      <h2>рзк. Attribute ржжрзНржмрж╛рж░рж╛ ржЯрзНрж░рж╛ржлрж┐ржХ ржирж┐рзЯржирзНрждрзНрж░ржг:</h2>
                                                                      <ul>
                                                                          <li><strong>ржЗржиржмрж╛ржЙржирзНржб ржЯрзНрж░рж╛ржлрж┐ржХ (ржкрзНрж░ржмрзЗрж╢):</strong> AS Path, MED, Community tagред</li>
                                                                          <li><strong>ржЖржЙржЯржмрж╛ржЙржирзНржб ржЯрзНрж░рж╛ржлрж┐ржХ (ржкрзНрж░рж╕рзНржерж╛ржи):</strong> Local Preferenceред</li>
                                                                      </ul>
                                                                  
                                                                      <h2>рзл. Prefix List:</h2>
                                                                      <ul>
                                                                          <li>ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Prefix ржмрж╛ Prefix-ржПрж░ ржкрж░рж┐рж╕рж░ ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рждрзЗ ржмрзНржпржмрж╣рзГрждред</li>
                                                                          <li>Aggregates ржПржмржВ Sub-aggregates ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рж╛ ржпрж╛рзЯред</li>
                                                                          <li>Internet Routing Registry (IRR)-ржПрж░ рждржерзНржп ржерзЗржХрзЗ рждрзИрж░рж┐ ржХрж░рж╛ ржпрж╛рзЯ: IRRToolSet (rtconfig), bgpq3 ржЗрждрзНржпрж╛ржжрж┐ ржЯрзБрж▓ ржжрж┐рзЯрзЗред</li>
                                                                      </ul>
                                                                  
                                                                      <h2>рзм. Prefix List Filter (IOS):</h2>
                                                                      <h3>ржЙржжрж╛рж╣рж░ржг рзз:</h3>
                                                                      <p>ржпрзЗржХрзЛржирзЛ Prefix ржпрзЗржЧрзБрж▓рзЛрж░ ржжрзИрж░рзНржШрзНржп рзо ржерзЗржХрзЗ рзирзк ржПрж░ ржоржзрзНржпрзЗред</p>
                                                                      <pre>ip prefix-list TEST permit 0.0.0.0/0 ge 8 le 24</pre>
                                                                  
                                                                      <h3>ржЙржжрж╛рж╣рж░ржг рзи:</h3>
                                                                      <p>IPv6: 2400:6400::/32 ржерзЗржХрзЗ /48 ржкрж░рзНржпржирзНржд ржЕржирзБржорзЛржжржиред</p>
                                                                      <pre>ipv6 prefix-list TEST-v6 permit 2001:6400::/32 le 48</pre>
                                                                  
                                                                      <h3>ржЙржжрж╛рж╣рж░ржг рзй:</h3>
                                                                      <p>Default route ржирж┐рж╖рж┐ржжрзНржзред</p>
                                                                      <pre>ip prefix-list TEST deny 0.0.0.0/0</pre>
                                                                  
                                                                      <h3>ржЙржжрж╛рж╣рж░ржг рзк:</h3>
                                                                      <p>IPv6 Default route ржирж┐рж╖рж┐ржжрзНржзред</p>
                                                                      <pre>ipv6 prefix-list TEST-v6 deny ::/0</pre>
                                                                  
                                                                      <h2>рзн. AS Path Filter:</h2>
                                                                      <ul>
                                                                          <li>ржмрзЬ Prefix List рж╣рж▓рзЗ рж╕рж╣ржЬрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред</li>
                                                                          <li>Regular Expressions ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред</li>
                                                                      </ul>
                                                                      <h3>Regular Expression-ржПрж░ ржЪрж┐рж╣рзНржирж╛ржмрж▓рзА:</h3>
                                                                      <pre>.  ржпрзЗржХрзЛржирзЛ ржПржХржЯрж┐ ржХрзНржпрж╛рж░рзЗржХрзНржЯрж╛рж░
                                                                  *  ржпрзЗржХрзЛржирзЛ ржжрзИрж░рзНржШрзНржпрзЗрж░ ржХрзНржпрж╛рж░рзЗржХрзНржЯрж╛рж░
                                                                  +  ржХржоржкржХрзНрж╖рзЗ ржПржХржЯрж┐ ржкрзБржирж░рж╛ржмрзГрждрзНрждрж┐
                                                                  ^  рж╢рзБрж░рзБрждрзЗ
                                                                  $  рж╢рзЗрж╖рзЗ
                                                                  _  ржЖрж▓рж╛ржжрж╛ ржХрж░рждрзЗ
                                                                  () ржЧрзНрж░рзБржкрж┐ржВ
                                                                  [] ржкрж░рж┐рж╕рж░</pre>
                                                                  
                                                                      <h3>ржЙржжрж╛рж╣рж░ржг:</h3>
                                                                      <pre>^$  рж╕рзНржерж╛ржирзАрзЯржнрж╛ржмрзЗ рждрзИрж░рж┐
                                                                  _100$  AS 100 ржерзЗржХрзЗ ржЖржЧржд
                                                                  _100_200_  100 ржУ 200 рж╣рзЯрзЗ ржЧрзЗржЫрзЗ
                                                                  ^(_100)+$  рж╢рзБржзрзБ AS 100 ржмрж╛рж░ржмрж╛рж░
                                                                  ^701(_[0-9]+)*_(5539|8495|8763)$  701 ржерзЗржХрзЗ ржЖрж╕рж╛, рж╢рзЗрж╖рзЗ ржР рзйржЯрж╛рж░ ржПржХржЯрж┐</pre>
                                                                  
                                                                      <h3>ржХржорж╛ржирзНржб:</h3>
                                                                      <pre>ip as-path access-list 10 permit ^100$</pre>
                                                                  
                                                                      <h2>рзо. Community Access List:</h2>
                                                                      <ul>
                                                                          <li>Prefix ржирж┐рж░рзНржмрж╛ржЪржи ржУ ржЪрж┐рж╣рзНржирж┐рждржХрж░ржгрзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГрждред</li>
                                                                          <li>Prefix ржП Community Tag ржмрж╕рж╛ржирзЛ ржпрж╛рзЯред</li>
                                                                          <li>Peer ржжрзНржмрж╛рж░рж╛ Community рж╕рзЗржЯ ржХрж░рж╛рж░ ржЕржирзБржорждрж┐ ржжрж┐рж▓рзЗ рж╕рж╛ржмржзрж╛ржи ржерж╛ржХрждрзЗ рж╣ржмрзЗред</li>
                                                                      </ul>
                                                                  
                                                                      <h2>рзп. ржирзАрждрж┐ржорж╛рж▓рж╛рж░ ржПржХрждрзНрж░ рж╕ржоржирзНржмрзЯ:</h2>
                                                                      <p>рж╕ржм ржирзАрждрж┐ржорж╛рж▓рж╛ ржПржХрж╕рж╛ржерзЗ Route-map (IOS), Policy-statement (Junos), Route-policy (Huawei) ржжрж┐рзЯрзЗред</p>
                                                                  
                                                                      <h2>рззрзж. Route-map (IOS):</h2>
                                                                      <p>рж╢рж░рзНржд ржЕржирзБржпрж╛рзЯрзА match ржПржмржВ set ржХрж░рж╛ рж╣рзЯред</p>
                                                                      <h3>ржХржорж╛ржирзНржб:</h3>
                                                                      <pre>route-map NAME permit|deny SEQ
                                                                  match (рж╢рж░рзНржд)
                                                                  set (ржХрж╛ржЬ)</pre>
                                                                  
                                                                      <h3>ржЙржжрж╛рж╣рж░ржг:</h3>
                                                                      <pre>route-map AS-OUT permit 10
                                                                  set as-path prepend 17821 17821 17821
                                                                  
                                                                  route-map LP-IN permit 10
                                                                  match as-path 1
                                                                  set local-preference 150</pre>
                                                                  
                                                                      <h2>рззрзз. Policy Filter ржкрзНрж░рзЯрзЛржЧ:</h2>
                                                                      <ul>
                                                                          <li>ржЗржиржмрж╛ржЙржирзНржб/ржЖржЙржЯржмрж╛ржЙржирзНржб ржЖржкржбрзЗржЯ ржирзАрждрж┐ржорж╛рж▓рж╛ ржжрж┐рзЯрзЗ ржлрж┐рж▓рзНржЯрж╛рж░ рж╣рзЯред</li>
                                                                          <li>BGP Table-ржП ржирзАрждрж┐ржорж╛рж▓рж╛рзЯ ржмрж╛рждрж┐рж▓ржХрзГржд рж░рзБржЯ ржерж╛ржХрзЗ ржирж╛ред</li>
                                                                          <li>ржирзАрждрж┐ржорж╛рж▓рж╛ ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ Hard Reset ржмрж╛ Soft Reset (Route Refresh) ржжрж┐рзЯрзЗ ржирждрзБржи ржирзАрждрж┐ржорж╛рж▓рж╛ ржХрж╛рж░рзНржпржХрж░ ржХрж░рждрзЗ рж╣рзЯред</li>
                                                                      </ul>
                                                                  
                                                                      <h2>рззрзи. Hard Reset:</h2>
                                                                      <ul>
                                                                          <li>TCP рж╕рзЗрж╢ржи ржмржирзНржз рж╣рзЯред</li>
                                                                          <li>ржирждрзБржи TCP рж╕рзЗрж╢ржи ржЦрзБрж▓рзЗ ржирждрзБржи ржХрж░рзЗ BGP Table ржкрж╛ржарж╛рзЯред</li>
                                                                          <li>ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ ржмрж┐ржШрзНржи рж╕рзГрж╖рзНржЯрж┐ ржХрж░рзЗред</li>
                                                                      </ul>
                                                                      <h3>ржХржорж╛ржирзНржб:</h3>
                                                                      <pre>clear ip bgp *
                                                                  clear ip bgp &lt;peer-address&gt;
                                                                  clear bgp ipv6 unicast *
                                                                  clear bgp ipv6 unicast &lt;peer-address&gt;</pre>
                                                                  
                                                                      <h2>рззрзй. Route Refresh:</h2>
                                                                      <ul>
                                                                          <li>BGP рж╕рзЗрж╢ржи ржмржирзНржз ржирж╛ ржХрж░рзЗржЗ ржЖржкржбрзЗржЯ ржирзЗрзЯрж╛ред</li>
                                                                          <li>peer ржерзЗржХрзЗ ржирждрзБржи ржХрж░рзЗ BGP table ржЖржирж╛ ржмрж╛ ржжрзЗрзЯрж╛ред</li>
                                                                          <li>ржЙржнрзЯ рж░рж╛ржЙржЯрж╛рж░ржХрзЗ route refresh рж╕рж╛ржкрзЛрж░рзНржЯ ржХрж░рждрзЗ рж╣рзЯред</li>
                                                                      </ul>
                                                                      <h3>ржХржорж╛ржирзНржб:</h3>
                                                                      <pre>clear ip bgp &lt;peer-address&gt; [soft] in
                                                                  clear bgp ipv6 unicast &lt;peer-address&gt; [soft] in
                                                                  clear ip bgp &lt;peer-address&gt; [soft] out
                                                                  clear bgp ipv6 unicast &lt;peer-address&gt; [soft] out</pre>
                                                                  
                                                                      <h2>рззрзк. Soft Reconfiguration:</h2>
                                                                      <ul>
                                                                          <li>ржпржжрж┐ Route Refresh рж╕рж╛ржкрзЛрж░рзНржЯ ржирж╛ ржХрж░рзЗ, рждржЦржи soft-reconfig ржмрзНржпржмрж╣рж╛рж░ред</li>
                                                                          <li>ржЗржиржмрж╛ржЙржирзНржб ржЖржкржбрзЗржЯрзЗрж░ ржХржкрж┐ ржЖрж▓рж╛ржжрж╛ржнрж╛ржмрзЗ рж╕ржВрж░ржХрзНрж╖ржгред</li>
                                                                          <li>Policy ржкрж░рж┐ржмрж░рзНрждржирзЗ ржХржкрж┐ ржХрж░рж╛ ржЖржкржбрзЗржЯ ржжрж┐рзЯрзЗ ржирждрзБржи ржХрж░рзЗ ржлрж┐рж▓рзНржЯрж╛рж░ред</li>
                                                                          <li>ржЕрждрж┐рж░рж┐ржХрзНржд ржорзЗржорзЛрж░рж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред</li>
                                                                      </ul>
                                                                      <h3>ржХржорж╛ржирзНржб:</h3>
                                                                      <pre>router bgp 17821
                                                                  neighbor 1.1.1.1 remote-as 100
                                                                  neighbor 1.1.1.1 route-map SET-LPREF in
                                                                  neighbor 1.1.1.1 soft-reconfiguration inbound
                                                                  clear ip bgp 1.1.1.1 soft [in|out]</pre>
                                                                  
                                                                      <h2>тЬЕ ржЙржкрж╕ржВрж╣рж╛рж░:</h2>
                                                                      <p>BGP ржирзАрждрж┐ржорж╛рж▓рж╛ ржмрзНржпржмрж╕рзНржерж╛ржкржирж╛рж░ ржорж╛ржзрзНржпржорзЗ prefix ржирж┐рж░рзНржмрж╛ржЪржи, рж░рзБржЯрж┐ржВ ржХржирзНржЯрзНрж░рзЛрж▓, ржПржмржВ ржЯрзНрж░рж╛ржлрж┐ржХ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ рж╕рж╣ржЬ рж╣рзЯред Prefix List, AS path, Community, Route-map ржЗрждрзНржпрж╛ржжрж┐ ржЯрзБрж▓рзЗрж░ ржорж╛ржзрзНржпржорзЗ ржЖржорж░рж╛ ржЗржиржмрж╛ржЙржирзНржб ржУ ржЖржЙржЯржмрж╛ржЙржирзНржб ржЖржкржбрзЗржЯ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рждрзЗ ржкрж╛рж░рж┐ред ржкрзНрж░рзЯрзЛржЬржирзЗ Hard/Soft Reset ржЕржержмрж╛ Route Refresh ржХрж░рзЗ ржирждрзБржи ржирзАрждрж┐ржорж╛рж▓рж╛ ржХрж╛рж░рзНржпржХрж░ ржХрж░рж╛ ржпрж╛рзЯред</p>



                                                                      
                                                                      <h1>BGP Configuration and Policy Logic</h1>
                                                                      
                                                                      <h2>Step 1: Complete BGP Configuration</h2>
                                                                      <pre>
                                                                      router bgp [OUR-ASN]
                                                                      
                                                                      # Step 1: Inbound Policy
                                                                      # Customer: Highest Priority
                                                                      route-map FROM-CUSTOMER-IN permit 10
                                                                       set local-preference 200
                                                                      neighbor [Customer-IP] remote-as [Customer-AS]
                                                                      neighbor [Customer-IP] route-map FROM-CUSTOMER-IN in
                                                                      
                                                                      # Private Peer: Medium Priority
                                                                      route-map FROM-PRIVATE-PEER-IN permit 10
                                                                       set local-preference 150
                                                                      neighbor [Private-Peer-IP] remote-as [Private-Peer-AS]
                                                                      neighbor [Private-Peer-IP] route-map FROM-PRIVATE-PEER-IN in
                                                                      
                                                                      # IXP: Lower Priority
                                                                      route-map FROM-IXP-IN permit 10
                                                                       set local-preference 100
                                                                      neighbor [IXP-IP] remote-as [IXP-AS]
                                                                      neighbor [IXP-IP] route-map FROM-IXP-IN in
                                                                      
                                                                      # Transit: Lowest Priority
                                                                      route-map FROM-TRANSIT-IN permit 10
                                                                       set local-preference 50
                                                                      neighbor [Transit-IP] remote-as [Transit-AS]
                                                                      neighbor [Transit-IP] route-map FROM-TRANSIT-IN in
                                                                      
                                                                      
                                                                      # Step 2: Outbound Policy
                                                                      # Customer: Highest Priority, No Prepend
                                                                      route-map TO-CUSTOMER-OUT permit 10
                                                                       # No AS-Path prepend, direct path
                                                                      neighbor [Customer-IP] remote-as [Customer-AS]
                                                                      neighbor [Customer-IP] route-map TO-CUSTOMER-OUT out
                                                                      
                                                                      # Private Peer: Medium Priority, No Prepend
                                                                      route-map TO-PRIVATE-PEER-OUT permit 10
                                                                       # No prepend, direct path
                                                                      neighbor [Private-Peer-IP] remote-as [Private-Peer-AS]
                                                                      neighbor [Private-Peer-IP] route-map TO-PRIVATE-PEER-OUT out
                                                                      
                                                                      # IXP: Lower Priority, Prepend 2 times
                                                                      route-map TO-IXP-OUT permit 10
                                                                       set as-path prepend [OUR-ASN] [OUR-ASN]
                                                                      neighbor [IXP-IP] remote-as [IXP-AS]
                                                                      neighbor [IXP-IP] route-map TO-IXP-OUT out
                                                                      
                                                                      # Transit: Lowest Priority, Prepend 3 times
                                                                      route-map TO-TRANSIT-OUT permit 10
                                                                       set as-path prepend [OUR-ASN] [OUR-ASN] [OUR-ASN]
                                                                      neighbor [Transit-IP] remote-as [Transit-AS]
                                                                      neighbor [Transit-IP] route-map TO-TRANSIT-OUT out
                                                                      </pre>
                                                                      
                                                                      <h2>Step 2: Explanation & Policy Logic</h2>
                                                                      
                                                                      <h3>1. Inbound Traffic Filtering (Local Preference)</h3>
                                                                      <p>Local Preference ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐ ржХрзЛржи ржЗржиржХрж╛ржорж┐ржВ ржЯрзНрж░рж╛ржлрж┐ржХ ржЖржЧрзЗ ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржЖрж╕ржмрзЗред</p>
                                                                      
                                                                      <ul>
                                                                          <li><strong>Customer (Local Preference 200):</strong> ржЖржорж░рж╛ ржЪрж╛ржЪрзНржЫрж┐ ржпрзЗ Customer ржжрж┐рзЯрзЗ ржЖрж╕рж╛ ржЯрзНрж░рж╛ржлрж┐ржХ рж╕ржмржЪрзЗржпрж╝рзЗ ржЖржЧрзЗ ржЖрж╕рзЗ, ржХрж╛рж░ржг ржПржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржЖрзЯ ржмрзЗрж╢рж┐ ржХрж░ржмрзЗред</li>
                                                                          <li><strong>Private Peer (Local Preference 150):</strong> Private Peer ржпрзЗрж╣рзЗрждрзБ ржоржзрзНржпржо рж╕рзНржерж╛ржирзЗ, рждрж╛ржЗ ржПрж░ Local Preference 150 рж░рж╛ржЦрж╛ рж╣рзЯрзЗржЫрзЗред</li>
                                                                          <li><strong>IXP (Local Preference 100):</strong> IXP ржЯрзНрж░рж╛ржлрж┐ржХ ржПржХржЯрзБ ржХржо ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗ (Local Preference 100)ред</li>
                                                                          <li><strong>Transit (Local Preference 50):</strong> Transit ржЯрзНрж░рж╛ржлрж┐ржХ рж╕рж░рзНржмржирж┐ржорзНржи ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗ, ржХрж╛рж░ржг ржПржЯрж┐ fallback option рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред</li>
                                                                      </ul>
                                                                      
                                                                      <h3>2. Outbound Traffic Filtering (AS-Path Prepend)</h3>
                                                                      <p>AS-Path Prepend ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐ ржХрзЛржи рж░рзБржЯ ржмрж╛ржЗрж░рзЗ ржпрж╛ржмрзЗ ржПржмржВ ржХрзЛржи ржкржерзЗ ржпрж╛ржмрзЗред</p>
                                                                      
                                                                      <ul>
                                                                          <li><strong>Customer (No AS-Path Prepend):</strong> Customer-ржП ржЖржорж░рж╛ ржХрзЛржирзЛ AS-Path Prepend ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ржирж┐, ржХрж╛рж░ржг ржПржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗред</li>
                                                                          <li><strong>Private Peer (No AS-Path Prepend):</strong> Private Peer-ржПржУ ржХрзЛржирзЛ prepend ржирзЗржЗ, ржХрж╛рж░ржг ржПржЯрж┐ржУ ржЖржорж╛ржжрзЗрж░ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрж╛ржеред</li>
                                                                          <li><strong>IXP (Prepend 2 times):</strong> IXP-ржП ржЖржорж░рж╛ 2 ржмрж╛рж░ AS-PATH prepend ржХрж░рзЗржЫрж┐, ржпрж╛рждрзЗ ржмрж╛ржЗрж░рзЗрж░ ISP ржЧрзБрж▓рзЛ ржХржо ржкрзНрж░рж╛ржзрж╛ржирзНржп ржжрзЗрзЯ ржПржмржВ ржЖржорж╛ржжрзЗрж░ ржЪрж╛рж╣рж┐ржжрж╛ ржкрзВрж░ржгрзЗрж░ ржЬржирзНржп ржЕржирзНржп ржкрж╛рже ржЧрзБрж▓рзЛ ржмрзЗржЫрзЗ ржирзЗрзЯред</li>
                                                                          <li><strong>Transit (Prepend 3 times):</strong> Transit-ржП 3 ржмрж╛рж░ AS-PATH prepend ржХрж░рзЗржЫрж┐, ржпрж╛рждрзЗ ржмрж╛ржЗрж░рзЗрж░ ISP ржЧрзБрж▓рзЛ ржПрзЬрж╛ржирзЛрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржмрзЗ ржПржмржВ ржПржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ fallback рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗред</li>
                                                                      </ul>
                                                                      
                                                                      <h3>3. Priority Recap Table</h3>
                                                                      <table>
                                                                          <thead>
                                                                              <tr>
                                                                                  <th>Path Type</th>
                                                                                  <th>Inbound Priority (Local-Pref)</th>
                                                                                  <th>Outbound Priority (AS-Path Prepend)</th>
                                                                              </tr>
                                                                          </thead>
                                                                          <tbody>
                                                                              <tr>
                                                                                  <td>Customer</td>
                                                                                  <td>200 (Highest)</td>
                                                                                  <td>0 (No prepend)</td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td>Private Peer</td>
                                                                                  <td>150</td>
                                                                                  <td>0 (No prepend)</td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td>IXP</td>
                                                                                  <td>100</td>
                                                                                  <td>2 times prepend</td>
                                                                              </tr>
                                                                              <tr>
                                                                                  <td>Transit</td>
                                                                                  <td>50 (Lowest)</td>
                                                                                  <td>3 times prepend</td>
                                                                              </tr>
                                                                          </tbody>
                                                                      </table>
                                                                      
                                                                      <h3>4. Working Logic Recap</h3>
                                                                      <ul>
                                                                          <li><strong>Inbound Traffic:</strong> Local Preference ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржЗржиржХрж╛ржорж┐ржВ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржкрже ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐, Customer-ржП рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐, Transit-ржП рж╕ржмржЪрзЗрзЯрзЗ ржХржоред</li>
                                                                          <li><strong>Outbound Traffic:</strong> AS-Path Prepend ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржЖржЙржЯржЧрзЛржЗржВ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржкржерзЗ ржирж┐рзЯржирзНрждрзНрж░ржг рж░рж╛ржЦрж┐, ржпрзЗржЦрж╛ржирзЗ Transit ржПржмржВ IXP-ржПрж░ ржкржерзЗ ржмрзЗрж╢рж┐ prepend ржХрж░рж╛ рж╣рзЯ ржпрж╛рждрзЗ ржПржЧрзБрж▓рзЛ ржХржо ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯред</li>
                                                                      </ul>

<h1>BGP Configuration and Policy Explanation</h1>

<h2>Step 1: Complete BGP Configuration</h2>
<p>Configuration for Inbound & Outbound Filtering Using Local Preference and AS-Path Prepend</p>
<pre>
router bgp [OUR-ASN]

# Step 1: Inbound Policy
# Customer: Highest Priority
route-map FROM-CUSTOMER-IN permit 10
 set local-preference 200
neighbor [Customer-IP] remote-as [Customer-AS]
neighbor [Customer-IP] route-map FROM-CUSTOMER-IN in

# Private Peer: Medium Priority
route-map FROM-PRIVATE-PEER-IN permit 10
 set local-preference 150
neighbor [Private-Peer-IP] remote-as [Private-Peer-AS]
neighbor [Private-Peer-IP] route-map FROM-PRIVATE-PEER-IN in

# IXP: Lower Priority
route-map FROM-IXP-IN permit 10
 set local-preference 100
neighbor [IXP-IP] remote-as [IXP-AS]
neighbor [IXP-IP] route-map FROM-IXP-IN in

# Transit: Lowest Priority
route-map FROM-TRANSIT-IN permit 10
 set local-preference 50
neighbor [Transit-IP] remote-as [Transit-AS]
neighbor [Transit-IP] route-map FROM-TRANSIT-IN in


# Step 2: Outbound Policy
# Customer: Highest Priority, No Prepend
route-map TO-CUSTOMER-OUT permit 10
 # No AS-Path prepend, direct path
neighbor [Customer-IP] remote-as [Customer-AS]
neighbor [Customer-IP] route-map TO-CUSTOMER-OUT out

# Private Peer: Medium Priority, No Prepend
route-map TO-PRIVATE-PEER-OUT permit 10
 # No prepend, direct path
neighbor [Private-Peer-IP] remote-as [Private-Peer-AS]
neighbor [Private-Peer-IP] route-map TO-PRIVATE-PEER-OUT out

# IXP: Lower Priority, Prepend 2 times
route-map TO-IXP-OUT permit 10
 set as-path prepend [OUR-ASN] [OUR-ASN]
neighbor [IXP-IP] remote-as [IXP-AS]
neighbor [IXP-IP] route-map TO-IXP-OUT out

# Transit: Lowest Priority, Prepend 3 times
route-map TO-TRANSIT-OUT permit 10
 set as-path prepend [OUR-ASN] [OUR-ASN] [OUR-ASN]
neighbor [Transit-IP] remote-as [Transit-AS]
neighbor [Transit-IP] route-map TO-TRANSIT-OUT out
</pre>

<h2>Step 2: Explanation & Policy Logic</h2>

<h3>1. Inbound Traffic Filtering (Local Preference)</h3>
<p>Local Preference ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐ ржХрзЛржи ржЗржиржХрж╛ржорж┐ржВ ржЯрзНрж░рж╛ржлрж┐ржХ ржЖржЧрзЗ ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржЖрж╕ржмрзЗред</p>

<ul>
    <li><strong>Customer (Local Preference 200):</strong> ржЖржорж░рж╛ ржЪрж╛ржЪрзНржЫрж┐ ржпрзЗ Customer ржжрж┐рзЯрзЗ ржЖрж╕рж╛ ржЯрзНрж░рж╛ржлрж┐ржХ рж╕ржмржЪрзЗржпрж╝рзЗ ржЖржЧрзЗ ржЖрж╕рзЗ, ржХрж╛рж░ржг ржПржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржЖрзЯ ржмрзЗрж╢рж┐ ржХрж░ржмрзЗред</li>
    <li><strong>Private Peer (Local Preference 150):</strong> Private Peer ржпрзЗрж╣рзЗрждрзБ ржоржзрзНржпржо рж╕рзНржерж╛ржирзЗ, рждрж╛ржЗ ржПрж░ Local Preference 150 рж░рж╛ржЦрж╛ рж╣рзЯрзЗржЫрзЗред</li>
    <li><strong>IXP (Local Preference 100):</strong> IXP ржЯрзНрж░рж╛ржлрж┐ржХ ржПржХржЯрзБ ржХржо ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗ (Local Preference 100)ред</li>
    <li><strong>Transit (Local Preference 50):</strong> Transit ржЯрзНрж░рж╛ржлрж┐ржХ рж╕рж░рзНржмржирж┐ржорзНржи ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗ, ржХрж╛рж░ржг ржПржЯрж┐ fallback option рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред</li>
</ul>

<h3>2. Outbound Traffic Filtering (AS-Path Prepend)</h3>
<p>AS-Path Prepend ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐ ржХрзЛржи рж░рзБржЯ ржмрж╛ржЗрж░рзЗ ржпрж╛ржмрзЗ ржПржмржВ ржХрзЛржи ржкржерзЗ ржпрж╛ржмрзЗред</p>

<ul>
    <li><strong>Customer (No AS-Path Prepend):</strong> Customer-ржП ржЖржорж░рж╛ ржХрзЛржирзЛ AS-Path Prepend ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ржирж┐, ржХрж╛рж░ржг ржПржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗред</li>
    <li><strong>Private Peer (No AS-Path Prepend):</strong> Private Peer-ржПржУ ржХрзЛржирзЛ prepend ржирзЗржЗ, ржХрж╛рж░ржг ржПржЯрж┐ржУ ржЖржорж╛ржжрзЗрж░ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрж╛ржеред</li>
    <li><strong>IXP (Prepend 2 times):</strong> IXP-ржП ржЖржорж░рж╛ 2 ржмрж╛рж░ AS-PATH prepend ржХрж░рзЗржЫрж┐, ржпрж╛рждрзЗ ржмрж╛ржЗрж░рзЗрж░ ISP ржЧрзБрж▓рзЛ ржХржо ржкрзНрж░рж╛ржзрж╛ржирзНржп ржжрзЗрзЯ ржПржмржВ ржЖржорж╛ржжрзЗрж░ ржЪрж╛рж╣рж┐ржжрж╛ ржкрзВрж░ржгрзЗрж░ ржЬржирзНржп ржЕржирзНржп ржкрж╛рже ржЧрзБрж▓рзЛ ржмрзЗржЫрзЗ ржирзЗрзЯред</li>
    <li><strong>Transit (Prepend 3 times):</strong> Transit-ржП 3 ржмрж╛рж░ AS-PATH prepend ржХрж░рзЗржЫрж┐, ржпрж╛рждрзЗ ржмрж╛ржЗрж░рзЗрж░ ISP ржЧрзБрж▓рзЛ ржПрзЬрж╛ржирзЛрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржмрзЗ ржПржмржВ ржПржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ fallback рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗред</li>
</ul>

<h3>3. Priority Recap Table</h3>
<table>
    <thead>
        <tr>
            <th>Path Type</th>
            <th>Inbound Priority (Local-Pref)</th>
            <th>Outbound Priority (AS-Path Prepend)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Customer</td>
            <td>200 (Highest)</td>
            <td>0 (No prepend)</td>
        </tr>
        <tr>
            <td>Private Peer</td>
            <td>150</td>
            <td>0 (No prepend)</td>
        </tr>
        <tr>
            <td>IXP</td>
            <td>100</td>
            <td>2 times prepend</td>
        </tr>
        <tr>
            <td>Transit</td>
            <td>50 (Lowest)</td>
            <td>3 times prepend</td>
        </tr>
    </tbody>
</table>

<h3>4. Working Logic Recap</h3>
<ul>
    <li><strong>Inbound Traffic:</strong> Local Preference ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржЗржиржХрж╛ржорж┐ржВ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржкрже ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐, Customer-ржП рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐, Transit-ржП рж╕ржмржЪрзЗрзЯрзЗ ржХржоред</li>
    <li><strong>Outbound Traffic:</strong> AS-Path Prepend ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржЖржЙржЯржЧрзЛржЗржВ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржкржерзЗ ржирж┐рзЯржирзНрждрзНрж░ржг рж░рж╛ржЦрж┐, ржпрзЗржЦрж╛ржирзЗ Transit ржПржмржВ IXP-ржПрж░ ржкржерзЗ ржмрзЗрж╢рж┐ prepend ржХрж░рж╛ рж╣рзЯ ржпрж╛рждрзЗ ржПржЧрзБрж▓рзЛ ржХржо ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯред</li>
</ul>

<

<h1>BGP Configuration and Explanation</h1>

<h2>Step 1: Complete BGP Configuration</h2>
<pre>
router bgp [OUR-ASN]

# Step 1: Inbound Policy
# Customer: Highest Priority
route-map FROM-CUSTOMER-IN permit 10
 set local-preference 200
neighbor [Customer-IP] remote-as [Customer-AS]
neighbor [Customer-IP] route-map FROM-CUSTOMER-IN in

# Private Peer: Medium Priority
route-map FROM-PRIVATE-PEER-IN permit 10
 set local-preference 150
neighbor [Private-Peer-IP] remote-as [Private-Peer-AS]
neighbor [Private-Peer-IP] route-map FROM-PRIVATE-PEER-IN in

# IXP: Lower Priority
route-map FROM-IXP-IN permit 10
 set local-preference 100
neighbor [IXP-IP] remote-as [IXP-AS]
neighbor [IXP-IP] route-map FROM-IXP-IN in

# Transit: Lowest Priority
route-map FROM-TRANSIT-IN permit 10
 set local-preference 50
neighbor [Transit-IP] remote-as [Transit-AS]
neighbor [Transit-IP] route-map FROM-TRANSIT-IN in


# Step 2: Outbound Policy
# Customer: Highest Priority, No Prepend
route-map TO-CUSTOMER-OUT permit 10
 # No AS-Path prepend, direct path
neighbor [Customer-IP] remote-as [Customer-AS]
neighbor [Customer-IP] route-map TO-CUSTOMER-OUT out

# Private Peer: Medium Priority, No Prepend
route-map TO-PRIVATE-PEER-OUT permit 10
 # No prepend, direct path
neighbor [Private-Peer-IP] remote-as [Private-Peer-AS]
neighbor [Private-Peer-IP] route-map TO-PRIVATE-PEER-OUT out

# IXP: Lower Priority, Prepend 2 times
route-map TO-IXP-OUT permit 10
 set as-path prepend [OUR-ASN] [OUR-ASN]
neighbor [IXP-IP] remote-as [IXP-AS]
neighbor [IXP-IP] route-map TO-IXP-OUT out

# Transit: Lowest Priority, Prepend 3 times
route-map TO-TRANSIT-OUT permit 10
 set as-path prepend [OUR-ASN] [OUR-ASN] [OUR-ASN]
neighbor [Transit-IP] remote-as [Transit-AS]
neighbor [Transit-IP] route-map TO-TRANSIT-OUT out
</pre>

<h2>Step 2: Explanation & Policy Logic</h2>

<h3>1. Inbound Traffic Filtering (Local Preference)</h3>
<p>Local Preference ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐ ржХрзЛржи ржЗржиржХрж╛ржорж┐ржВ ржЯрзНрж░рж╛ржлрж┐ржХ ржЖржЧрзЗ ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржЖрж╕ржмрзЗред</p>

<ul>
    <li><strong>Customer (Local Preference 200):</strong> ржЖржорж░рж╛ ржЪрж╛ржЪрзНржЫрж┐ ржпрзЗ Customer ржжрж┐рзЯрзЗ ржЖрж╕рж╛ ржЯрзНрж░рж╛ржлрж┐ржХ рж╕ржмржЪрзЗржпрж╝рзЗ ржЖржЧрзЗ ржЖрж╕рзЗ, ржХрж╛рж░ржг ржПржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржЖрзЯ ржмрзЗрж╢рж┐ ржХрж░ржмрзЗред</li>
    <li><strong>Private Peer (Local Preference 150):</strong> Private Peer ржпрзЗрж╣рзЗрждрзБ ржоржзрзНржпржо рж╕рзНржерж╛ржирзЗ, рждрж╛ржЗ ржПрж░ Local Preference 150 рж░рж╛ржЦрж╛ рж╣рзЯрзЗржЫрзЗред</li>
    <li><strong>IXP (Local Preference 100):</strong> IXP ржЯрзНрж░рж╛ржлрж┐ржХ ржПржХржЯрзБ ржХржо ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗ (Local Preference 100)ред</li>
    <li><strong>Transit (Local Preference 50):</strong> Transit ржЯрзНрж░рж╛ржлрж┐ржХ рж╕рж░рзНржмржирж┐ржорзНржи ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗ, ржХрж╛рж░ржг ржПржЯрж┐ fallback option рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред</li>
</ul>

<h3>2. Outbound Traffic Filtering (AS-Path Prepend)</h3>
<p>AS-Path Prepend ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐ ржХрзЛржи рж░рзБржЯ ржмрж╛ржЗрж░рзЗ ржпрж╛ржмрзЗ ржПржмржВ ржХрзЛржи ржкржерзЗ ржпрж╛ржмрзЗред</p>

<ul>
    <li><strong>Customer (No AS-Path Prepend):</strong> Customer-ржП ржЖржорж░рж╛ ржХрзЛржирзЛ AS-Path Prepend ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ржирж┐, ржХрж╛рж░ржг ржПржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗред</li>
    <li><strong>Private Peer (No AS-Path Prepend):</strong> Private Peer-ржПржУ ржХрзЛржирзЛ prepend ржирзЗржЗ, ржХрж╛рж░ржг ржПржЯрж┐ржУ ржЖржорж╛ржжрзЗрж░ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрж╛ржеред</li>
    <li><strong>IXP (Prepend 2 times):</strong> IXP-ржП ржЖржорж░рж╛ 2 ржмрж╛рж░ AS-PATH prepend ржХрж░рзЗржЫрж┐, ржпрж╛рждрзЗ ржмрж╛ржЗрж░рзЗрж░ ISP ржЧрзБрж▓рзЛ ржХржо ржкрзНрж░рж╛ржзрж╛ржирзНржп ржжрзЗрзЯ ржПржмржВ ржЖржорж╛ржжрзЗрж░ ржЪрж╛рж╣рж┐ржжрж╛ ржкрзВрж░ржгрзЗрж░ ржЬржирзНржп ржЕржирзНржп ржкрж╛рже ржЧрзБрж▓рзЛ ржмрзЗржЫрзЗ ржирзЗрзЯред</li>
    <li><strong>Transit (Prepend 3 times):</strong> Transit-ржП 3 ржмрж╛рж░ AS-PATH prepend ржХрж░рзЗржЫрж┐, ржпрж╛рждрзЗ ржмрж╛ржЗрж░рзЗрж░ ISP ржЧрзБрж▓рзЛ ржПрзЬрж╛ржирзЛрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржмрзЗ ржПржмржВ ржПржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ fallback рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗред</li>
</ul>

<h3>3. Priority Recap Table</h3>
<table>
    <thead>
        <tr>
            <th>Path Type</th>
            <th>Inbound Priority (Local-Pref)</th>
            <th>Outbound Priority (AS-Path Prepend)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Customer</td>
            <td>200 (Highest)</td>
            <td>0 (No prepend)</td>
        </tr>
        <tr>
            <td>Private Peer</td>
            <td>150</td>
            <td>0 (No prepend)</td>
        </tr>
        <tr>
            <td>IXP</td>
            <td>100</td>
            <td>2 times prepend</td>
        </tr>
        <tr>
            <td>Transit</td>
            <td>50 (Lowest)</td>
            <td>3 times prepend</td>
        </tr>
    </tbody>
</table>

<h3>4. Working Logic Recap</h3>
<ul>
    <li><strong>Inbound Traffic:</strong> Local Preference ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржЗржиржХрж╛ржорж┐ржВ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржкрже ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐, Customer-ржП рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐, Transit-ржП рж╕ржмржЪрзЗрзЯрзЗ ржХржоред</li>
    <li><strong>Outbound Traffic:</strong> AS-Path Prepend ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржЖржЙржЯржЧрзЛржЗржВ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржкржерзЗ ржирж┐рзЯржирзНрждрзНрж░ржг рж░рж╛ржЦрж┐, ржпрзЗржЦрж╛ржирзЗ Transit ржПржмржВ IXP-ржПрж░ ржкржерзЗ ржмрзЗрж╢рж┐ prepend ржХрж░рж╛ рж╣рзЯ ржпрж╛рждрзЗ ржПржЧрзБрж▓рзЛ ржХржо ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯред</li>
</ul>


    <h1>Task 3.1 - Set Community and Local Preference (LP) for Inbound Prefixes on ISP Routers</h1>

    <h2>тЪЩя╕П Community Value and LP Mapping (Inbound)</h2>
    <table border="1">
        <tr>
            <th>Community</th>
            <th>Description</th>
            <th>Local Preference (LP)</th>
        </tr>
        <tr>
            <td>X0:10</td>
            <td>TR1-IN (Transit Router 1)</td>
            <td>100</td>
        </tr>
        <tr>
            <td>X0:20</td>
            <td>TR2-IN (Transit Router 2)</td>
            <td>100</td>
        </tr>
        <tr>
            <td>X0:30</td>
            <td>IXP-IN (Internet Exchange)</td>
            <td>300</td>
        </tr>
        <tr>
            <td>X0:40</td>
            <td>PP-IN (Private Peer)</td>
            <td>400</td>
        </tr>
        <tr>
            <td>X0:50</td>
            <td>CUST-IN (Customer Prefix)</td>
            <td>500</td>
        </tr>
        <tr>
            <td>X0:60</td>
            <td>OWN-PREFIX (Own Network)</td>
            <td>-</td>
        </tr>
        <tr>
            <td>X0:111</td>
            <td>Uniform Advertisement</td>
            <td>-</td>
        </tr>
        <tr>
            <td>X0:222</td>
            <td>TO-IXP-ONLY</td>
            <td>-</td>
        </tr>
        <tr>
            <td>X0:999</td>
            <td>Everywhere except TR</td>
            <td>-</td>
        </tr>
        <tr>
            <td>X0:1000</td>
            <td>No Advertise to TR1</td>
            <td>-</td>
        </tr>
        <tr>
            <td>X0:1001</td>
            <td>Prepend 1x to TR1</td>
            <td>-</td>
        </tr>
        <tr>
            <td>X0:1002</td>
            <td>Prepend 2x to TR1</td>
            <td>-</td>
        </tr>
        <tr>
            <td>X0:2000</td>
            <td>No Advertise to TR2</td>
            <td>-</td>
        </tr>
        <tr>
            <td>X0:2001</td>
            <td>Prepend 1x to TR2</td>
            <td>-</td>
        </tr>
        <tr>
            <td>X0:2002</td>
            <td>Prepend 2x to TR2</td>
            <td>-</td>
        </tr>
        <tr>
            <td>X0:500</td>
            <td>DEFAULT-ROUTE</td>
            <td>-</td>
        </tr>
    </table>

    <h2>ЁЯза Key Understanding of Configuration Purpose</h2>
    <ul>
        <li>Inbound Routes (from Transit/IXP/Peers/Customers) are tagged with specific communities and LP.</li>
        <li>The Local Preference (LP) indicates priority of path selection, where higher LP = more preferred path.</li>
        <li>Communities are used for fine-grained control of route announcements and propagation.</li>
    </ul>

    <h2>ЁЯФС Inbound Route-Map Summary at Different Router Types</h2>

    <h3>1. Transit Routers (BR1, BR2, BR3, BR4)</h3>
    <ul>
        <li>Set TR1-IN or TR2-IN for all routes except default.</li>
        <li>Set DEFAULT-ROUTE (X0:500) when default route is matched.</li>
    </ul>
    <pre>
route-map RM-TR1-IN permit 10
 match ip address prefix-list DEFAULT-ROUTE
 set community X0:500
exit
route-map RM-TR1-IN permit 20
 set community X0:10
exit
    </pre>

    <h3>2. Peer Routers (PR1, PR2, PR3, PR4)</h3>
    <ul>
        <li>For IXP peers, assign IXP-IN (X0:30) and set LP 300.</li>
        <li>For Private peers, assign PP-IN (X0:40) and set LP 400.</li>
    </ul>
    <pre>
route-map RM-IXP-IN permit 10
 set community X0:30
 set local-preference 300
exit
route-map RM-ISP2-IN permit 10
 set community X0:40
 set local-preference 400
exit
    </pre>

    <h3>3. Access Routers (AR1, AR2, AR3, AR4)</h3>
    <ul>
        <li>Customer prefixes marked as CUST-IN (X0:50) with highest LP 500.</li>
        <li>Additionally, apply other communities (like X0:111, X0:222) depending on desired control:
            <ul>
                <li>X0:111: Uniform Advertisement</li>
                <li>X0:222: To IXP Only</li>
                <li>X0:999: Everywhere except Transit</li>
            </ul>
        </li>
        <li>Prepend/No-advertise communities as needed for TR1/TR2.</li>
    </ul>
    <pre>
route-map RM-TO-ALL-EBGP-IN permit 10
 set community X0:50 X0:111
 set local-preference 500
exit
    </pre>

    <h2>тЬЕ General Notes on the Configuration</h2>
    <ul>
        <li><code>ip bgp-community new-format</code> enables standard community display (like X:Y).</li>
        <li><code>route-map</code> with community tags helps to mark, prioritize, or filter incoming BGP routes.</li>
        <li>Neighbors use specific route-maps for inbound policy enforcement.</li>
    </ul>

    <h2>ЁЯОп Key Takeaways for Exam or Practical Labs</h2>
    <ul>
        <li><strong>Community-based Routing Control:</strong> Communities give tagging mechanism to influence BGP routing.</li>
        <li><strong>LP as Path Selector:</strong> Local Preference influences outbound route choice within an AS.</li>
        <li><strong>Separation of Roles:</strong>
            <ul>
                <li>Transit routers mark routes based on upstream.</li>
                <li>Peers/IXP routers handle external sources.</li>
                <li>Access routers focus on customer-originated traffic.</li>
            </ul>
        </li>
        <li><strong>Community Usage:</strong>
            <ul>
                <li>Filtering (e.g., X0:1000 for no-advertise to TR1).</li>
                <li>Prepending (e.g., X0:1001 for prepend 1x to TR1).</li>
                <li>Selective advertisement (e.g., X0:222 for IXP only).</li>
            </ul>
        </li>
    </ul>
>
        <h1>Inbound Prefix-ржП Community ржПржмржВ Local Preference (LP) рж╕рзЗржЯ ржХрж░рж╛</h1>
        <p>BGP-рждрзЗ (Border Gateway Protocol) community value ржУ local preference (LP) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржмрж┐ржнрж┐ржирзНржи рж░рж╛ржЙржЯрж╛рж░ ржерзЗржХрзЗ ржЖрж╕рж╛ prefix-ржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржирзАрждрж┐ржорж╛рж▓рж╛ рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯред ржПрждрзЗ ржХрж░рзЗ ржЖржорж░рж╛ ржарж┐ржХ ржХрж░рждрзЗ ржкрж╛рж░рж┐ ржХрзЛржи рж░рж╛ржЙржЯржЯрж╛ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржм ржкрж╛ржмрзЗ, ржЖрж░ ржХрзЛржи рж░рж╛ржЙржЯржЯрж╛ ржХржо ржЧрзБрж░рзБрждрзНржм ржкрж╛ржмрзЗред</p>
    
        <h2>ржпрзЗ рждрж╛рж▓рж┐ржХрж╛ржЯрж╛ ржжрзЗржУрзЯрж╛ рж╣рзЯрзЗржЫрзЗ рж╕рзЗржЦрж╛ржирзЗ ржХрзА ржЖржЫрзЗ?</h2>
        <p>рждрж╛рж▓рж┐ржХрж╛рзЯ ржпрзЗрж╕ржм ржХржорж┐ржЙржирж┐ржЯрж┐ ржжрзЗржУрзЯрж╛ ржЖржЫрзЗ, рж╕рзЗржЧрзБрж▓рзЛрж░ ржорж╛ржзрзНржпржорзЗ ржмрзБржЭрж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ:</p>
        <ul>
            <li>ржХрзЛржи ржЯрзНрж░рж╛ржиржЬрж┐ржЯ (TR1, TR2) ржерзЗржХрзЗ ржЗржиржмрж╛ржЙржирзНржб рж░рзБржЯ ржЖрж╕рж▓рзЗ LP ржХржд рж╣ржмрзЗред</li>
            <li>ржХрзЛржи IXP (ржЗржирзНржЯрж╛рж░ржирзЗржЯ ржПржХрзНрж╕ржЪрзЗржЮрзНржЬ) ржерзЗржХрзЗ ржЖрж╕рж▓рзЗ LP ржХржд рж╣ржмрзЗред</li>
            <li>Private Peering (PP) ржерзЗржХрзЗ ржЖрж╕рж▓рзЗ LP ржХрждред</li>
            <li>ржХрж╛рж╕рзНржЯржорж╛рж░ рж░рзБржЯ (CUST-IN) ржЖрж╕рж▓рзЗ LP ржХрждред</li>
            <li>ржирж┐ржЬрзЗрж░ Prefix (OWN-PREFIX) ржЗрждрзНржпрж╛ржжрж┐ред</li>
        </ul>
    
        <table border="1">
            <tr>
                <th>Community Value</th>
                <th>Description</th>
                <th>Set LP (Inbound)</th>
            </tr>
            <tr>
                <td>X0:10</td>
                <td>TR1-IN</td>
                <td>100</td>
            </tr>
            <tr>
                <td>X0:20</td>
                <td>TR2-IN</td>
                <td>100</td>
            </tr>
            <tr>
                <td>X0:30</td>
                <td>IXP-IN</td>
                <td>300</td>
            </tr>
            <tr>
                <td>X0:40</td>
                <td>PP-IN</td>
                <td>400</td>
            </tr>
            <tr>
                <td>X0:50</td>
                <td>CUST-IN</td>
                <td>500</td>
            </tr>
            <tr>
                <td>X0:60</td>
                <td>OWN-PREFIX</td>
                <td></td>
            </tr>
        </table>
    
        <h2>ржмрзНржпрж╛ржЦрзНржпрж╛:</h2>
        <p>ржзрж░рзБржи, ржХрзЛржирзЛ prefix ржЖрж╕ржЫрзЗ TR1 (Transit Router 1) ржерзЗржХрзЗ, рждрж╛рж╣рж▓рзЗ рждрж╛рж░ ржХржорж┐ржЙржирж┐ржЯрж┐ рж╣ржмрзЗ X0:10 ржПржмржВ рждрж╛рж░ LP рж╣ржмрзЗ рззрзжрзжред</p>
        <p>ржпржжрж┐ prefix ржЖрж╕рзЗ IXP ржерзЗржХрзЗ, рждрж╛рж╣рж▓рзЗ ржХржорж┐ржЙржирж┐ржЯрж┐ рж╣ржмрзЗ X0:30, LP рж╣ржмрзЗ рзйрзжрзжред</p>
        <p>ржПрж░ржкрж░ ржмрж┐ржнрж┐ржирзНржи рж░рж╛ржЙржЯрж╛рж░ (ржпрзЗржоржи CR1, BR1, PR1, AR1 ржЗрждрзНржпрж╛ржжрж┐)-ржПрж░ ржЬржирзНржп ржпрзЗ route-map ржЖржЫрзЗ, рждрж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ inbound prefix-ржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржПржЗ ржХржорж┐ржЙржирж┐ржЯрж┐ ржПржмржВ LP рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред</p>
    
        <h3>ржЙржжрж╛рж╣рж░ржг ржжрж┐рзЯрзЗ ржмрзБржЭрж╛ржЗ:</h3>
        <h4>CR1 рж░рж╛ржЙржЯрж╛рж░рзЗ:</h4>
        <pre>
            route-map RM-TO-ALL-EBGP permit 10
     set community 10:60 10:111</pre>
        <p>ржорж╛ржирзЗ рж╣рж▓рзЛ, ржПржЗ рж░рж╛ржЙржЯрж╛рж░ рждрж╛рж░ ржирж┐ржЬрзЗрж░ prefix (OWN-PREFIX) ржПржмржВ Uniform Advertisement рж╣рж┐рж╕рзЗржмрзЗ ржкрзНрж░ржЪрж╛рж░ ржХрж░ржмрзЗред</p>
        <pre>
            router bgp 10
     address-family ipv4 unicast
     network 10.10.0.0 mask 255.255.252.0 route-map RM-TO-ALL-EBGP</pre>
        <p>ржорж╛ржирзЗ рж╣рж▓рзЛ, 10.10.0.0/22 ржирзЗржЯржУрзЯрж╛рж░рзНржХржЯрж╛ BGP-рждрзЗ ржШрзЛрж╖ржгрж╛ ржХрж░рж╛ рж╣ржмрзЗ ржЙржХрзНржд рж░рзБржЯ-ржорзНржпрж╛ржк ржлрж▓рзЛ ржХрж░рзЗред</p>
    
        <h4>BR1 рж░рж╛ржЙржЯрж╛рж░:</h4>
        <pre>route-map RM-TR1-IN permit 10
     match ip address prefix-list DEFAULT-ROUTE
     set community 10:500</pre>
        <p>ржорж╛ржирзЗ, TR1 ржерзЗржХрзЗ ржпржжрж┐ ржбрж┐ржлрж▓рзНржЯ рж░рзБржЯ ржЖрж╕рзЗ, рждрж╛рж╣рж▓рзЗ рждрж╛ржХрзЗ ржХрж╛рж╕рзНржЯржорж╛рж░ ржЗржиржмрж╛ржЙржирзНржб (CUST-IN) рж╣рж┐рж╕рзЗржмрзЗ ржзрж░рж╛ рж╣ржмрзЗред рждрж╛рж░ ржЬржирзНржп LP 500 рж╣ржмрзЗред</p>
        <pre>
            route-map RM-TR1-IN permit 20
     set community 10:10</pre>
        <p>TR1 ржерзЗржХрзЗ ржпржжрж┐ ржЕржирзНржп ржХрзЛржирзЛ prefix ржЖрж╕рзЗ, рждрж╛рж╣рж▓рзЗ community рж╣ржмрзЗ 10:10 (ржорж╛ржирзЗ TR1-IN) ржПржмржВ LP 100 рж╣ржмрзЗ (ржЙржкрж░рзЗрж░ ржЯрзЗржмрж┐рж▓ ржЕржирзБржпрж╛рзЯрзА)ред</p>
    
        <h4>PR1 рж░рж╛ржЙржЯрж╛рж░:</h4>
        <pre>route-map RM-IXP-IN permit 10
     set community 10:30
     set local-preference 300</pre>
        <p>ржорж╛ржирзЗ, IXP ржерзЗржХрзЗ ржЖрж╕рж╛ рж░рзБржЯржЧрзБрж▓рзЛрждрзЗ рззрзж:рзйрзж ржХржорж┐ржЙржирж┐ржЯрж┐ ржжрзЗржмрзЗ ржПржмржВ LP рзйрзжрзж рж╣ржмрзЗред</p>
    
        <h2>рж╕рж╛рж░рж╛ржВрж╢:</h2>
        <ol>
            <li>ржкрзНрж░рждрж┐ржЯрж╛ рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ route-map ржжрж┐рзЯрзЗ ржЗржиржмрж╛ржЙржирзНржб рж░рзБржЯржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржХржорж┐ржЙржирж┐ржЯрж┐ ржУ LP ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред</li>
            <li>ржПржЗ ржирзАрждрж┐ржорж╛рж▓рж╛рж░ ржлрж▓рзЗ рж░рж╛ржЙржЯрж╛рж░ ржарж┐ржХ ржХрж░ржмрзЗ ржХрзЛржи рж░рзБржЯржЯрж╛ ржкрзНрж░рзЗржлрж╛рж░ ржХрж░ржмрзЗ, ржХрзЛржиржЯрж╛ ржмрзНржпрж╛ржХржЖржк рж╣рж┐рж╕рзЗржмрзЗ рж░рж╛ржЦржмрзЗред</li>
            <li>ржХржорж┐ржЙржирж┐ржЯрж┐ ржЯрзНржпрж╛ржЧ ржжрж┐рзЯрзЗ ржнржмрж┐рж╖рзНржпрждрзЗ рж╕рж╣ржЬрзЗ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░рж╛ ржмрж╛ ржкрзНрж░рж┐ржкрзЗржирзНржбрж┐ржВ-ржПрж░ ржорж╛ржзрзНржпржорзЗ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рж╛ ржпрж╛ржмрзЗред</li>

            <h1>Route-map ржмрзНржпрж╛ржЦрзНржпрж╛</h1>
            <p>ржирж┐ржЪрзЗ ржЖржорж┐ ржПржХ ржПржХ ржХрж░рзЗ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░ржЫрж┐:</p>
        
            <h2>рзз. CR1 (Core Router 1)</h2>
            <pre>route-map RM-TO-ALL-EBGP permit 10
         set community 10:60 10:111</pre>
            <p><strong>ржмрзНржпрж╛ржЦрзНржпрж╛:</strong><br>
            RM-TO-ALL-EBGP ржирж╛ржорзЗрж░ ржПржЗ route-map ржЯрж╛ ржпржЦржиржЗ ржХрж╛ржЬ ржХрж░ржмрзЗ (permit 10), рждржЦржи рж╕ржм ржЗржиржмрж╛ржЙржирзНржб prefix-ржП ржжрзБржЗржЯрж╛ community value рж╕рзЗржЯ ржХрж░ржмрзЗ:<br>
            10:60 (ржорж╛ржирзЗ OWN-PREFIX)<br>
            10:111 (ржПржЗржЯрж╛ Uniform Advertisement ржмрзЛржЭрж╛рждрзЗ ржкрж╛рж░рзЗ, рж╣рзЯржд рж╕ржм peer-ржжрзЗрж░ ржжрзЗржЦрж╛ржирзЛрж░ ржЬржирзНржп)<br>
            ржорж╛ржирзЗ, CR1 ржирж┐ржЬрзЗрж░ prefix (ржпрзЗржоржи 10.10.0.0/22) ржШрзЛрж╖ржгрж╛ ржХрж░ржмрзЗ ржПржЗ community-tag ржжрж┐рзЯрзЗред</p>
        
            <pre>router bgp 10
         address-family ipv4 unicast
         network 10.10.0.0 mask 255.255.252.0 route-map RM-TO-ALL-EBGP</pre>
            <p>ржПржЦрж╛ржирзЗ CR1 10.10.0.0/22 ржирзЗржЯржУрзЯрж╛рж░рзНржХржЯрж╛ BGP-рждрзЗ ржкрж╛ржарж╛ржмрзЗ ржЖрж░ ржПржЗ route-map ржлрж▓рзЛ ржХрж░ржмрзЗред</p>
        
            <h2>рзи. BR1 (Border Router 1)</h2>
            <pre>route-map RM-TR1-IN permit 10
         match ip address prefix-list DEFAULT-ROUTE
         set community 10:500</pre>
            <p><strong>ржмрзНржпрж╛ржЦрзНржпрж╛:</strong><br>
            ржпржжрж┐ TR1 ржерзЗржХрзЗ default route (0.0.0.0/0) ржЖрж╕рзЗ, рждрж╛рж╣рж▓рзЗ 10:500 community ржжрзЗржУрзЯрж╛ рж╣ржмрзЗ (ржорж╛ржирзЗ ржПржЯрж╛ Customer Inbound (CUST-IN) рж╣рж┐рж╕рзЗржмрзЗ ржзрж░рж╛ рж╣ржмрзЗ)ред</p>
        
            <pre>route-map RM-TR1-IN permit 20
         set community 10:10</pre>
            <p>ржЖрж░ ржпржжрж┐ ржЕржирзНржп ржХрзЛржирзЛ prefix ржЖрж╕рзЗ (default ржЫрж╛рзЬрж╛), рждрж╛ржХрзЗ 10:10 community ржжрзЗржУрзЯрж╛ рж╣ржмрзЗ (ржорж╛ржирзЗ TR1-IN) ржПржмржВ LP рж╣ржмрзЗ рззрзжрзжред<br>
            <strong>ржЙржжрзНржжрзЗрж╢рзНржп:</strong><br>
            TR1 ржерзЗржХрзЗ ржбрж┐ржлрж▓рзНржЯ рж░рзБржЯ ржПрж▓рзЗ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржм (CUST-IN), ржЖрж░ ржмрж╛ржХрж┐ рж░рзБржЯ рж╕рж╛ржзрж╛рж░ржг ржЯрзНрж░рж╛ржиржЬрж┐ржЯ рж╣рж┐рж╕рзЗржмрзЗред</p>
        
            <h2>рзй. BR2 (Border Router 2)</h2>
            <pre>route-map RM-TR2-IN permit 10
         match ip address prefix-list DEFAULT-ROUTE
         set community 10:500</pre>
            <p>TR2 ржерзЗржХрзЗ ржбрж┐ржлрж▓рзНржЯ рж░рзБржЯ ржПрж▓рзЗ CUST-IN (рззрзж:рзлрзжрзж)ред</p>
        
            <pre>route-map RM-TR2-IN permit 20
         set community 10:20</pre>
            <p>TR2 ржерзЗржХрзЗ ржЕржирзНржп рж░рзБржЯ ржПрж▓рзЗ 10:20 community (ржорж╛ржирзЗ TR2-IN), LP рж╣ржмрзЗ рззрзжрзжред</p>
        
            <h2>рзк. PR1 (Peering Router 1)</h2>
            <pre>route-map RM-IXP-IN permit 10
         set community 10:30
         set local-preference 300</pre>
            <p><strong>ржмрзНржпрж╛ржЦрзНржпрж╛:</strong><br>
            IXP ржерзЗржХрзЗ ржЖрж╕рж╛ рж░рзБржЯржХрзЗ 10:30 ржХржорж┐ржЙржирж┐ржЯрж┐ ржжрж┐ржмрзЗ ржПржмржВ Local Preference 300 рж╕рзЗржЯ ржХрж░ржмрзЗред<br>
            ржлрж▓рзЗ IXP ржерзЗржХрзЗ ржЖрж╕рж╛ рж░рзБржЯ internal network-ржП ржмрзЗрж╢рж┐ ржкрзНрж░рзЗржлрж╛рж░ рж╣ржмрзЗред</p>
        
            <pre>route-map RM-PP-IN permit 10
         set community 10:40
         set local-preference 400</pre>
            <p>Private Peering (PP) ржерзЗржХрзЗ ржПрж▓рзЗ 10:40 ржХржорж┐ржЙржирж┐ржЯрж┐ ржПржмржВ LP рзкрзжрзж (ржорж╛ржирзЗ ржЖрж░ржУ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржм)ред</p>
        
            <h2>рзл. AR1 (Access Router 1)</h2>
            <pre>route-map RM-CUST-IN permit 10
         set community 10:50
         set local-preference 500</pre>
            <p><strong>ржмрзНржпрж╛ржЦрзНржпрж╛:</strong><br>
            ржХрж╛рж╕рзНржЯржорж╛рж░ ржерзЗржХрзЗ ржЖрж╕рж╛ prefix рж╣рж▓рзЗ 10:50 ржХржорж┐ржЙржирж┐ржЯрж┐ ржПржмржВ LP рзлрзжрзж (ржорж╛ржирзЗ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржм ржкрж╛ржмрзЗ, ржпрзЗржирзЛ ржХрж╛рж╕рзНржЯржорж╛рж░рзЗрж░ рж░рзБржЯ ржЖржЧрзЗ ржмрзЗржЫрзЗ ржирзЗрзЯ)ред</p>
        
            <h2>рзм. AR2 (Access Router 2)</h2>
            <pre>route-map RM-CUST-IN permit 10
         set community 10:50
         set local-preference 500</pre>
            <p>AR2-ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗржУ ржПржХржЗ ржирж┐рзЯржо, ржХрж╛рж╕рзНржЯржорж╛рж░ ржерзЗржХрзЗ ржПрж▓рзЗ 10:50 ржУ LP рзлрзжрзжред</p>
        
            <h2>ЁЯФС ржорзЛржЯрж╛ржорзБржЯрж┐ рж╕рж╛рж░рж╛ржВрж╢:</h2>
            <table border="1">
                <tr>
                    <th>Source</th>
                    <th>Community</th>
                    <th>Local Preference (LP)</th>
                    <th>Priority (Importance)</th>
                </tr>
                <tr>
                    <td>TR1-IN</td>
                    <td>10:10</td>
                    <td>100</td>
                    <td>Low (Transit)</td>
                </tr>
                <tr>
                    <td>TR2-IN</td>
                    <td>10:20</td>
                    <td>100</td>
                    <td>Low (Transit)</td>
                </tr>
                <tr>
                    <td>IXP-IN</td>
                    <td>10:30</td>
                    <td>300</td>
                    <td>Medium</td>
                </tr>
                <tr>
                    <td>PP-IN (Private)</td>
                    <td>10:40</td>
                    <td>400</td>
                    <td>High</td>
                </tr>
                <tr>
                    <td>CUST-IN (Customer)</td>
                    <td>10:50</td>
                    <td>500</td>
                    <td>Highest (Most Priority)</td>
                </tr>
                <tr>
                    <td>OWN-PREFIX</td>
                    <td>10:60</td>
                    <td></td>
                    <td>Own Routes</td>
                </tr>

                <h1>Router ржмрж┐рж╢рзНрж▓рзЗрж╖ржг</h1>
            
                <h2>рзз. тЬЕ Core Router 1 (CR1) ржмрж┐рж╢рзНрж▓рзЗрж╖ржг</h2>
                <h3>Route-map:</h3>
                <pre>route-map RM-TO-ALL-EBGP permit 10
             set community 10:60 10:111</pre>
                <p><strong>ржХрзА ржХрж░ржЫрзЗ?</strong><br>
                ржпржЦржи CR1 рждрж╛рж░ ржирж┐ржЬрзЗрж░ ржирзЗржЯржУрзЯрж╛рж░рзНржХ (10.10.0.0/22) BGP ржжрж┐рзЯрзЗ ржмрж╛ржЗрж░рзЗрж░ ржжрж┐ржХрзЗ ржкрж╛ржарж╛ржмрзЗ, рждржЦржи ржПржЗ ржжрзБржЗржЯрж╛ community tag ржжрж┐ржмрзЗ:<br>
                10:60 тЖТ OWN-PREFIX (ржорж╛ржирзЗ ржПржЯрж╛ ржЖржорж╛ржжрзЗрж░ ржирж┐ржЬрзЗрж░ prefix)<br>
                10:111 тЖТ Uniform Advertisement (ржорж╛ржирзЗ ржПржЗ prefix рж╕ржм EBGP peer-ржжрзЗрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛рждрзЗ рж╣ржмрзЗред)</p>
            
                <h3>Network Advertisement:</h3>
                <pre>router bgp 10
             address-family ipv4 unicast
             network 10.10.0.0 mask 255.255.252.0 route-map RM-TO-ALL-EBGP</pre>
                <p>ржЕрж░рзНржерж╛рзО, 10.10.0.0/22 ржирзЗржЯржУрзЯрж╛рж░рзНржХржЯрж╛ ржпржЦржи advertise рж╣ржмрзЗ, рждржЦржи route-map ржЕржирзБржпрж╛рзЯрзА community tag рж╕рж╣ ржпрж╛ржмрзЗред</p>
            
                <h2>рзи. тЬЕ Border Router 1 (BR1) ржмрж┐рж╢рзНрж▓рзЗрж╖ржг</h2>
                <h3>Route-map:</h3>
                <pre>route-map RM-TR1-IN permit 10
             match ip address prefix-list DEFAULT-ROUTE
             set community 10:500</pre>
                <p><strong>ржХрж╛ржЬ:</strong><br>
                ржпржжрж┐ TR1 ржерзЗржХрзЗ default route (0.0.0.0/0) ржЖрж╕рзЗ, рждржмрзЗ рждрж╛ржХрзЗ community 10:500 (CUST-IN) ржжрж┐ржмрзЗред</p>
            
                <pre>route-map RM-TR1-IN permit 20
             set community 10:10</pre>
                <p>ржмрж╛ржХрж┐ рж╕ржм prefix (ржпрж╛ default ржирзЯ) ржХрзЗ 10:10 ржжрж┐ржмрзЗ (TR1-IN)ред</p>
                <p><strong>рж▓ржХрзНрж╖рзНржп:</strong><br>
                Default route ржХрзЗ Highest Priority ржжрж┐рзЯрзЗ announce ржХрж░ржмрзЗ, ржХрж╛рж░ржг CUST-IN community ржерж╛ржХрзЗред<br>
                ржмрж╛ржХрж┐ ржЯрзНрж░рж╛ржиржЬрж┐ржЯ рж░рзБржЯ рж╕рж╛ржзрж╛рж░ржг ржЯрзНрж░рж╛ржиржЬрж┐ржЯ рж╣рж┐рж╕рзЗржмрзЗ ржХржо ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред</p>
            
                <h2>рзй. тЬЕ Border Router 2 (BR2) ржмрж┐рж╢рзНрж▓рзЗрж╖ржг</h2>
                <h3>Route-map:</h3>
                <pre>route-map RM-TR2-IN permit 10
             match ip address prefix-list DEFAULT-ROUTE
             set community 10:500</pre>
                <p>TR2 ржерзЗржХрзЗ ржбрж┐ржлрж▓рзНржЯ рж░рзБржЯ ржПрж▓рзЗ 10:500 (CUST-IN)ред</p>
            
                <pre>route-map RM-TR2-IN permit 20
             set community 10:20</pre>
                <p>ржмрж╛ржХрж┐ рж░рзБржЯ 10:20 (TR2-IN) рж╣рж┐рж╕рзЗржмрзЗ ржпрж╛ржмрзЗред</p>
                <p><strong>рж▓ржХрзНрж╖рзНржп:</strong><br>
                TR2 ржерзЗржХрзЗржУ ржарж┐ржХ ржПржХржЗржнрж╛ржмрзЗ ржЯрзНрж░рж┐ржЯ рж╣ржмрзЗ, ржпрзЗржи ржЯрзНрж░рж╛ржиржЬрж┐ржЯ ржУ ржХрж╛рж╕рзНржЯржорж╛рж░ ржЯрзНрж░рж╛ржлрж┐ржХ ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛ ржпрж╛рзЯред</p>
            
                <h2>рзк. тЬЕ Peering Router 1 (PR1) ржмрж┐рж╢рзНрж▓рзЗрж╖ржг</h2>
                <h3>IXP ржерзЗржХрзЗ ржЗржиржмрж╛ржЙржирзНржб:</h3>
                <pre>route-map RM-IXP-IN permit 10
             set community 10:30
             set local-preference 300</pre>
                <p>IXP ржерзЗржХрзЗ ржЖрж╕рж╛ рж░рзБржЯ:<br>
                ржХржорж┐ржЙржирж┐ржЯрж┐: 10:30<br>
                LP: 300 (ржорж╛ржЭрж╛рж░рж┐ ржЧрзБрж░рзБрждрзНржм)</p>
            
                <h3>Private Peering (PP) ржерзЗржХрзЗ ржЗржиржмрж╛ржЙржирзНржб:</h3>
                <pre>route-map RM-PP-IN permit 10
             set community 10:40
             set local-preference 400</pre>
                <p>Private Peering ржерзЗржХрзЗ ржЖрж╕рж╛ рж░рзБржЯ:<br>
                ржХржорж┐ржЙржирж┐ржЯрж┐: 10:40<br>
                LP: 400 (ржЙржЪрзНржЪ ржЧрзБрж░рзБрждрзНржм)</p>
                <p><strong>рж▓ржХрзНрж╖рзНржп:</strong><br>
                IXP route тЖТ ржорж╛ржЭрж╛рж░рж┐ ржЧрзБрж░рзБрждрзНржм (LP 300)<br>
                Private peer route тЖТ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржм (LP 400)</p>
            
                <h2>рзл. тЬЕ Access Router 1 (AR1) ржмрж┐рж╢рзНрж▓рзЗрж╖ржг</h2>
                <h3>Route-map:</h3>
                <pre>route-map RM-CUST-IN permit 10
             set community 10:50
             set local-preference 500</pre>
                <p><strong>ржХрж╛ржЬ:</strong><br>
                ржХрж╛рж╕рзНржЯржорж╛рж░ рж░рзБржЯ:<br>
                ржХржорж┐ржЙржирж┐ржЯрж┐: 10:50<br>
                LP: 500 (рж╕рж░рзНржмрзЛржЪрзНржЪ ржЧрзБрж░рзБрждрзНржм)</p>
                <p><strong>рж▓ржХрзНрж╖рзНржп:</strong><br>
                ржХрж╛рж╕рзНржЯржорж╛рж░ рж░рзБржЯ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг, ржпрзЗржи ржХрж╛рж╕рзНржЯржорж╛рж░рзЗрж░ ржЯрзНрж░рж╛ржлрж┐ржХ рж╕ржмрж╕ржорзЯ ржЖржорж╛ржжрзЗрж░ ржжрж┐ржХрзЗржЗ ржЖрж╕рзЗред</p>
            
                <h2>рзм. тЬЕ Access Router 2 (AR2) ржмрж┐рж╢рзНрж▓рзЗрж╖ржг</h2>
                <h3>Route-map:</h3>
                <pre>route-map RM-CUST-IN permit 10
             set community 10:50
             set local-preference 500</pre>
                <p><strong>ржХрж╛ржЬ:</strong><br>
                AR1-ржПрж░ ржорждржЗ AR2-ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗржУ ржХрж╛рж╕рзНржЯржорж╛рж░ рж░рзБржЯ:<br>
                ржХржорж┐ржЙржирж┐ржЯрж┐: 10:50<br>
                LP: 500 (рж╕рж░рзНржмрзЛржЪрзНржЪ ржЧрзБрж░рзБрждрзНржм)</p>
            
                <h2>тнРя╕П рж╕ржВржХрзНрж╖рж┐ржкрзНржд ржЯрзЗржмрж┐рж▓ (рж╕рзНржорж░ржг рж░рж╛ржЦрж╛рж░ ржЬржирзНржп):</h2>
                <table border="1">
                    <tr>
                        <th>Router</th>
                        <th>Source</th>
                        <th>Community</th>
                        <th>Local Preference</th>
                        <th>Priority</th>
                    </tr>
                    <tr>
                        <td>CR1</td>
                        <td>Own Prefix</td>
                        <td>10:60</td>
                        <td></td>
                        <td>Own Routes</td>
                    </tr>
                    <tr>
                        <td>BR1</td>
                        <td>TR1-IN</td>
                        <td>10:10</td>
                        <td>100</td>
                        <td>Low (Transit)</td>
                    </tr>
                    <tr>
                        <td>BR1</td>
                        <td>TR1 Default Route</td>
                        <td>10:500</td>
                        <td></td>
                        <td>High (Customer inbound)</td>
                    </tr>
                    <tr>
                        <td>BR2</td>
                        <td>TR2-IN</td>
                        <td>10:20</td>
                        <td>100</td>
                        <td>Low (Transit)</td>
                    </tr>
                    <tr>
                        <td>BR2</td>
                        <td>TR2 Default Route</td>
                        <td>10:500</td>
                        <td></td>
                        <td>High (Customer inbound)</td>
                    </tr>
                    <tr>
                        <td>PR1</td>
                        <td>IXP-IN</td>
                        <td>10:30</td>
                        <td>300</td>
                        <td>Medium</td>
                    </tr>
                    <tr>
                        <td>PR1</td>
                        <td>PP-IN</td>
                        <td>10:40</td>
                        <td>400</td>
                        <td>High (Private Peer)</td>
                    </tr>
                    <tr>
                        <td>AR1</td>
                        <td>Customer</td>
                        <td>10:50</td>
                        <td>500</td>
                        <td>Highest (Customer Direct)</td>
                    </tr>
                    <tr>
                        <td>AR2</td>
                        <td>Customer</td>
                        <td>10:50</td>
                        <td>500</td>
                        <td>Highest (Customer Direct)</td>
                    </tr>
                </table>

                    <h1>Traffic Flow ржПржмржВ Routing Policy</h1>
                
                    <h2>тЬЕ рзз. Inbound Traffic Flow (ржЖржорж╛ржжрзЗрж░ Autonomous System-ржП ржврзЛржХрж╛ ржЯрзНрж░рж╛ржлрж┐ржХ)</h2>
                    <h3>ЁЯОп рж▓ржХрзНрж╖рзНржп:</h3>
                    <ul>
                        <li>ржХрж╛рж╕рзНржЯржорж╛рж░ ржЯрзНрж░рж╛ржлрж┐ржХ highest priority ржжрж┐рзЯрзЗ ржврзБржХржмрзЗред</li>
                        <li>Private Peering > IXP > Transit рж░рзБржЯ рж╣рж┐рж╕рзЗржмрзЗ inbound ржЖрж╕ржмрзЗред</li>
                        <li>ржЖржорж╛ржжрзЗрж░ ржирж┐ржЬрж╕рзНржм Prefix (Own) рж╕рж░рзНржмрждрзНрж░ announce рж╣ржмрзЗред</li>
                    </ul>
                
                    <h3>ЁЯУК Inbound Priority Order (ржЙржЪрзНржЪ ржерзЗржХрзЗ ржирж┐ржорзНржи):</h3>
                    <table border="1">
                        <tr>
                            <th>Priority</th>
                            <th>Source</th>
                            <th>Community</th>
                            <th>Local Preference</th>
                        </tr>
                        <tr>
                            <td>1я╕ПтГг</td>
                            <td>Customer via AR1/AR2</td>
                            <td>10:50</td>
                            <td>500</td>
                        </tr>
                        <tr>
                            <td>2я╕ПтГг</td>
                            <td>Private Peer via PR1</td>
                            <td>10:40</td>
                            <td>400</td>
                        </tr>
                        <tr>
                            <td>3я╕ПтГг</td>
                            <td>IXP via PR1</td>
                            <td>10:30</td>
                            <td>300</td>
                        </tr>
                        <tr>
                            <td>4я╕ПтГг</td>
                            <td>Transit via TR1/TR2 (BR1/BR2)</td>
                            <td>10:10/10:20</td>
                            <td>100</td>
                        </tr>
                    </table>
                
                    <h3>ЁЯТб ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ:</h3>
                    <ul>
                        <li>ржХрж╛рж╕рзНржЯржорж╛рж░рзЗрж░ ржЬржирзНржп LP 500, рждрж╛ржЗ ржпрзЗржХрзЛржирзЛ рж░рзБржЯ ржпржжрж┐ ржХрж╛рж╕рзНржЯржорж╛рж░ ржУ ржЕржирзНржп ржХрзЗржЙ ржжрзЗрзЯ тАФ ржХрж╛рж╕рзНржЯржорж╛рж░ рж░рзБржЯ ржмрзЗржЫрзЗ ржирзЗржУрзЯрж╛ рж╣ржмрзЗред</li>
                        <li>ржпржжрж┐ ржХрж╛рж╕рзНржЯржорж╛рж░ ржирж╛ ржерж╛ржХрзЗ, рждржмрзЗ Private Peer (LP 400) ржерзЗржХрзЗ ржирзЗржмрзЗред</li>
                        <li>Private Peer ржирж╛ ржерж╛ржХрж▓рзЗ IXP (LP 300)ред</li>
                        <li>ржЖрж░ рж╢рзЗрж╖рзЗ Transit Provider (LP 100)ред</li>
                    </ul>
                
                    <h2>тЬЕ рзи. Outbound Routing Policy (ржЖржорж╛ржжрзЗрж░ Autonomous System ржерзЗржХрзЗ ржмрж╛ржЗрж░рзЗрж░ ржжрж┐ржХрзЗ ржпрж╛ржУрзЯрж╛ ржЯрзНрж░рж╛ржлрж┐ржХ)</h2>
                    <h3>ЁЯОп рж▓ржХрзНрж╖рзНржп:</h3>
                    <ul>
                        <li>ржирж┐ржЬрж╕рзНржм prefix (Own) рж╕ржмрж╛рж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржирзЛред</li>
                        <li>ржмрж┐ржнрж┐ржирзНржи ржЧржирзНрждржмрзНржпрзЗ ржЯрзНрж░рж╛ржлрж┐ржХ ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп community-tag ржжрж┐рзЯрзЗ preference рждрзИрж░рж┐ ржХрж░рж╛ред</li>
                    </ul>
                
                    <h3>ЁЯУК Community Tag ржЕржирзБржпрж╛рзЯрзА ржЯрзНрж░рж╛ржлрж┐ржХ ржХржирзНржЯрзНрж░рзЛрж▓:</h3>
                    <table border="1">
                        <tr>
                            <th>Destination</th>
                            <th>Community to Set</th>
                            <th>Action</th>
                        </tr>
                        <tr>
                            <td>Own Prefix (CR1)</td>
                            <td>10:60 10:111</td>
                            <td>рж╕ржм EBGP peer-ржПрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗред</td>
                        </tr>
                        <tr>
                            <td>Customers (AR1/AR2)</td>
                            <td>10:50</td>
                            <td>Inbound ржЯрзНрж░рж╛ржлрж┐ржХ рж╕рж░рзНржмрзЛржЪрзНржЪ ржЧрзБрж░рзБрждрзНржм ржжрж┐рзЯрзЗ ржХрж╛рж╕рзНржЯржорж╛рж░рзЗрж░ ржжрж┐ржХрзЗ ржкрж╛ржарж╛ржирзЛред</td>
                        </tr>
                        <tr>
                            <td>Private Peer (PR1)</td>
                            <td>10:40</td>
                            <td>Peer link ржП ржЯрзНрж░рж╛ржлрж┐ржХ ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп ржорж╛ржЭрж╛рж░рж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред</td>
                        </tr>
                        <tr>
                            <td>IXP (PR1)</td>
                            <td>10:30</td>
                            <td>ржЗржирзНржЯрж╛рж░ржирзЗржЯ exchange point ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЯрзНрж░рж╛ржлрж┐ржХред</td>
                        </tr>
                        <tr>
                            <td>Transit Provider (BR1/BR2)</td>
                            <td>10:10, 10:20</td>
                            <td>рж╢рзЗрж╖ ржмрж┐ржХрж▓рзНржк рж╣рж┐рж╕рзЗржмрзЗ ржЯрзНрж░рж╛ржиржЬрж┐ржЯред</td>
                        </tr>
                    </table>
                
                    <h3>ЁЯТб ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ:</h3>
                    <ul>
                        <li>ржирж┐ржЬрзЗрж░ prefix (Own) рж╕ржм peer-ржХрзЗ advertise ржХрж░рзЗред</li>
                        <li>ржХрж╛рж╕рзНржЯржорж╛рж░ ржпржжрж┐ ржЧржирзНрждржмрзНржп ржерж╛ржХрзЗ, рж╕рзЗржЦрж╛ржирзЗржЗ ржкрж╛ржарж╛рзЯ (LP 500)ред</li>
                        <li>ржирж╛ ржерж╛ржХрж▓рзЗ Private peer, рждрж╛рж░ржкрж░ IXP, рж╕ржмрж╢рзЗрж╖рзЗ Transit.</li>
                    </ul>
                
                    <h2>тЬЕ рзй. ржХрж┐ржнрж╛ржмрзЗ Community Tag ржжрзЗржЦрзЗ Traffic Manipulate ржХрж░рж╛ ржпрж╛ржмрзЗ?</h2>
                    <h3>ЁЯОп рж▓ржХрзНрж╖рзНржп:</h3>
                    <ul>
                        <li>ржХрж╛рж╕рзНржЯржорж╛рж░ ржЯрзНрж░рж╛ржлрж┐ржХ highest priority.</li>
                        <li>Transit ржХржо important.</li>
                        <li>ржмрж┐ржнрж┐ржирзНржи peer-ржПрж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ ржирзАрждрж┐ (policy)ред</li>
                    </ul>
                
                    <h3>ЁЯУЪ ржЙржжрж╛рж╣рж░ржг:</h3>
                    <ol>
                        <li><strong>ржХрж╛рж╕рзНржЯржорж╛рж░ (AR1/AR2):</strong><br>
                            Community: 10:50, LP: 500 тЖТ рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржмред<br>
                            ржПрж░ ржорж╛ржирзЗ: ржХрж╛рж╕рзНржЯржорж╛рж░ ржпржжрж┐ ржХрзЛржи prefix ржжрзЗрзЯ, рж╕рзЗржЯрж╛ ржжрж┐рзЯрзЗржЗ ржЖржорж░рж╛ ржЗржи ржПржмржВ ржЖржЙржЯ ржЯрзНрж░рж╛ржлрж┐ржХ ржкрж╛ржарж╛ржмрзЛред</li>
                        <li><strong>Private Peer (PR1):</strong><br>
                            Community: 10:40, LP: 400 тЖТ ржХрж╛рж╕рзНржЯржорж╛рж░ ржЫрж╛рзЬрж╛ ржмрж╛ржХрж┐ рж╕ржмрзЗрж░ ржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред<br>
                            ржЙржжрж╛рж╣рж░ржг: ржпржжрж┐ ржХрж╛рж╕рзНржЯржорж╛рж░ ржУржЗ prefix announce ржирж╛ ржХрж░рзЗ, ржХрж┐ржирзНрждрзБ Private Peer ржХрж░рзЗ, рждрж╛рж╣рж▓рзЗ Private Peer ржжрж┐рзЯрзЗ ржЯрзНрж░рж╛ржлрж┐ржХ ржпрж╛ржмрзЗред</li>
                        <li><strong>IXP (PR1):</strong><br>
                            Community: 10:30, LP: 300 тЖТ ржорж╛ржЭрж╛рж░рж┐ ржЧрзБрж░рзБрждрзНржмред<br>
                            ржЙржжрж╛рж╣рж░ржг: ржпржжрж┐ ржХрж╛рж╕рзНржЯржорж╛рж░ ржУ Private Peer ржХрзЗржЙ ржирж╛ ржжрзЗрзЯ, рждржмрзЗ IXP ржжрж┐рзЯрзЗ ржЯрзНрж░рж╛ржлрж┐ржХ ржпрж╛ржмрзЗред</li>
                        <li><strong>Transit (BR1/BR2):</strong><br>
                            Community: 10:10, 10:20, LP: 100 тЖТ рж╕ржмржЪрзЗрзЯрзЗ ржХржо ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред<br>
                            рж╢рзБржзрзБ рждржЦржиржЗ ржмрзНржпржмрж╣рж╛рж░ рж╣ржмрзЗ, ржпржЦржи ржЖрж░ ржХрзЛржирзЛ ржкрже ржерж╛ржХржмрзЗ ржирж╛ред</li>
                    </ol>
                
                    <h3>тнРя╕П ржЙржжрж╛рж╣рж░ржгрж╕рж╣ ржЪрж┐рждрзНрж░рзЗрж░ ржорждрзЛ ржнрж╛ржмрзЛ:</h3>
                    <pre>
                     +---------+            +---------+            +----------+
                     | Transit | --(LP 100)-|          |--(LP 500)-| Customer |
                     |  (BR1)  |            |   Core   |            |  (AR1)   |
                     +---------+            |  Router  |            +----------+
                                           /           \
                                          /             \
                                  +------------+    +------------+
                                  | Private    |    | IXP        |
                                  | Peer (PR1) |    | (PR1)      |
                                  +------------+    +------------+
                                        (LP 400)         (LP 300)
                    </pre>
                    <p>ржЯрзНрж░рж╛ржлрж┐ржХ ржкрзНрж░ржержорзЗ ржХрж╛рж╕рзНржЯржорж╛рж░рзЗрж░ ржжрж┐ржХрзЗ ржпрж╛ржмрзЗред<br>
                    ржпржжрж┐ ржХрж╛рж╕рзНржЯржорж╛рж░ ржирж╛ ржерж╛ржХрзЗ, Private Peerред<br>
                    рждрж╛рж░ржкрж░ IXPред<br>
                    рж╢рзЗрж╖рзЗ Transitред</p>
                
                    <h2>ЁЯЪА рж╕ржВржХрзНрж╖рзЗржкрзЗ:</h2>
                    <table border="1">
                        <tr>
                            <th>ржЯрзНрж░рж╛ржлрж┐ржХ ржЙрзОрж╕ (Source)</th>
                            <th>Community</th>
                            <th>Local Preference</th>
                            <th>Priority</th>
                        </tr>
                        <tr>
                            <td>Customer (AR1/AR2)</td>
                            <td>10:50</td>
                            <td>500</td>
                            <td>1 (Highest)</td>
                        </tr>
                        <tr>
                            <td>Private Peer (PR1)</td>
                            <td>10:40</td>
                            <td>400</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td>IXP (PR1)</td>
                            <td>10:30</td>
                            <td>300</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td>Transit (BR1/BR2)</td>
                            <td>10:10/10:20</td>
                            <td>100</td>
                            <td>4 (Lowest)</td>
                        </tr>
                    </table>

                    <body>
                        <h1>ЁЯМР Traffic Flow Diagram (Inbound & Outbound Priority Flow)</h1>
                    
                        <pre>
                                                   [ Our AS/Network ]
                                                            |
                                              +-------------+-------------+
                                              |                           |
                                         (Own Prefix)                [ Core Router (CR1) ]
                                              |                           |
                                        Announced to All           +------+------+------+
                                                                   |      |      |      |
                                                                [AR1]  [PR1]  [IXP]  [TR1/TR2]
                                                                 |      |      |      |
                                                            Customer  Private   IXP   Transit
                                                                      Peer
                        </pre>
                    
                        <h2>тЬЕ рзз. Inbound Traffic Flow (ржЖржорж╛ржжрзЗрж░ ржжрж┐ржХрзЗ ржЖрж╕рж╛ ржЯрзНрж░рж╛ржлрж┐ржХ)</h2>
                        <table border="1">
                            <tr>
                                <th>Priority</th>
                                <th>Path</th>
                                <th>Community Tag</th>
                                <th>Local Preference</th>
                                <th>Explanation</th>
                            </tr>
                            <tr>
                                <td>1я╕ПтГг</td>
                                <td>Customer (AR1/AR2)</td>
                                <td>10:50</td>
                                <td>500</td>
                                <td>ржХрж╛рж╕рзНржЯржорж╛рж░ ржЯрзНрж░рж╛ржлрж┐ржХ рж╕рж░рзНржмрзЛржЪрзНржЪ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░</td>
                            </tr>
                            <tr>
                                <td>2я╕ПтГг</td>
                                <td>Private Peer (PR1)</td>
                                <td>10:40</td>
                                <td>400</td>
                                <td>ржХрж╛рж╕рзНржЯржорж╛рж░ ржирж╛ ржерж╛ржХрж▓рзЗ ржкрж░ржмрж░рзНрждрзА ржкрже</td>
                            </tr>
                            <tr>
                                <td>3я╕ПтГг</td>
                                <td>IXP (PR1)</td>
                                <td>10:30</td>
                                <td>300</td>
                                <td>ржХрж╛рж╕рзНржЯржорж╛рж░/ржкрзНрж░рж╛ржЗржнрзЗржЯ ржкрж┐рзЯрж╛рж░ ржирж╛ ржерж╛ржХрж▓рзЗ</td>
                            </tr>
                            <tr>
                                <td>4я╕ПтГг</td>
                                <td>Transit (TR1/TR2 via BR1/BR2)</td>
                                <td>10:10/10:20</td>
                                <td>100</td>
                                <td>рж╕ржмрж╢рзЗрж╖ ржмрж┐ржХрж▓рзНржк</td>
                            </tr>
                        </table>
                    
                        <h2>тЬЕ рзи. Outbound Traffic Flow (ржЖржорж╛ржжрзЗрж░ ржерзЗржХрзЗ ржмрж╛ржЗрж░рзЗ ржпрж╛ржУрзЯрж╛рж░ ржкрже)</h2>
                        <table border="1">
                            <tr>
                                <th>Prefix Type</th>
                                <th>Advertised To</th>
                                <th>Community Tag</th>
                                <th>Note</th>
                            </tr>
                            <tr>
                                <td>Own Prefix (10.60, 10.111)</td>
                                <td>All Peers (AR, PR, IXP, TR)</td>
                                <td>10:60, 10:111</td>
                                <td>рж╕ржмрж╛ржЗржХрзЗ Announce ржХрж░рж╛ рж╣ржмрзЗ</td>
                            </tr>
                            <tr>
                                <td>Customer Prefix</td>
                                <td>Customers (AR1/AR2)</td>
                                <td>10:50</td>
                                <td>ржХрж╛рж╕рзНржЯржорж╛рж░ржХрзЗржЗ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░</td>
                            </tr>
                            <tr>
                                <td>Private Peer Prefix</td>
                                <td>Private Peer (PR1)</td>
                                <td>10:40</td>
                                <td>ржмрж┐ржХрж▓рзНржк ржкрже</td>
                            </tr>
                            <tr>
                                <td>IXP Prefix</td>
                                <td>IXP (PR1)</td>
                                <td>10:30</td>
                                <td>ржжрзНржмрж┐рждрзАрзЯ ржмрж┐ржХрж▓рзНржк</td>
                            </tr>
                            <tr>
                                <td>Transit Prefix</td>
                                <td>Transit Providers (BR1/BR2)</td>
                                <td>10:10, 10:20</td>
                                <td>рж╢рзЗрж╖ ржмрж┐ржХрж▓рзНржк</td>
                            </tr>
                        </table>
                    
                        <h2>тЬЕ рзй. рж╕рж╣ржЬ ржнрж╛рж╖рж╛рзЯ Flow:</h2>
                        <h3>ЁЯОп Inbound (ржмрж╛ржЗрж░рзЗ ржерзЗржХрзЗ ржЖржорж╛ржжрзЗрж░ ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗ ржЖрж╕рж╛):</h3>
                        <ul>
                            <li>тЮбя╕П ржкрзНрж░ржержорзЗ ржХрж╛рж╕рзНржЯржорж╛рж░ ржжрзЗржЦрждрзЗ рж╣ржмрзЗ (Highest Preference) тЖТ ржирж╛ ржкрзЗрж▓рзЗ Private Peer тЖТ ржирж╛ ржкрзЗрж▓рзЗ IXP тЖТ рж╕ржмрж╢рзЗрж╖рзЗ Transitред</li>
                        </ul>
                    
                        <h3>ЁЯОп Outbound (ржЖржорж╛ржжрзЗрж░ ржерзЗржХрзЗ ржмрж╛ржЗрж░рзЗрж░ ржжрж┐ржХрзЗ ржкрж╛ржарж╛ржирзЛ):</h3>
                        <ul>
                            <li>тЮбя╕П ржирж┐ржЬрзЗрж░ Prefix рж╕ржмрж╛ржЗржХрзЗ ржжрзЗржУрзЯрж╛ тЖТ ржХрж╛рж╕рзНржЯржорж╛рж░ржХрзЗ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░ ржжрж┐рзЯрзЗ ржЯрзНрж░рж╛ржлрж┐ржХ ржкрж╛ржарж╛ржирзЛ тЖТ ржирж╛ ржкрзЗрж▓рзЗ Private Peer тЖТ IXP тЖТ Transitред</li>
                        </ul>
                    
                        <h3>ЁЯОп рж╕ржВржХрзНрж╖рзЗржкрзЗ Flow Summary:</h3>
                        <pre>
                    Inbound: Customer > Private Peer > IXP > Transit
                    Outbound: Prefer Customer > Private Peer > IXP > Transit
                        </pre>
                    
                        <h2>ЁЯФС ржЪрж┐рждрзНрж░рзЗрж░ ржорждрзЛ ржоржирзЗ рж░рж╛ржЦрзЛ:</h2>
                        <pre>
                                    [Customer]
                                        тЖС
                                    [Private Peer]
                                        тЖС
                                       [IXP]
                                        тЖС
                                     [Transit]
                    Inbound: ржирж┐ржЪ ржерзЗржХрзЗ ржЙржкрж░рзЗрж░ ржжрж┐ржХрзЗ ржЪрж╛рзЯред
                    Outbound: ржЙржкрж░рзЗрж░ ржерзЗржХрзЗ ржирж┐ржЪрзЗ ржкрж╛ржарж╛рзЯред
                        </pre>

    <h1>тЬЕ BGP Configuration Format (Policy ржмрж╛ржирж╛ржирзЛ)</h1>
    <p>ржзрж░рж╛ ржпрж╛ржХ, ржЖржорж░рж╛ ржПржХржЯрж╛ ISP, ржЖржорж╛ржжрзЗрж░ BGP session ржЧрзБрж▓рзЛ рж╣рж▓рзЛ:</p>
    <ul>
        <li>Customer AS тЖТ High preference (in & out)</li>
        <li>Private Peer AS тЖТ Medium preference</li>
        <li>IXP AS тЖТ Lower preference</li>
        <li>Transit AS тЖТ Lowest preference</li>
    </ul>

    <h2>Step 1: Inbound Path Selection (Local Preference based)</h2>
    <p>ЁЯФС Inbound Traffic ржПрж░ ржЬржирзНржп LOCAL_PREF ржжрж┐рзЯрзЗржЗ рж╕рж╛ржзрж╛рж░ржгржд ржарж┐ржХ ржХрж░рж┐ред<br>
    High Local-Pref = ржмрзЗрж╢рж┐ Priority</p>

    <pre>
# Example for Customer (Highest Priority)
route-map FROM-CUSTOMER-IN permit 10
 set local-preference 200

# Example for Private Peer (Medium Priority)
route-map FROM-PRIVATE-PEER-IN permit 10
 set local-preference 150

# Example for IXP (Lower Priority)
route-map FROM-IXP-IN permit 10
 set local-preference 100

# Example for Transit (Lowest Priority)
route-map FROM-TRANSIT-IN permit 10
 set local-preference 50
    </pre>
    <p><strong>ЁЯФе Note:</strong><br>
    ржПржЦрж╛ржирзЗ Customer-ржПрж░ Local-Pref рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐ (200), рждрж╛ржЗ рж╕рзЗржЯрж╛ржЗ ржмрзЗржЫрзЗ ржирзЗржмрзЗ ржкрзНрж░ржержорзЗред<br>
    Transit-ржПрж░ Local-Pref рж╕ржмржЪрзЗрзЯрзЗ ржХржо (50), ржХрж╛ржЬрзЗржЗ ржПржЯрж╛ fallback рж╣ржмрзЗред</p>

    <h2>Step 2: Outbound Path Selection (AS-Path Prepend based)</h2>
    <p>ЁЯФС Outbound Traffic-ржПрж░ ржЬржирзНржп ржЖржорж░рж╛ AS-Path Prepend ржжрж┐рзЯрзЗ control ржХрж░рж┐ред<br>
    ржХржо AS-PATH = ржмрзЗрж╢рж┐ Priority</p>

    <pre>
# For Customer (No prepend, Highest Priority)
route-map TO-CUSTOMER-OUT permit 10
 # No AS-Path prepend, direct path

# For Private Peer (No prepend, medium-high)
route-map TO-PRIVATE-PEER-OUT permit 10
 # No prepend, direct path

# For IXP (Low Priority, Prepend 2 times)
route-map TO-IXP-OUT permit 10
 set as-path prepend [OUR-ASN] [OUR-ASN]

# For Transit (Lowest Priority, Prepend 3 times)
route-map TO-TRANSIT-OUT permit 10
 set as-path prepend [OUR-ASN] [OUR-ASN] [OUR-ASN]
    </pre>
    <p><strong>ЁЯФе Note:</strong><br>
    ржпрзЗрж╕ржм path ржЖржорж░рж╛ ржХржо ржкржЫржирзНржж ржХрж░рж┐ (IXP, Transit), рж╕рзЗржЧрзБрж▓рзЛрждрзЗ ржмрзЗрж╢рж┐ AS-Path Prependред<br>
    Customer/Private Peer ржП ржХрзЛржирзЛ prepend ржирж╛ржЗ, рж╕рж░рж╛рж╕рж░рж┐ ржжрзНрж░рзБржд ржкржеред</p>

    <h2>Step 3: Neighbor ржП Apply ржХрж░рж╛</h2>
    <pre>
# Customer BGP Neighbor
router bgp [OUR-ASN]
 neighbor [Customer-IP] remote-as [Customer-AS]
 neighbor [Customer-IP] route-map FROM-CUSTOMER-IN in
 neighbor [Customer-IP] route-map TO-CUSTOMER-OUT out

# Private Peer BGP Neighbor
 neighbor [Private-Peer-IP] remote-as [Private-Peer-AS]
 neighbor [Private-Peer-IP] route-map FROM-PRIVATE-PEER-IN in
 neighbor [Private-Peer-IP] route-map TO-PRIVATE-PEER-OUT out

# IXP BGP Neighbor
 neighbor [IXP-IP] remote-as [IXP-AS]
 neighbor [IXP-IP] route-map FROM-IXP-IN in
 neighbor [IXP-IP] route-map TO-IXP-OUT out

# Transit BGP Neighbor
 neighbor [Transit-IP] remote-as [Transit-AS]
 neighbor [Transit-IP] route-map FROM-TRANSIT-IN in
 neighbor [Transit-IP] route-map TO-TRANSIT-OUT out
    </pre>

    <h2>тЬЕ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржУ ржмрзНржпрж╛ржЦрзНржпрж╛ (Step by Step)</h2>
    <h3>тЮд Inbound Traffic:</h3>
    <p><strong>ржХрзЗржи Local-Pref?</strong><br>
    ржпржЦржи ржмрж╛ржЗрж░рзЗрж░ ржжрзБржирж┐рзЯрж╛ ржерзЗржХрзЗ ржЖржорж╛ржжрзЗрж░ IP/Prefix ржПрж░ ржЬржирзНржп рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржЖрж╕ржмрзЗ, рждржЦржи ржЖржорж░рж╛ ржЪрж╛ржЗ ржХрзЗ ржЖржЧрзЗ ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржПржирзЗ ржжрзЗржмрзЗред<br>
    ржЖржорж░рж╛ ржЪрж╛ржЗржмрзЛ Customer ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЖрж╕рзБржХ (ржХрж╛рж░ржг ржПржЯрж╛ ржЖржорж╛ржжрзЗрж░ ржЖрзЯ)ред рждрж╛ржЗ Customer ржХрзЗ Local-Pref 200 ржжрж┐ржЪрзНржЫрж┐ред<br>
    Private Peer = 150, IXP = 100, Transit = 50ред<br>
    рждрж╛рж╣рж▓рзЗ ржпрзЗржХрзЛржирзЛ ржкрже ржпржжрж┐ Customer ржжрж┐рзЯрзЗ ржЖрж╕рзЗ, ржЖржорж░рж╛ рж╕рзЗржЗ ржкрже ржЖржЧрзЗ ржирзЗржмред</p>

    <h3>тЮд Outbound Traffic:</h3>
    <p><strong>ржХрзЗржи AS-Path Prepend?</strong><br>
    ржЖржорж░рж╛ ржпржЦржи ржЕржирзНржпржжрзЗрж░ IP/Prefix ржП ржпрзЗрждрзЗ ржЪрж╛ржЗ, рждржЦржи ржЖржорж░рж╛ ржЪрж╛ржЗ ржЖржорж╛ржжрзЗрж░ ржЯрзНрж░рж╛ржлрж┐ржХ ржЖржЧрзЗ Customer/Peer ржжрж┐рзЯрзЗ ржпрж╛ржХред ржХрж╛рж░ржг ржПрждрзЗ ржЖржорж╛ржжрзЗрж░ ржЖрзЯ ржмрзЗрж╢рж┐ред<br>
    ржпржжрж┐ рждрж╛ рж╕ржорзНржнржм ржирж╛ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ IXP, ржЖрж░ рж╕ржм рж╢рзЗрж╖рзЗ Transitред<br>
    рждрж╛ржЗ IXP, Transit ржП ржмрзЗрж╢рж┐ ржмрж╛рж░ ржЖржорж╛ржжрзЗрж░ ASN ржмрж╕рж┐рзЯрзЗ ржжрж┐рзЯрзЗ (prepend) ржХрж░рзЗ ржжрж┐ржЪрзНржЫрж┐ред ржПрждрзЗ ржмрж╛ржЗрж░рзЗрж░ ISP ржЧрзБрж▓рзЛ ржЖржЧрзЗ ржЫрзЛржЯ AS-path ржЧрзБрж▓рзЛ ржмрзЗржЫрзЗ ржирзЗржмрзЗред</p>

    <h3>тЮд Priority Flow Recap:</h3>
    <table border="1">
        <tr>
            <th>Path Type</th>
            <th>Inbound Priority (Local-Pref)</th>
            <th>Outbound Priority (AS-Path Prepend)</th>
        </tr>
        <tr>
            <td>Customer</td>
            <td>200 (Highest)</td>
            <td>0 (No prepend)</td>
        </tr>
        <tr>
            <td>Private Peer</td>
            <td>150</td>
            <td>0 (No prepend)</td>
        </tr>
        <tr>
            <td>IXP</td>
            <td>100</td>
            <td>2 times prepend</td>
        </tr>
        <tr>
            <td>Transit</td>
            <td>50 (Lowest)</td>
            <td>3 times prepend</td>
        </tr>
    </table>

    <h2>тЬЕ рж╕рж╛рж░рж╛ржВрж╢:</h2>
    <ul>
        <li>Inbound: ржХрзЗ ржЖржЧрзЗ ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржЖржиржмрзЗ рждрж╛ Local-Pref ржжрж┐рзЯрзЗ ржарж┐ржХред</li>
        <li>Outbound: ржХрзЛржи ржкржерзЗ ржЖржорж░рж╛ ржкрж╛ржарж╛ржм рждрж╛ AS-Path Prepend ржжрж┐рзЯрзЗ ржарж┐ржХред</li>
        <li>Customer рж╕ржмржХрж┐ржЫрзБрж░ ржУржкрж░рзЗред</li>
        <li>Transit рж╕ржмржЪрзЗрзЯрзЗ ржирж┐ржЪрзЗ, рж╢рзБржзрзБржорж╛рждрзНрж░ fallback optionред</li>
    </ul>



        <h1>тЬЕ Step 1: Complete BGP Configuration</h1>
        <p>Configuration for Inbound & Outbound Filtering Using Local Preference and AS-Path Prepend</p>
    
        <pre>
    router bgp [OUR-ASN]
    
    # Step 1: Inbound Policy
    # Customer: Highest Priority
    route-map FROM-CUSTOMER-IN permit 10
     set local-preference 200
    neighbor [Customer-IP] remote-as [Customer-AS]
    neighbor [Customer-IP] route-map FROM-CUSTOMER-IN in
    
    # Private Peer: Medium Priority
    route-map FROM-PRIVATE-PEER-IN permit 10
     set local-preference 150
    neighbor [Private-Peer-IP] remote-as [Private-Peer-AS]
    neighbor [Private-Peer-IP] route-map FROM-PRIVATE-PEER-IN in
    
    # IXP: Lower Priority
    route-map FROM-IXP-IN permit 10
     set local-preference 100
    neighbor [IXP-IP] remote-as [IXP-AS]
    neighbor [IXP-IP] route-map FROM-IXP-IN in
    
    # Transit: Lowest Priority
    route-map FROM-TRANSIT-IN permit 10
     set local-preference 50
    neighbor [Transit-IP] remote-as [Transit-AS]
    neighbor [Transit-IP] route-map FROM-TRANSIT-IN in
    
    
    # Step 2: Outbound Policy
    # Customer: Highest Priority, No Prepend
    route-map TO-CUSTOMER-OUT permit 10
     # No AS-Path prepend, direct path
    neighbor [Customer-IP] remote-as [Customer-AS]
    neighbor [Customer-IP] route-map TO-CUSTOMER-OUT out
    
    # Private Peer: Medium Priority, No Prepend
    route-map TO-PRIVATE-PEER-OUT permit 10
     # No prepend, direct path
    neighbor [Private-Peer-IP] remote-as [Private-Peer-AS]
    neighbor [Private-Peer-IP] route-map TO-PRIVATE-PEER-OUT out
    
    # IXP: Lower Priority, Prepend 2 times
    route-map TO-IXP-OUT permit 10
     set as-path prepend [OUR-ASN] [OUR-ASN]
    neighbor [IXP-IP] remote-as [IXP-AS]
    neighbor [IXP-IP] route-map TO-IXP-OUT out
    
    # Transit: Lowest Priority, Prepend 3 times
    route-map TO-TRANSIT-OUT permit 10
     set as-path prepend [OUR-ASN] [OUR-ASN] [OUR-ASN]
    neighbor [Transit-IP] remote-as [Transit-AS]
    neighbor [Transit-IP] route-map TO-TRANSIT-OUT out
        </pre>
    
        <h1>тЬЕ Step 2: Explanation & Policy Logic</h1>
    
        <h2>1. Inbound Traffic Filtering (Local Preference)</h2>
        <p>Local Preference ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐ ржХрзЛржи ржЗржиржХрж╛ржорж┐ржВ ржЯрзНрж░рж╛ржлрж┐ржХ ржЖржЧрзЗ ржЖржорж╛ржжрзЗрж░ ржХрж╛ржЫрзЗ ржЖрж╕ржмрзЗред</p>
    
        <ul>
            <li><strong>Customer (Local Preference 200):</strong><br>
            ржЖржорж░рж╛ ржЪрж╛ржЪрзНржЫрж┐ ржпрзЗ Customer ржжрж┐рзЯрзЗ ржЖрж╕рж╛ ржЯрзНрж░рж╛ржлрж┐ржХ рж╕ржмржЪрзЗржпрж╝рзЗ ржЖржЧрзЗ ржЖрж╕рзЗ, ржХрж╛рж░ржг ржПржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржЖрзЯ ржмрзЗрж╢рж┐ ржХрж░ржмрзЗред</li>
            <li><strong>Private Peer (Local Preference 150):</strong><br>
            Private Peer ржпрзЗрж╣рзЗрждрзБ ржоржзрзНржпржо рж╕рзНржерж╛ржирзЗ, рждрж╛ржЗ ржПрж░ Local Preference 150 рж░рж╛ржЦрж╛ рж╣рзЯрзЗржЫрзЗред</li>
            <li><strong>IXP (Local Preference 100):</strong><br>
            IXP ржЯрзНрж░рж╛ржлрж┐ржХ ржПржХржЯрзБ ржХржо ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗ (Local Preference 100)ред</li>
            <li><strong>Transit (Local Preference 50):</strong><br>
            Transit ржЯрзНрж░рж╛ржлрж┐ржХ рж╕рж░рзНржмржирж┐ржорзНржи ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗ, ржХрж╛рж░ржг ржПржЯрж┐ fallback option рж╣рж┐рж╕рзЗржмрзЗ ржХрж╛ржЬ ржХрж░ржмрзЗред</li>
        </ul>
    
        <h2>2. Outbound Traffic Filtering (AS-Path Prepend)</h2>
        <p>AS-Path Prepend ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐ ржХрзЛржи рж░рзБржЯ ржмрж╛ржЗрж░рзЗ ржпрж╛ржмрзЗ ржПржмржВ ржХрзЛржи ржкржерзЗ ржпрж╛ржмрзЗред</p>
    
        <ul>
            <li><strong>Customer (No AS-Path Prepend):</strong><br>
            Customer-ржП ржЖржорж░рж╛ ржХрзЛржирзЛ AS-Path Prepend ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж┐ржирж┐, ржХрж╛рж░ржг ржПржЯрж┐ ржЖржорж╛ржжрзЗрж░ ржкрзНрж░рж╛ржзрж╛ржирзНржп ржкрж╛ржмрзЗред</li>
            <li><strong>Private Peer (No AS-Path Prepend):</strong><br>
            Private Peer-ржПржУ ржХрзЛржирзЛ prepend ржирзЗржЗ, ржХрж╛рж░ржг ржПржЯрж┐ржУ ржЖржорж╛ржжрзЗрж░ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрж╛ржеред</li>
            <li><strong>IXP (Prepend 2 times):</strong><br>
            IXP-ржП ржЖржорж░рж╛ 2 ржмрж╛рж░ AS-PATH prepend ржХрж░рзЗржЫрж┐, ржпрж╛рждрзЗ ржмрж╛ржЗрж░рзЗрж░ ISP ржЧрзБрж▓рзЛ ржХржо ржкрзНрж░рж╛ржзрж╛ржирзНржп ржжрзЗрзЯ ржПржмржВ ржЖржорж╛ржжрзЗрж░ ржЪрж╛рж╣рж┐ржжрж╛ ржкрзВрж░ржгрзЗрж░ ржЬржирзНржп ржЕржирзНржп ржкрж╛рже ржЧрзБрж▓рзЛ ржмрзЗржЫрзЗ ржирзЗрзЯред</li>
            <li><strong>Transit (Prepend 3 times):</strong><br>
            Transit-ржП 3 ржмрж╛рж░ AS-PATH prepend ржХрж░рзЗржЫрж┐, ржпрж╛рждрзЗ ржмрж╛ржЗрж░рзЗрж░ ISP ржЧрзБрж▓рзЛ ржПрзЬрж╛ржирзЛрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░ржмрзЗ ржПржмржВ ржПржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ fallback рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗред</li>
        </ul>
    
        <h2>3. Priority Recap Table:</h2>
        <table border="1">
            <tr>
                <th>Path Type</th>
                <th>Inbound Priority (Local-Pref)</th>
                <th>Outbound Priority (AS-Path Prepend)</th>
            </tr>
            <tr>
                <td>Customer</td>
                <td>200 (Highest)</td>
                <td>0 (No prepend)</td>
            </tr>
            <tr>
                <td>Private Peer</td>
                <td>150</td>
                <td>0 (No prepend)</td>
            </tr>
            <tr>
                <td>IXP</td>
                <td>100</td>
                <td>2 times prepend</td>
            </tr>
            <tr>
                <td>Transit</td>
                <td>50 (Lowest)</td>
                <td>3 times prepend</td>
            </tr>
        </table>
    
        <h2>4. Working Logic Recap:</h2>
        <ul>
            <li><strong>Inbound Traffic:</strong><br>
            Local Preference ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржЗржиржХрж╛ржорж┐ржВ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржкрже ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж┐, Customer-ржП рж╕ржмржЪрзЗрзЯрзЗ ржмрзЗрж╢рж┐, Transit-ржП рж╕ржмржЪрзЗрзЯрзЗ ржХржоред</li>
            <li><strong>Outbound Traffic:</strong><br>
            AS-Path Prepend ржжрж┐рзЯрзЗ ржЖржорж░рж╛ ржЖржЙржЯржЧрзЛржЗржВ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржкржерзЗ ржирж┐рзЯржирзНрждрзНрж░ржг рж░рж╛ржЦрж┐, ржпрзЗржЦрж╛ржирзЗ Transit ржПржмржВ IXP-ржПрж░ ржкржерзЗ ржмрзЗрж╢рж┐ prepend ржХрж░рж╛ рж╣рзЯ ржпрж╛рждрзЗ ржПржЧрзБрж▓рзЛ ржХржо ржмрзНржпржмрж╣рж╛рж░ рж╣рзЯред</li>
        </ul>


            <h1>BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h1>
            <h2>1. Community ржПржмржВ Local Preference (LP) рж╕рзЗржЯрж┐ржВрж╕</h2>
            <table>
                <tr>
                    <th>Community Value</th>
                    <th>Description</th>
                    <th>LP (Inbound)</th>
                </tr>
                <tr><td>X0:10</td><td>TR1-IN</td><td>100</td></tr>
                <tr><td>X0:20</td><td>TR2-IN</td><td>100</td></tr>
                <tr><td>X0:30</td><td>IXP-IN</td><td>300</td></tr>
                <tr><td>X0:40</td><td>PP-IN</td><td>400</td></tr>
                <tr><td>X0:50</td><td>CUST-IN</td><td>500</td></tr>
                <tr><td>X0:60</td><td>OWN-PREFIX</td><td>-</td></tr>
                <tr><td>X0:111</td><td>Uniform Advertisement</td><td>-</td></tr>
            </table>
            
            <h2>2. eBGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h2>
            <h3>Step 1: ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржб ржЪрж╛рж▓рзБ ржХрж░рж╛</h3>
            <pre>conf t</pre>
            
            <h3>Step 2: ржирждрзБржи BGP ржХржорж┐ржЙржирж┐ржЯрж┐ ржлрж░ржорзНржпрж╛ржЯ ржЪрж╛рж▓рзБ ржХрж░рж╛</h3>
            <pre>ip bgp-community new-format</pre>
            
            <h3>Step 3: Route-map рждрзИрж░рж┐ ржХрж░рж╛</h3>
            <p>(i) рж╕ржм eBGP рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржЬржирзНржп ржЕрзНржпрж╛ржбржнрж╛рж░рзНржЯрж╛ржЗржЬ ржХрж░рж╛:</p>
            <pre>
        route-map RM-TO-ALL-EBGP permit 10
        set community 10:60 10:111
        exit
            </pre>
            
            <p>(ii) TR1-ржП ржЕрзНржпрж╛ржбржнрж╛рж░рзНржЯрж╛ржЗржЬ ржирж╛ ржХрж░рж╛:</p>
            <pre>
        route-map RM-TO-ALL-EXCEPT-TR1 permit 10
        set community 10:60 10:1000
        exit
            </pre>
            
            <p>(iii) TR2-ржП 2 ржмрж╛рж░ ржкрзНрж░рж┐ржкрзЗржирзНржб ржХрж░рж╛:</p>
            <pre>
        route-map RM-TO-TR2-PREPEND-2 permit 10
        set community 10:60 10:2002
        exit
            </pre>
            
            <h3>Step 4: BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h3>
            <pre>
        router bgp 10
        address-family ipv4 unicast
        network 10.10.0.0 mask 255.255.252.0 route-map RM-TO-ALL-EBGP
        exit
        exit
        exit
            </pre>
            
            <h3>Step 5: ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛</h3>
            <pre>wr</pre>
            
            <h2>ржЙржкрж╕ржВрж╣рж╛рж░</h2>
            <p>ржПржЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи Inbound Prefix ржПрж░ ржЙржкрж░ ржнрж┐рждрзНрждрж┐ ржХрж░рзЗ Community Values рж╕рзЗржЯ ржХрж░рзЗ ржПржмржВ ржмрж┐ржнрж┐ржирзНржи рж░рж╛ржЙржЯрж┐ржВ рж╕рж┐ржжрзНржзрж╛ржирзНржд ржЧрзНрж░рж╣ржг ржХрж░рзЗ, ржпрзЗржоржи:</p>
            <ul>
                <li>TR1/TR2-рждрзЗ ржЕрзНржпрж╛ржбржнрж╛рж░рзНржЯрж╛ржЗржЬ ржмржирзНржз ржХрж░рж╛</li>
                <li>AS-path prepend ржХрж░рж╛</li>
                <li>ржбрж┐ржлрж▓рзНржЯ рж░рзБржЯ рж╕рзЗржЯ ржХрж░рж╛</li>
            </ul>
            <p>ржПрж░ ржлрж▓рзЗ ISP ржЧрзБрж▓рзЛрж░ ржЯрзНрж░рж╛ржлрж┐ржХ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рж╛ рж╕рж╣ржЬ рж╣рзЯ, ржПржмржВ ржкрзНрж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржЕржирзБржпрж╛рзЯрзА ржЯрзНрж░рж╛ржлрж┐ржХ рж░рж╛ржЙржЯрж┐ржВ рж╕ржорзНржнржм рж╣рзЯред</p>

                <h1>BGP Community and LP Configuration</h1>
                
                <h2>1. Community & Local Preference (LP) Settings</h2>
                <table>
                    <tr>
                        <th>Community Value</th>
                        <th>Description</th>
                        <th>LP (Inbound)</th>
                    </tr>
                    <tr><td>X0:10</td><td>TR1-IN</td><td>100</td></tr>
                    <tr><td>X0:20</td><td>TR2-IN</td><td>100</td></tr>
                    <tr><td>X0:30</td><td>IXP-IN</td><td>300</td></tr>
                    <tr><td>X0:40</td><td>PP-IN</td><td>400</td></tr>
                    <tr><td>X0:50</td><td>CUST-IN</td><td>500</td></tr>
                    <tr><td>X0:60</td><td>OWN-PREFIX</td><td>-</td></tr>
                    <tr><td>X0:111</td><td>Uniform Advertisement</td><td>-</td></tr>
                </table>
                
                <h2>2. eBGP Configuration</h2>
                
                <h3>Step 1: Enable Configuration Mode</h3>
                <code>conf t</code>
                
                <h3>Step 2: Enable New BGP Community Format</h3>
                <code>ip bgp-community new-format</code>
                
                <h3>Step 3: Configure Prefix List</h3>
                <code>ip prefix-list DEFAULT-ROUTE permit 0.0.0.0/0</code>
                <p>
                    ржПржЦрж╛ржирзЗ **DEFAULT-ROUTE** ржирж╛ржорзЗрж░ ржПржХржЯрж┐ prefix-list рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржпрж╛ **0.0.0.0/0** ржХрзЗ ржЕржирзБржорждрж┐ ржжрзЗржмрзЗред ржПржЯрж┐ рж╕рж╛ржзрж╛рж░ржгржд 
                    ржбрж┐ржлрж▓рзНржЯ рж░рзБржЯ рж╕рзЗржЯ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред
                </p>
                
                <h3>Step 4: Create Route Maps</h3>
                
                <h4>Route-map for TR1 (Default Route)</h4>
                <code>
            route-map RM-TR1-IN permit 10
            match ip address prefix-list DEFAULT-ROUTE
            set community 10:500
            exit
                </code>
                <p>
                    ржПржЗ route-map **DEFAULT-ROUTE** ржорж┐рж▓рзЗ ржЧрзЗрж▓рзЗ **10:500** ржХржорж┐ржЙржирж┐ржЯрж┐ рж╕рзЗржЯ ржХрж░ржмрзЗ, ржпрж╛ **DEFAULT-ROUTE** ржирж┐рж░рзНржжрзЗрж╢ ржХрж░ржмрзЗред
                </p>
                
                <h4>Route-map for TR1 (Other Routes)</h4>
                <code>
            route-map RM-TR1-IN permit 20
            set community 10:10
            exit
                </code>
                <p>
                    ржпржжрж┐ **DEFAULT-ROUTE** ржирж╛ ржорзЗрж▓рзЗ, рждрж╛рж╣рж▓рзЗ **10:10** ржХржорж┐ржЙржирж┐ржЯрж┐ рж╕рзЗржЯ ржХрж░рж╛ рж╣ржмрзЗ, ржпрж╛ TR1-IN ржирж┐рж░рзНржжрзЗрж╢ ржХрж░ржмрзЗред
                </p>
                
                <h4>Route-map for TR2 (Default Route)</h4>
                <code>
            route-map RM-TR2-IN permit 10
            match ip address prefix-list DEFAULT-ROUTE
            set community 10:500
            exit
                </code>
                <p>
                    TR2-рждрзЗ **DEFAULT-ROUTE** ржерж╛ржХрж▓рзЗ рж╕рзЗржЯрж╛рж░ ржЬржирзНржп **10:500** ржХржорж┐ржЙржирж┐ржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржмрзЗред
                </p>
                
                <h4>Route-map for TR2 (Other Routes)</h4>
                <code>
            route-map RM-TR2-IN permit 20
            set community 10:20
            exit
                </code>
                <p>
                    ржпржжрж┐ **DEFAULT-ROUTE** ржирж╛ ржорзЗрж▓рзЗ, рждрж╛рж╣рж▓рзЗ **10:20** ржХржорж┐ржЙржирж┐ржЯрж┐ рж╕рзЗржЯ ржХрж░рж╛ рж╣ржмрзЗ, ржпрж╛ TR2-IN ржирж┐рж░рзНржжрзЗрж╢ ржХрж░ржмрзЗред
                </p>
                
                <h3>Step 5: BGP Router Configuration</h3>
                <code>
            router bgp 10
            address-family ipv4 unicast
            neighbor 172.16.10.1 route-map RM-TR1-IN in
            neighbor 172.16.20.1 route-map RM-TR2-IN in
            exit
            exit
            exit
                </code>
                <p>
                    ржПржЦрж╛ржирзЗ **BGP AS 10** ржПрж░ ржЕржзрзАржирзЗ **neighbor 172.16.10.1** ржПржмржВ **neighbor 172.16.20.1** ржПрж░ ржЗржиржмрж╛ржЙржирзНржб ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржЬржирзНржп ржпржерж╛ржпрже 
                    route-map ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред
                </p>
                
                <h3>Step 6: Save Configuration</h3>
                <code>wr</code>
                
                <h2>Conclusion</h2>
                <p>
                    ржПржЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржжрзНржмрж╛рж░рж╛ BGP Neighbor-ржжрзЗрж░ ржЗржиржмрж╛ржЙржирзНржб ржЯрзНрж░рж╛ржлрж┐ржХ ржирж┐ржпрж╝ржирзНрждрзНрж░ржг ржХрж░рж╛ рж╕ржорзНржнржм рж╣рзЯред TR1 ржУ TR2-ржПрж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ route-map рж╕рзЗржЯ 
                    ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржпрж╛рждрзЗ **DEFAULT-ROUTE** ржПржмржВ ржЕржирзНржпрж╛ржирзНржп рж░рзБржЯ ржЖрж▓рж╛ржжрж╛ ржнрж╛ржмрзЗ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рж╛ ржпрж╛ржпрж╝ред
                </p>


                
                <h2>BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржЯрзЗржмрж┐рж▓</h2>
                
                <table>
                    <tr>
                        <th>ржзрж╛ржк</th>
                        <th>ржХржорж╛ржирзНржб</th>
                        <th>ржмрзНржпрж╛ржЦрзНржпрж╛</th>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td><code>conf t</code></td>
                        <td>рж░рж╛ржЙржЯрж╛рж░ржХрзЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржбрзЗ ржирж┐ржпрж╝рзЗ ржпрж╛ржпрж╝ред</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><code>ip bgp-community new-format</code></td>
                        <td>BGP ржХржорж┐ржЙржирж┐ржЯрж┐ ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржХрзЗ ржирждрзБржи ржлрж░ржорзНржпрж╛ржЯрзЗ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td><code>ip prefix-list DEFAULT-ROUTE permit 0.0.0.0/0</code></td>
                        <td>ржПржХржЯрж┐ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ рж▓рж┐рж╕рзНржЯ рждрзИрж░рж┐ ржХрж░рзЗ, ржпрж╛ ржбрж┐ржлрж▓рзНржЯ рж░рзБржЯ (0.0.0.0/0) ржХрзЗ ржкрж╛рж░ржорж┐ржЯ ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td><code>route-map RM-TR1-IN permit 10</code></td>
                        <td><code>RM-TR1-IN</code> ржирж╛ржорзЗ ржПржХржЯрж┐ рж░рж╛ржЙржЯ-ржорзНржпрж╛ржк рждрзИрж░рж┐ ржХрж░рзЗ, ржпрж╛рж░ рж╕рж┐ржХрзЛржпрж╝рзЗржирзНрж╕ ржиржорзНржмрж░ рззрзжред</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td><code>match ip address prefix-list DEFAULT-ROUTE</code></td>
                        <td>ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ рж▓рж┐рж╕рзНржЯ <code>DEFAULT-ROUTE</code> ржПрж░ рж╕рж╛ржерзЗ ржорж┐рж▓рзЗ ржпрж╛ржУржпрж╝рж╛ ржЖржЗржкрж┐ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ржЧрзБрж▓рзЛржХрзЗ ржорзНржпрж╛ржЪ ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td><code>set community 10:500</code></td>
                        <td>ржорзНржпрж╛ржЪ рж╣ржУржпрж╝рж╛ рж░рзБржЯржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржХржорж┐ржЙржирж┐ржЯрж┐ ржнрзНржпрж╛рж▓рзБ <code>10:500</code> рж╕рзЗржЯ ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td><code>exit</code></td>
                        <td>ржмрж░рзНрждржорж╛ржи ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржб ржерзЗржХрзЗ ржмрзЗрж░рж┐ржпрж╝рзЗ ржЖрж╕рзЗред</td>
                    </tr>
                    <tr>
                        <td>8</td>
                        <td><code>route-map RM-TR1-IN permit 20</code></td>
                        <td>ржПржХржЗ рж░рж╛ржЙржЯ-ржорзНржпрж╛ржкрзЗ ржЖрж░рзЗржХржЯрж┐ ржкрж╛рж░ржорж┐ржЯ ржПржирзНржЯрзНрж░рж┐ рждрзИрж░рж┐ ржХрж░рзЗ, ржпрж╛рж░ рж╕рж┐ржХрзЛржпрж╝рзЗржирзНрж╕ ржиржорзНржмрж░ рзирзжред</td>
                    </tr>
                    <tr>
                        <td>9</td>
                        <td><code>set community 10:10</code></td>
                        <td>рж╕рж┐ржХрзЛржпрж╝рзЗржирзНрж╕ рзирзж ржПрж░ ржЬржирзНржп ржХржорж┐ржЙржирж┐ржЯрж┐ ржнрзНржпрж╛рж▓рзБ <code>10:10</code> рж╕рзЗржЯ ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>10</td>
                        <td><code>route-map RM-TR2-IN permit 10</code></td>
                        <td><code>RM-TR2-IN</code> ржирж╛ржорзЗ ржЖрж░рзЗржХржЯрж┐ рж░рж╛ржЙржЯ-ржорзНржпрж╛ржк рждрзИрж░рж┐ ржХрж░рзЗ, ржпрж╛рж░ рж╕рж┐ржХрзЛржпрж╝рзЗржирзНрж╕ ржиржорзНржмрж░ рззрзжред</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td><code>match ip address prefix-list DEFAULT-ROUTE</code></td>
                        <td>ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ рж▓рж┐рж╕рзНржЯ <code>DEFAULT-ROUTE</code> ржПрж░ рж╕рж╛ржерзЗ ржорж┐рж▓рзЗ ржпрж╛ржУржпрж╝рж╛ ржЖржЗржкрж┐ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ржЧрзБрж▓рзЛржХрзЗ ржорзНржпрж╛ржЪ ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>12</td>
                        <td><code>set community 10:500</code></td>
                        <td>ржорзНржпрж╛ржЪ рж╣ржУржпрж╝рж╛ рж░рзБржЯржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржХржорж┐ржЙржирж┐ржЯрж┐ ржнрзНржпрж╛рж▓рзБ <code>10:500</code> рж╕рзЗржЯ ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>13</td>
                        <td><code>route-map RM-TR2-IN permit 20</code></td>
                        <td><code>RM-TR2-IN</code> рж░рж╛ржЙржЯ-ржорзНржпрж╛ржкрзЗ ржЖрж░рзЗржХржЯрж┐ ржкрж╛рж░ржорж┐ржЯ ржПржирзНржЯрзНрж░рж┐ рждрзИрж░рж┐ ржХрж░рзЗ, ржпрж╛рж░ рж╕рж┐ржХрзЛржпрж╝рзЗржирзНрж╕ ржиржорзНржмрж░ рзирзжред</td>
                    </tr>
                    <tr>
                        <td>14</td>
                        <td><code>set community 10:20</code></td>
                        <td>рж╕рж┐ржХрзЛржпрж╝рзЗржирзНрж╕ рзирзж ржПрж░ ржЬржирзНржп ржХржорж┐ржЙржирж┐ржЯрж┐ ржнрзНржпрж╛рж▓рзБ <code>10:20</code> рж╕рзЗржЯ ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>15</td>
                        <td><code>router bgp 10</code></td>
                        <td>BGP ржкрзНрж░рж╕рзЗрж╕ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржбрзЗ ржкрзНрж░ржмрзЗрж╢ ржХрж░рзЗ, ржпрзЗржЦрж╛ржирзЗ AS ржиржорзНржмрж░ рззрзж рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</td>
                    </tr>
                    <tr>
                        <td>16</td>
                        <td><code>address-family ipv4 unicast</code></td>
                        <td>IPv4 ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржбрзЗ ржкрзНрж░ржмрзЗрж╢ ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>17</td>
                        <td><code>neighbor 172.16.10.1 route-map RM-TR1-IN in</code></td>
                        <td>BGP ржирзЗржЗржмрж╛рж░ <code>172.16.10.1</code> ржПрж░ ржЗржиржмрж╛ржЙржирзНржб ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржЬржирзНржп <code>RM-TR1-IN</code> рж░рж╛ржЙржЯ-ржорзНржпрж╛ржк ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>18</td>
                        <td><code>neighbor 172.16.20.1 route-map RM-TR2-IN in</code></td>
                        <td>BGP ржирзЗржЗржмрж╛рж░ <code>172.16.20.1</code> ржПрж░ ржЗржиржмрж╛ржЙржирзНржб ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржЬржирзНржп <code>RM-TR2-IN</code> рж░рж╛ржЙржЯ-ржорзНржпрж╛ржк ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рзЗред</td>
                    </tr>
                    <tr>
                        <td>19</td>
                        <td><code>exit</code></td>
                        <td>BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржб ржерзЗржХрзЗ ржмрзЗрж░рж┐ржпрж╝рзЗ ржЖрж╕рзЗред</td>
                    </tr>
                    <tr>
                        <td>20</td>
                        <td><code>exit</code></td>
                        <td>ржЧрзНрж▓рзЛржмрж╛рж▓ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржорзЛржб ржерзЗржХрзЗ ржмрзЗрж░рж┐ржпрж╝рзЗ ржЖрж╕рзЗред</td>
                    </tr>
                    <tr>
                        <td>21</td>
                        <td><code>wr</code></td>
                        <td>рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рж╕рзЗржн ржХрж░рзЗред</td>
                    </tr>
                </table>

                    <h1>BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h1>
                    
                    <h2>рзз. ржХржорж┐ржЙржирж┐ржЯрж┐ рж▓рж┐рж╕рзНржЯ рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ</h2>
                    <pre>
                ip community-list standard ISP2-OUT permit 10:60
                ip community-list standard ISP2-OUT permit 10:999
                    </pre>
                    <p>ржПржЦрж╛ржирзЗ <strong>ISP2-OUT</strong> ржирж╛ржоржХ ржХржорж┐ржЙржирж┐ржЯрж┐ рж▓рж┐рж╕рзНржЯ рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрзЗржЦрж╛ржирзЗ <strong>10:60</strong> ржПржмржВ <strong>10:999</strong> ржирж╛ржорзНржмрж╛рж░рзЗрж░ BGP ржХржорж┐ржЙржирж┐ржЯрж┐ ржЕржирзБржорзЛржжржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
                    
                    <pre>
                ip community-list standard IXP-OUT permit 10:111
                ip community-list standard IXP-OUT permit 10:222
                ip community-list standard IXP-OUT permit 10:999
                ip community-list standard IXP-OUT permit 10:1000
                ip community-list standard IXP-OUT permit 10:1001
                ip community-list standard IXP-OUT permit 10:1002
                ip community-list standard IXP-OUT permit 10:2000
                ip community-list standard IXP-OUT permit 10:2001
                ip community-list standard IXP-OUT permit 10:2002
                    </pre>
                    <p>ржПржЦрж╛ржирзЗ <strong>IXP-OUT</strong> ржирж╛ржоржХ ржЖрж░рзЗржХржЯрж┐ ржХржорж┐ржЙржирж┐ржЯрж┐ рж▓рж┐рж╕рзНржЯ рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрзЗржЦрж╛ржирзЗ <strong>10:111</strong>, <strong>10:222</strong>, <strong>10:999</strong>, <strong>10:1000</strong>, <strong>10:1001</strong>, <strong>10:1002</strong>, <strong>10:2000</strong>, <strong>10:2001</strong>, <strong>10:2002</strong> ржЕржирзБржорзЛржжрж┐ржд рж╣ржпрж╝рзЗржЫрзЗред</p>
                    
                    <h3>ржХрзЗржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ?</h3>
                    <p>ржХржорж┐ржЙржирж┐ржЯрж┐ рж▓рж┐рж╕рзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржмрж╛ ржЯрзНрж░рж╛ржлрж┐ржХржХрзЗ ржЖрж▓рж╛ржжрж╛ ржнрж╛ржмрзЗ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рж╛ ржпрж╛рзЯ, ржпрж╛ ржкрж░ржмрж░рзНрждрзА ржзрж╛ржкрзЗ route-map-ржП ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред</p>
                    
                    <h2>рзи. Route-map рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ</h2>
                    <pre>
                route-map RM-IXP-OUT permit 10
                match community IXP-OUT
                set metric 20
                exit
                    </pre>
                    <p>ржПржЦрж╛ржирзЗ <strong>RM-IXP-OUT</strong> ржирж╛ржоржХ ржПржХржЯрж┐ route-map рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛ <strong>IXP-OUT</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рждрзЗ ржерж╛ржХрж╛ рж░рзБржЯржЧрзБрж▓рзЛржХрзЗ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░ржмрзЗ ржПржмржВ <strong>metric 20</strong> рж╕рзЗржЯ ржХрж░ржмрзЗред</p>
                    
                    <pre>
                route-map RM-ISP2-OUT permit 10
                match community ISP2-OUT
                set metric 10
                exit
                    </pre>
                    <p>ржПржЦрж╛ржирзЗ <strong>RM-ISP2-OUT</strong> ржирж╛ржоржХ route-map рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛ <strong>ISP2-OUT</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рждрзЗ ржерж╛ржХрж╛ рж░рзБржЯржЧрзБрж▓рзЛржХрзЗ ржлрж┐рж▓рзНржЯрж╛рж░ ржХрж░ржмрзЗ ржПржмржВ <strong>metric 10</strong> рж╕рзЗржЯ ржХрж░ржмрзЗред</p>
                    
                    <h3>ржХрзЗржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ?</h3>
                    <p>Route-map ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЧржирзНрждржмрзНржпрзЗрж░ ржЯрзНрж░рж╛ржлрж┐ржХржХрзЗ ржЖрж▓рж╛ржжрж╛ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ред ржПржЦрж╛ржирзЗ <strong>ISP2-OUT</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рждрзЗ ржерж╛ржХрж╛ рж░рзБржЯрзЗрж░ ржорзЗржЯрзНрж░рж┐ржХ <strong>рззрзж</strong> рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛ <strong>IXP-OUT</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рж░ <strong>рзирзж</strong> ржПрж░ ржЪрзЗржпрж╝рзЗ ржХржо, ржЕрж░рзНржерж╛рзО <strong>ISP2-OUT</strong> ржЯрзНрж░рж╛ржлрж┐ржХ ржмрзЗрж╢рж┐ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░ ржкрж╛ржмрзЗред</p>
                    
                    <h2>рзй. BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h2>
                    <pre>
                router bgp 10
                address-family ipv4 unicast
                    </pre>
                    <p>ржПржЦрж╛ржирзЗ BGP AS (Autonomous System) <strong>10</strong> рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржПржмржВ IPv4 ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржПржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ рж╕ржХрзНрж░рж┐ржпрж╝ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
                    
                    <pre>
                neighbor 192.168.65.254 route-map RM-IXP-OUT out
                    </pre>
                    <p>ржПржЗ рж▓рж╛ржЗржиржЯрж┐ <strong>192.168.65.254</strong> ржПржЗ BGP ржкрж┐ржпрж╝рж╛рж░рзЗрж░ ржЬржирзНржп <strong>RM-IXP-OUT</strong> рж░рзБржЯ-ржорзНржпрж╛ржк ржкрзНрж░рзЯрзЛржЧ ржХрж░ржмрзЗ, ржЕрж░рзНржерж╛рзО ржПржЗ ржЖржЗржкрж┐рждрзЗ <strong>IXP-OUT</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рж░ рж░рзБржЯ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗред</p>
                    
                    <pre>
                neighbor 10.0.0.2 route-map RM-ISP2-OUT out
                    </pre>
                    <p>ржПржЗ рж▓рж╛ржЗржиржЯрж┐ <strong>10.0.0.2</strong> ржкрж┐ржпрж╝рж╛рж░рзЗрж░ ржЬржирзНржп <strong>RM-ISP2-OUT</strong> рж░рзБржЯ-ржорзНржпрж╛ржк ржкрзНрж░рзЯрзЛржЧ ржХрж░ржмрзЗ, ржЕрж░рзНржерж╛рзО ржПржЗ ржЖржЗржкрж┐рждрзЗ <strong>ISP2-OUT</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рж░ рж░рзБржЯ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗред</p>
                    
                    <h3>ржХрзЗржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ?</h3>
                    <p>ржПржЯрж┐ ржорзВрж▓ржд BGP ржЯрзНрж░рж╛ржлрж┐ржХ ржЗржЮрзНржЬрж┐ржирж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред ржПржЦрж╛ржирзЗ <strong>ISP2-OUT</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рж░ ржЯрзНрж░рж╛ржлрж┐ржХржХрзЗ ржмрзЗрж╢рж┐ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржХрж╛рж░ржг ржПрж░ ржорзЗржЯрзНрж░рж┐ржХ <strong>рззрзж</strong>, ржпрж╛ <strong>IXP-OUT</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рж░ ржорзЗржЯрзНрж░рж┐ржХ <strong>рзирзж</strong> ржПрж░ ржЪрзЗржпрж╝рзЗ ржХржоред ржЕрж░рзНржерж╛рзО, ржпржжрж┐ ржПржХржЗ ржЧржирзНрждржмрзНржпрзЗ ржпрж╛ржУржпрж╝рж╛рж░ ржЬржирзНржп ржжрзБржЯрж┐ ржкрж╛рже ржерж╛ржХрзЗ, рждржмрзЗ <strong>ISP2-OUT</strong> ржЯрзНрж░рж╛ржлрж┐ржХ ржЖржЧрзЗ ржпрж╛ржмрзЗред</p>
                    
                    <h2>рзк. ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рж╕ржВрж░ржХрзНрж╖ржг</h2>
                    <pre>
                exit
                exit
                exit
                wr
                    </pre>
                    <p>ржПржЗ ржХржорж╛ржирзНржбржЧрзБрж▓рзЛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржерзЗржХрзЗ ржмрзЗрж░рж┐ржпрж╝рзЗ ржПрж╕рзЗ ржкрж░рж┐ржмрж░рзНрждржиржЧрзБрж▓рзЛ рж╕ржВрж░ржХрзНрж╖ржг (write/save) ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
                    
                    <h2>рж╕рж╛рж░рж╕ржВржХрзНрж╖рзЗржк</h2>
                    <ul>
                        <li>тЬЕ ржХржорж┐ржЙржирж┐ржЯрж┐ рж▓рж┐рж╕рзНржЯ рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ тЖТ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рзБржЯ ржЧрзЛрж╖рзНржарзАржХрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ</li>
                        <li>тЬЕ Route-map рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ тЖТ ржмрж┐ржнрж┐ржирзНржи ржХржорж┐ржЙржирж┐ржЯрж┐рж░ ржЬржирзНржп ржнрж┐ржирзНржи ржорзЗржЯрзНрж░рж┐ржХ ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ</li>
                        <li>тЬЕ BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ тЖТ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрж┐ржпрж╝рж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж░рзБржЯ-ржорзНржпрж╛ржк ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ</li>
                        <li>тЬЕ ржЙржжрзНржжрзЗрж╢рзНржп тЖТ <strong>ISP2-OUT</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рж░ ржЯрзНрж░рж╛ржлрж┐ржХржХрзЗ ржмрзЗрж╢рж┐ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░ ржжрзЗржУрзЯрж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржЖрж░ <strong>IXP-OUT</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рж░ ржЬржирзНржп ржнрж┐ржирзНржи ржорзЗржЯрзНрж░рж┐ржХ рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
                    </ul>
                    
                    <p>ржПржЯрж┐ ржорзВрж▓ржд BGP ржЯрзНрж░рж╛ржлрж┐ржХ ржЗржЮрзНржЬрж┐ржирж┐ржпрж╝рж╛рж░рж┐ржВ ржПржмржВ ржЖржЙржЯржмрж╛ржЙржирзНржб рж░рзБржЯ ржХржирзНржЯрзНрж░рзЛрж▓ ржХрж░рж╛рж░ ржЬржирзНржп ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
           


                        <h1>BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг</h1>
                        <p>ржПржЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗ BGP (Border Gateway Protocol)-ржПрж░ ржорж╛ржзрзНржпржорзЗ ржЯрзНрж░рж╛ржлрж┐ржХ ржЗржЮрзНржЬрж┐ржирж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржПржЦрж╛ржирзЗ ржмрж┐ржнрж┐ржирзНржи ржХржорж┐ржЙржирж┐ржЯрж┐ рж▓рж┐рж╕рзНржЯ, Route-map, ржПржмржВ AS-path prepend ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ рж░рзБржЯ ржирж┐рзЯржирзНрждрзНрж░ржг ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ржирж┐ржЪрзЗ ржзрж╛ржкрзЗ ржзрж╛ржкрзЗ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рж╛ рж╣рж▓рзЛтАФ</p>
                    
                        <h2>рзз. ржХржорж┐ржЙржирж┐ржЯрж┐ рж▓рж┐рж╕рзНржЯ рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ</h2>
                        <p>ржкрзНрж░ржержорзЗ BGP ржХржорж┐ржЙржирж┐ржЯрж┐ рж▓рж┐рж╕рзНржЯ рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржмрж╛ ржЯрзНрж░рж╛ржлрж┐ржХржХрзЗ ржЖрж▓рж╛ржжрж╛ ржХрж░рждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░ржмрзЗред</p>
                    
                        <pre>
                    ip community-list standard UNIFORM-OUT permit 20:111
                        </pre>
                        <p><strong>UNIFORM-OUT:</strong> ржПржЗ ржХржорж┐ржЙржирж┐ржЯрж┐ рзирзж:рззрззрзз рж░рзБржЯржЧрзБрж▓рзЛрж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржмрзЗ, ржпрж╛ ржЙржнрзЯ ржЯрзНрж░рж╛ржиржЬрж┐ржЯ рж░рж╛ржЙржЯрж╛рж░рзЗ ржпрж╛ржмрзЗред</p>
                    
                        <pre>
                    ip community-list standard TR1-PREPEND-1 permit 20:1001
                    ip community-list standard TR1-PREPEND-2 permit 20:1002
                        </pre>
                        <p><strong>TR1-PREPEND-1</strong> ржПржмржВ <strong>TR1-PREPEND-2:</strong> TR1 (ржЯрзНрж░рж╛ржиржЬрж┐ржЯ рзз)-ржПрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗ ржПржмржВ AS-path prepend ржкрзНрж░рзЯрзЛржЧ ржХрж░ржмрзЗред</p>
                    
                        <pre>
                    ip community-list standard TR2-PREPEND-1 permit 20:2001
                    ip community-list standard TR2-PREPEND-2 permit 20:2002
                        </pre>
                        <p><strong>TR2-PREPEND-1</strong> ржПржмржВ <strong>TR2-PREPEND-2:</strong> TR2 (ржЯрзНрж░рж╛ржиржЬрж┐ржЯ рзи)-ржПрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржмрзЗ ржПржмржВ AS-path prepend ржкрзНрж░рзЯрзЛржЧ ржХрж░ржмрзЗред</p>
                    
                        <pre>
                    ip community-list standard TR1-ONLY permit 20:2000
                    ip community-list standard TR2-ONLY permit 20:1000
                        </pre>
                        <p><strong>TR1-ONLY:</strong> рж╢рзБржзрзБржорж╛рждрзНрж░ TR1-ржП ржпрж╛ржмрзЗред</p>
                        <p><strong>TR2-ONLY:</strong> рж╢рзБржзрзБржорж╛рждрзНрж░ TR2-ржП ржпрж╛ржмрзЗред</p>
                    
                        <h3>ржХрзЗржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ?</h3>
                        <p>ржХржорж┐ржЙржирж┐ржЯрж┐ рж▓рж┐рж╕рзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЖржорж░рж╛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржЬржирзНржп ржЖрж▓рж╛ржжрж╛ ржирж┐ржпрж╝ржо ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рждрзЗ ржкрж╛рж░ржмред</p>
                    
                        <h2>рзи. Route-map рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ</h2>
                        <h3>TR1-ржПрж░ ржЬржирзНржп Route-map (RM-TR1-OUT)</h3>
                        <pre>
                    route-map RM-TR1-OUT permit 10
                    match community UNIFORM-OUT TR2-PREPEND-1 TR2-PREPEND-2 TR1-ONLY
                    exit
                        </pre>
                        <p>ржПржЗ route-map-ржЯрж┐ ржкрзНрж░ржержо ржзрж╛ржкрзЗ <strong>UNIFORM-OUT</strong>, <strong>TR2-PREPEND-1</strong>, <strong>TR2-PREPEND-2</strong>, <strong>TR1-ONLY</strong> ржЯрзНрж░рж╛ржлрж┐ржХржХрзЗ ржЕржирзБржорждрж┐ ржжрзЗржмрзЗред</p>
                        <p>ржПржЦрж╛ржирзЗ ржХрзЛржирзЛ AS-path prepend ржирзЗржЗ, рждрж╛ржЗ ржЯрзНрж░рж╛ржлрж┐ржХ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗ ржпрж╛ржмрзЗред</p>
                    
                        <pre>
                    route-map RM-TR1-OUT permit 20
                    match community TR1-PREPEND-1
                    set as-path prepend 20
                    exit
                        </pre>
                        <p><strong>TR1-PREPEND-1</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рждрзЗ ржерж╛ржХрж╛ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ рзирзж AS ржиржорзНржмрж░ ржПржХржмрж╛рж░ prepend ржХрж░рж╛ рж╣ржмрзЗред</p>
                        <p>ржПрж░ ржорж╛ржирзЗ рж╣рж▓рзЛ, рж░рзБржЯржЯрж┐ ржХрж┐ржЫрзБржЯрж╛ ржХржо ржЖржХрж░рзНрж╖ржгрзАрзЯ рж╣рзЯрзЗ ржЙржаржмрзЗред</p>
                    
                        <pre>
                    route-map RM-TR1-OUT permit 30
                    match community TR1-PREPEND-2
                    set as-path prepend 20 20
                    exit
                        </pre>
                        <p><strong>TR1-PREPEND-2</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рждрзЗ ржерж╛ржХрж╛ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржЬржирзНржп рзирзж AS ржиржорзНржмрж░ ржжрзБржЗржмрж╛рж░ prepend ржХрж░рж╛ рж╣ржмрзЗред</p>
                        <p>ржПрж░ ржлрж▓рзЗ ржПржЗ рж░рзБржЯржЯрж┐ ржЖрж░ржУ ржХржо ржЖржХрж░рзНрж╖ржгрзАрзЯ рж╣ржмрзЗред</p>
                    
                        <h3>TR2-ржПрж░ ржЬржирзНржп Route-map (RM-TR2-OUT)</h3>
                        <pre>
                    route-map RM-TR2-OUT permit 10
                    match community UNIFORM-OUT TR1-PREPEND-1 TR1-PREPEND-2 TR2-ONLY
                    exit
                        </pre>
                        <p><strong>UNIFORM-OUT</strong>, <strong>TR1-PREPEND-1</strong>, <strong>TR1-PREPEND-2</strong>, <strong>TR2-ONLY</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рж░ рж░рзБржЯржЧрзБрж▓рзЛ ржЕржирзБржорзЛржжрж┐ржд рж╣ржмрзЗред</p>
                        <p>ржПржЦрж╛ржирзЗ ржХрзЛржирзЛ AS-path prepend ржирзЗржЗ, рждрж╛ржЗ ржПржЯрж┐ рж╕рзНржмрж╛ржнрж╛ржмрж┐ржХржнрж╛ржмрзЗржЗ ржЯрзНрж░рж╛ржирзНрж╕ржорж┐ржЯ рж╣ржмрзЗред</p>
                    
                        <pre>
                    route-map RM-TR2-OUT permit 20
                    match community TR2-PREPEND-1
                    set as-path prepend 20
                    exit
                        </pre>
                        <p><strong>TR2-PREPEND-1</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рж░ ржЬржирзНржп AS-path prepend рзирзж рж╣ржмрзЗ, ржпрж╛ рж░рзБржЯржЯрж┐ржХрзЗ ржХржо ржЖржХрж░рзНрж╖ржгрзАрзЯ ржХрж░ржмрзЗред</p>
                    
                        <pre>
                    route-map RM-TR2-OUT permit 30
                    match community TR2-PREPEND-2
                    set as-path prepend 20 20
                    exit
                        </pre>
                        <p><strong>TR2-PREPEND-2</strong> ржХржорж┐ржЙржирж┐ржЯрж┐рж░ ржЬржирзНржп AS-path prepend рзирзж рзирзж рж╣ржмрзЗ, ржпрж╛ рж░рзБржЯржЯрж┐ржХрзЗ ржЖрж░ржУ ржХржо ржЖржХрж░рзНрж╖ржгрзАрзЯ ржХрж░ржмрзЗред</p>
                    
                        <h3>ржХрзЗржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ?</h3>
                        <p>Route-map ржПрж░ ржорж╛ржзрзНржпржорзЗ ржкрзНрж░рзЗржлрж╛рж░рзЗржирзНрж╕ рж╕рзЗржЯ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛рждрзЗ ржЯрзНрж░рж╛ржлрж┐ржХ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржкрж╛рже ржзрж░рзЗ ржкрзНрж░ржмрж╛рж╣рж┐ржд рж╣ржпрж╝ред</p>
                    
                        <h2>рзй. BGP ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h2>
                        <pre>
                    router bgp 20
                    address-family ipv4 unicast
                        </pre>
                        <p>BGP AS рзирзж ржЪрж╛рж▓рзБ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ ржПржмржВ IPv4 ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржПржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ рж╕ржХрзНрж░рж┐ржпрж╝ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
                    
                        <pre>
                    neighbor 172.16.10.5 route-map RM-TR1-OUT out
                        </pre>
                        <p>172.16.10.5 ржкрж┐ржпрж╝рж╛рж░рзЗрж░ ржЬржирзНржп <strong>RM-TR1-OUT</strong> route-map ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
                        <p>ржЕрж░рзНржерж╛рзО, ржПржЗ ржкрзНрж░рждрж┐ржмрзЗрж╢рзАрж░ рж╕рж╛ржерзЗ рж░рзБржЯ рж╢рзЗржпрж╝рж╛рж░ ржХрж░рж╛рж░ рж╕ржоржпрж╝, <strong>RM-TR1-OUT</strong> ржЕржирзБржпрж╛ржпрж╝рзА ржирзАрждрж┐ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ рж╣ржмрзЗред</p>
                    
                        <pre>
                    neighbor 172.16.20.5 route-map RM-TR2-OUT out
                        </pre>
                        <p>172.16.20.5 ржкрж┐ржпрж╝рж╛рж░рзЗрж░ ржЬржирзНржп <strong>RM-TR2-OUT</strong> route-map ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
                        <p>ржЕрж░рзНржерж╛рзО, ржПржЗ ржкрзНрж░рждрж┐ржмрзЗрж╢рзАрж░ рж╕рж╛ржерзЗ рж░рзБржЯ рж╢рзЗржпрж╝рж╛рж░ ржХрж░рж╛рж░ рж╕ржоржпрж╝, <strong>RM-TR2-OUT</strong> ржЕржирзБржпрж╛ржпрж╝рзА ржирзАрждрж┐ ржкрзНрж░ржпрж╝рзЛржЧ ржХрж░рж╛ рж╣ржмрзЗред</p>
                    
                        <h3>ржХрзЗржи ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ?</h3>
                        <p>ржПржЯрж┐ BGP ржЯрзНрж░рж╛ржлрж┐ржХ ржЗржЮрзНржЬрж┐ржирж┐ржпрж╝рж╛рж░рж┐ржВ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛рждрзЗ ржмрж┐ржнрж┐ржирзНржи рж░рзБржЯрзЗрж░ ржоржзрзНржпрзЗ ржЯрзНрж░рж╛ржлрж┐ржХ ржкрзНрж░ржмрж╛рж╣ ржирж┐ржпрж╝ржирзНрждрзНрж░рж┐ржд рж╣ржпрж╝ред</p>
                    
                        <h2>рзк. ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи рж╕ржВрж░ржХрзНрж╖ржг</h2>
                        <pre>
                    exit
                    exit
                    exit
                    wr
                        </pre>
                        <p>ржкрж░рж┐ржмрж░рзНрждржи рж╕ржВрж░ржХрзНрж╖ржг ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, ржпрж╛рждрзЗ рж░рж╛ржЙржЯрж╛рж░ рж░рж┐ржмрзБржЯ рж╣ржУржпрж╝рж╛рж░ ржкрж░рзЗржУ рж╕рзЗржЯрж┐ржВрж╕ ржарж┐ржХ ржерж╛ржХрзЗред</p>
                    
                        <h2>ЁЯОп рж╕ржВржХрзНрж╖рзЗржкрзЗ ржПржЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржорзВрж▓ ржЙржжрзНржжрзЗрж╢рзНржп</h2>
                        <ul>
                            <li>тЬЕ ржХржорж┐ржЙржирж┐ржЯрж┐ рж▓рж┐рж╕рзНржЯ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ тЖТ ржмрж┐ржнрж┐ржирзНржи ржзрж░ржирзЗрж░ рж░рзБржЯ ржЖрж▓рж╛ржжрж╛ ржХрж░рждрзЗ</li>
                            <li>тЬЕ Route-map ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ тЖТ ржЯрзНрж░рж╛ржлрж┐ржХрзЗрж░ ржЕржЧрзНрж░рж╛ржзрж┐ржХрж╛рж░ рж╕рзЗржЯ ржХрж░рждрзЗ</li>
                            <li>тЬЕ AS-path prepend ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ тЖТ ржХрж┐ржЫрзБ рж░рзБржЯржХрзЗ ржХржо ржЖржХрж░рзНрж╖ржгрзАрзЯ ржХрж░рждрзЗ</li>
                            <li>тЬЕ BGP ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ тЖТ ржкрзНрж░рждрж┐ржмрзЗрж╢рзА рж░рж╛ржЙржЯрж╛рж░рзЗрж░ рж╕рж╛ржерзЗ рж░рзБржЯ ржнрж╛ржЧ ржХрж░рж╛рж░ ржЬржирзНржп</li>
                        </ul>
                    
                        <h3>рж╕рж░рзНржмрзЛржкрж░рж┐:</h3>
                        <ul>
                            <li>TR1 ржУ TR2 ржЙржнрзЯрзЗрж░ ржоржзрзНржпрзЗ ржЯрзНрж░рж╛ржлрж┐ржХ ржмрзНржпрж╛рж▓рзЗржирзНрж╕ ржХрж░рж╛рж░ ржЬржирзНржп ржмрж┐ржнрж┐ржирзНржи ржкрзНрж░рж┐ржкрзЗржирзНржбрж┐ржВ ржирзАрждрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
                            <li>TR1-ONLY ржПржмржВ TR2-ONLY рж░рзБржЯржЧрзБрж▓рзЛ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЯрзНрж░рж╛ржиржЬрж┐ржЯ рж░рж╛ржЙржЯрж╛рж░рзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗред</li>
                            <li>UNIFORM-OUT ржЯрзНрж░рж╛ржлрж┐ржХ ржЙржнрзЯ ржЯрзНрж░рж╛ржиржЬрж┐ржЯ рж░рж╛ржЙржЯрж╛рж░рзЗ ржпрж╛ржмрзЗред</li>
                        </ul>
                    
                        <p>ржПржЗ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржиржЯрж┐ ржорзВрж▓ржд ржЖржЙржЯржмрж╛ржЙржирзНржб рж░рзБржЯ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬрзЗрж╢ржи ржПржмржВ BGP ржЯрзНрж░рж╛ржлрж┐ржХ ржорзНржпрж╛ржирж┐ржкрзБрж▓рзЗрж╢ржи ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛рж░ ржЬржирзНржп рждрзИрж░рж┐ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред ЁЯЪА</p>
          

</body>
</html>
