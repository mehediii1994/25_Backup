<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <title>eBGP ржЙржжрж╛рж╣рж░ржг</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.8;
            background-color: #f4f4f4;
            padding: 20px;
        }
        h1, h2 {
            color: #333366;
        }
        .box {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        code {
            background: #eee;
            padding: 3px 5px;
            border-radius: 4px;
        }
        pre {
            background: #272822;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            overflow-x: auto;
        }
    </style>
</head>
<body>

<h1>ЁЯМР eBGP ржЙржжрж╛рж╣рж░ржг</h1>

<div class="box">
    <h2>ржкрж░рж┐ржмрзЗрж╢:</h2>
    <ul>
        <li><strong>Router A</strong> тЖТ ASN: 65001</li>
        <li><strong>Router B</strong> тЖТ ASN: 65002</li>
    </ul>
</div>

<div class="box">
    <h2>Router A (ASN: 65001) ржПрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
    <pre>
router bgp 65001
 neighbor 192.168.12.2 remote-as 65002
 network 10.1.1.0 mask 255.255.255.0
    </pre>
</div>

<div class="box">
    <h2>Router B (ASN: 65002) ржПрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h2>
    <pre>
router bgp 65002
 neighbor 192.168.12.1 remote-as 65001
 network 20.1.1.0 mask 255.255.255.0
    </pre>
</div>

<div class="box">
    <h2>ЁЯУМ ржмрзНржпрж╛ржЦрзНржпрж╛:</h2>
    <ul>
        <li><code>neighbor</code> ржХржорж╛ржирзНржбрзЗрж░ ржорж╛ржзрзНржпржорзЗ ржжрзБржЗржЯрж┐ router ржПржХрзЗ ржЕржкрж░рзЗрж░ рж╕рж╛ржерзЗ eBGP session ржЧржаржи ржХрж░ржЫрзЗред</li>
        <li>Router A рждрж╛рж░ <code>10.1.1.0/24</code> ржПржмржВ Router B рждрж╛рж░ <code>20.1.1.0/24</code> prefix advertise ржХрж░ржЫрзЗред</li>
        <li>ржжрзБржЗржЯрж┐ ржнрж┐ржирзНржи ASN ржерж╛ржХрж╛рзЯ ржПржЯрж┐ ржПржХржЯрж┐ <strong>eBGP</strong> рж╕ржорзНржкрж░рзНржХред</li>
        <li>Prefix advertise ржХрж░рж╛рж░ рж╕ржорзЯ:
            <ul>
                <li>Next-hop рж╣ржмрзЗ advertise ржХрж░рж╛ router-ржПрж░ IPред</li>
                <li>AS_Path ржП router рждрж╛рж░ ASN ржпрзЛржЧ ржХрж░ржмрзЗред</li>
            </ul>
        </li>
    </ul>
</div>

<div class="box">
    <h2>ЁЯУЭ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржп:</h2>
    <ul>
        <li>eBGP-рждрзЗ <strong>TTL ржбрж┐ржлрж▓рзНржЯ рзз</strong>, рждрж╛ржЗ рж╕рж░рж╛рж╕рж░рж┐ рж╕ржВржпрзЛржЧ ржЫрж╛рзЬрж╛ ржХрж╛ржЬ ржХрж░ржмрзЗ ржирж╛ред</li>
        <li>AS loop prevention ржПрж░ ржЬржирзНржп router ржирж┐ржЬ ASN detect ржХрж░рж▓рзЗ prefix ржмрж╛рждрж┐рж▓ ржХрж░ржмрзЗред</li>
    </ul>
</div>



<h1>BGP Packet Types (ржмрж╛ржВрж▓рж╛ ржЯрзЗржмрж┐рж▓)</h1>

<table border="1">
    <tr>
        <th>ржЯрж╛ржЗржк</th>
        <th>ржирж╛ржо (Name)</th>
        <th>ржХрж╛ржЬрзЗрж░ ржмрж┐ржмрж░ржг (Functional Overview)</th>
    </tr>
    <tr>
        <td>1</td>
        <td>OPEN</td>
        <td>BGP рж╕ржорзНржкрж░рзНржХ (adjacency) ржЧржаржи ржУ рж╕рзНржерж╛ржкржи ржХрж░рзЗ</td>
    </tr>
    <tr>
        <td>2</td>
        <td>UPDATE</td>
        <td>рж░рзБржЯ (routes) advertise, update ржмрж╛ withdraw ржХрж░рзЗ</td>
    </tr>
    <tr>
        <td>3</td>
        <td>NOTIFICATION</td>
        <td>ржХрзЛржирзЛ ржнрзБрж▓ (error) рж╣рж▓рзЗ BGP neighbor-ржХрзЗ ржЬрж╛ржирж╛рзЯ</td>
    </tr>
    <tr>
        <td>4</td>
        <td>KEEPALIVE</td>
        <td>ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзЗ ржпрзЗ BGP neighbor ржПржЦржирзЛ рж╕ржХрзНрж░рж┐рзЯ (alive) ржЖржЫрзЗ ржХрж┐ржирж╛</td>
    </tr>
</table>



<h2>BGP Message ржЧрзБрж▓рзЛрж░ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд (CSS ржЫрж╛рзЬрж╛ Simple ржЯрзЗржмрж┐рж▓)</h2>

<table border="1">
    <tr>
        <th>ржорзЗрж╕рзЗржЬрзЗрж░ ржирж╛ржо</th>
        <th>ржмрзНржпрж╛ржЦрзНржпрж╛</th>
    </tr>
    <tr>
        <td>OPEN</td>
        <td>
            BGP рж╕ржорзНржкрж░рзНржХ (adjacency) ржЧржаржи ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХрзЗ: BGP version, originating router-ржПрж░ ASN, hold time, BGP identifier (Router ID), ржПржмржВ ржЕржирзНржпрж╛ржирзНржп optional parameterред 
        </td>
    </tr>
    <tr>
        <td>Hold Time</td>
        <td>
            ржкрзНрж░рждрж┐ржЯрж┐ BGP neighbor-ржПрж░ ржЬржирзНржп ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж╕ржорзЯ (рж╕рзЗржХрзЗржирзНржбрзЗ)ред UPDATE ржмрж╛ KEEPALIVE message ржкрзЗрж▓рзЗ reset рж╣рзЯред Timer рж╢рзЗрж╖ рж╣рж▓рзЗ session ржмржирзНржз рж╣рзЯред ржХржоржкржХрзНрж╖рзЗ рзй рж╕рзЗржХрзЗржирзНржб, ржЕржержмрж╛ рзж рж╣рж▓рзЗ keepalive ржмржирзНржзред Cisco-рждрзЗ default рззрзорзж рж╕рзЗржХрзЗржирзНржбред
        </td>
    </tr>
    <tr>
        <td>BGP Identifier (RID)</td>
        <td>
            рзйрзи-ржмрж┐ржЯрзЗрж░ ржЗржЙржирж┐ржХ ржирж╛ржорзНржмрж╛рж░ ржпрж╛ BGP router-ржХрзЗ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзЗред Loop prevention-ржПржУ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ ржмрж╛ ржЕржЯрзЛ (dynamic) рж╕рзЗржЯ ржХрж░рж╛ ржпрж╛рзЯред ржЕржмрж╢рзНржпржЗ non-zero рж╣рждрзЗ рж╣ржмрзЗред
        </td>
    </tr>
    <tr>
        <td>KEEPALIVE</td>
        <td>
            Neighbor ржЬрзАржмрж┐ржд ржЖржЫрзЗ ржХрж┐ ржирж╛ ржпрж╛ржЪрж╛ржЗрзЯрзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред Hold time-ржПрж░ ржПржХ-рждрзГрждрзАрзЯрж╛ржВрж╢ рж╕ржорзЯ ржкрж░ржкрж░ ржкрж╛ржарж╛ржирзЛ рж╣рзЯред Cisco-рждрзЗ default hold time рззрзорзж рж╕рзЗржХрзЗржирзНржб, рждрж╛ржЗ keepalive ржкрзНрж░рждрж┐ рзмрзж рж╕рзЗржХрзЗржирзНржбрзЗред Hold time рзж рж╣рж▓рзЗ keepalive ржпрж╛рзЯ ржирж╛ред
        </td>
    </tr>
    <tr>
        <td>UPDATE</td>
        <td>
            ржирждрзБржи route advertise, ржкрзБрж░ржирзЛ route withdraw, ржЕржержмрж╛ ржжрзБржЗ ржХрж╛ржЬржЗ ржПржХрж╕рж╛ржерзЗ ржХрж░рзЗред ржПрж░ ржоржзрзНржпрзЗ ржерж╛ржХрзЗ NLRI (prefix ржУ BGP attributes)ред ржХржЦржирзЛ keepalive рж╣рж┐рж╕рзЗржмрзЗржУ ржХрж╛ржЬ ржХрж░рзЗред
        </td>
    </tr>
    <tr>
        <td>NOTIFICATION</td>
        <td>
            ржнрзБрж▓ ржзрж░рж╛ ржкрзЬрж▓рзЗ (ржпрзЗржоржи hold timer рж╢рзЗрж╖, capability change, ржЗржЪрзНржЫрж╛ржХрзГржд reset) ржкрж╛ржарж╛ржирзЛ рж╣рзЯред ржПрждрзЗ BGP connection ржмржирзНржз рж╣рзЯрзЗ ржпрж╛рзЯред
        </td>
    </tr>
</table>


<h2>BGP Neighbor States (ржмрж╛ржВрж▓рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛)</h2>

<table border="1">
    <tr>
        <th>State (ржЕржмрж╕рзНржерж╛)</th>
        <th>ржмрж░рзНржгржирж╛ (Description)</th>
    </tr>
    <tr>
        <td>Idle</td>
        <td>рж╢рзБрж░рзБ ржХрж░рж╛рж░ ржзрж╛ржк, TCP connection рждрзИрж░рж┐ рж╣рзЯ ржирж╛ред рж╕ржлрж▓ рж╣рж▓рзЗ Connect ржП ржпрж╛рзЯред</td>
    </tr>
    <tr>
        <td>Connect</td>
        <td>TCP connection рж╕рзНржерж╛ржкржирзЗрж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рж╛ рж╣рзЯред рж╕ржлрж▓ рж╣рж▓рзЗ OpenSent ржП ржпрж╛рзЯ, ржмрзНржпрж░рзНрже рж╣рж▓рзЗ Active ржПред</td>
    </tr>
    <tr>
        <td>Active</td>
        <td>TCP connection ржкрзБржирж░рж╛рзЯ рж╕рзНржерж╛ржкржирзЗрж░ ржЪрзЗрж╖рзНржЯрж╛ред рж╕ржлрж▓ рж╣рж▓рзЗ OpenSent, ржмрзНржпрж░рзНрже рж╣рж▓рзЗ Idleред</td>
    </tr>
    <tr>
        <td>OpenSent</td>
        <td>TCP connection рж╕ржлрж▓ рж╣рж▓рзЗ OPEN message ржкрж╛ржарж╛рзЯ ржУ neighbor ржерзЗржХрзЗ message-ржПрж░ ржЕржкрзЗржХрзНрж╖рж╛ред</td>
    </tr>
    <tr>
        <td>OpenConfirm</td>
        <td>KEEPALIVE message ржЪрж╛рж▓рж╛ржЪрж╛рж▓рж┐ рж╣рзЯред рж╕ржм ржарж┐ржХ ржерж╛ржХрж▓рзЗ Established ржП ржпрж╛рзЯред</td>
    </tr>
    <tr>
        <td>Established</td>
        <td>BGP session рж╕ржлрж▓ржнрж╛ржмрзЗ ржЧржарж┐рждред UPDATE, KEEPALIVE, NOTIFICATION ржЪрж╛рж▓рж╛ржЪрж╛рж▓рж┐ рж╣рзЯред</td>
    </tr>
</table>


    <h1>BGP ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛рж░ ржкржжржХрзНрж╖рзЗржкржЧрзБрж▓рж┐</h1>

    <h2>Step 1:</h2>
    <p>BGP рж░рж╛ржЙржЯрж┐ржВ ржкрзНрж░рж╕рзЗрж╕ ржЗржирж┐рж╢рж┐рзЯрж╛рж▓рж╛ржЗржЬ ржХрж░рзБржи ржЧрзНрж▓рзЛржмрж╛рж▓ ржХржорж╛ржирзНржб <code>router bgp as-number</code> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред</p>
    <p><strong>ржЙржжрж╛рж╣рж░ржг:</strong><br>
    <code>router bgp 65001</code></p>

    <h2>Step 2:</h2>
    <p>(ржРржЪрзНржЫрж┐ржХ) BGP рж░рж╛ржЙржЯрж╛рж░ ржЖржЗржбрж┐ (RID) рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХржнрж╛ржмрзЗ рж╕ржВржЬрзНржЮрж╛рзЯрж┐ржд ржХрж░рзБржиред ржбрж╛ржЗржирж╛ржорж┐ржХ RID ржмрж░рж╛ржжрзНржжрзЗрж░ ржЬржирзНржп рж▓рзБржкржмрзНржпрж╛ржХ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ржЧрзБрж▓рж┐рж░ ржоржзрзНржпрзЗ рж╕рж░рзНржмрзЛржЪрзНржЪ IP ржарж┐ржХрж╛ржирж╛ ржмрзНржпржмрж╣рзГржд рж╣рзЯред ржпржжрж┐ ржХрзЛржирзЛ рж▓рзБржкржмрзНржпрж╛ржХ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕ рж╕ржХрзНрж░рж┐рзЯ ржирж╛ ржерж╛ржХрзЗ, рждржмрзЗ рж╕ржХрзНрж░рж┐рзЯ рж╕ржм ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗрж░ ржоржзрзНржпрзЗ рж╕рж░рзНржмрзЛржЪрзНржЪ IP ржарж┐ржХрж╛ржирж╛ BGP ржкрзНрж░рж╕рзЗрж╕ ржЗржирж┐рж╢рж┐рзЯрж╛рж▓рж╛ржЗржЬ рж╣ржУрзЯрж╛рж░ рж╕ржорзЯ RID рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред</p>
    <p>RID ржкрж░рж┐ржмрж░рзНрждржи ржирж╛ рж╣ржУрзЯрж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ RID ржирж┐рж░рзНржзрж╛рж░ржг ржХрж░рж╛ ржЙржЪрж┐ржд (рж╕рж╛ржзрж╛рж░ржгржд ржПржХржЯрж┐ рж▓рзБржкржмрзНржпрж╛ржХ ржарж┐ржХрж╛ржирж╛)ред ржпрзЗржХрзЛржирзЛ IPv4 ржарж┐ржХрж╛ржирж╛ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗ, ржПржоржиржХрж┐ ржпрзЗржЧрзБрж▓рж┐ рж░рж╛ржЙржЯрж╛рж░рзЗ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ ржирзЗржЗред BGP RID рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХржнрж╛ржмрзЗ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ ржПржХржЯрж┐ ржнрж╛рж▓ ржЕржнрзНржпрж╛рж╕ ржПржмржВ ржПрж░ ржЬржирзНржп <code>bgp router-id router-id</code> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред</p>
    <p><strong>ржЙржжрж╛рж╣рж░ржг:</strong><br>
    <code>bgp router-id 192.168.1.1</code></p>

    <h2>Step 3:</h2>
    <p>BGP neighbor ржПрж░ IP ржарж┐ржХрж╛ржирж╛ ржПржмржВ ржЕржЯрзЛржирзЛржорж╛рж╕ рж╕рж┐рж╕рзНржЯрзЗржо ржиржорзНржмрж░ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзБржи BGP рж░рж╛ржЙржЯрж╛рж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржХржорж╛ржирзНржб <code>neighbor ip-address remote-as as-number</code> ржжрж┐рзЯрзЗред</p>
    <p>BGP ржкрзНржпрж╛ржХрзЗржЯрзЗрж░ ржЯрзНрж░рж╛ржлрж┐ржХ ржкрзНрж░ржмрж╛рж╣ ржмрзЛржЭрж╛ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржгред ржпржЦржи ржПржХржЯрж┐ BGP ржкрзНржпрж╛ржХрзЗржЯ ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ, рж░рж╛ржЙржЯрж╛рж░ рждрж╛рж░ рж╕рзЛрж░рзНрж╕ IP ржарж┐ржХрж╛ржирж╛ neighbor ржПрж░ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛ IP ржарж┐ржХрж╛ржирж╛рж░ рж╕рж╛ржерзЗ ржорж┐рж▓рж┐рзЯрзЗ ржлрзЗрж▓рзЗред ржпржжрж┐ рж╕рзЛрж░рзНрж╕ IP ржарж┐ржХрж╛ржирж╛ neighbor ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕рж╛ржерзЗ ржорзЗрж▓рзЗ ржирж╛, рждрж╛рж╣рж▓рзЗ ржкрзНржпрж╛ржХрзЗржЯржЯрж┐ ржмрж╛рждрж┐рж▓ рж╣рзЯрзЗ ржпрж╛ржмрзЗред</p>
    <p><strong>ржЙржжрж╛рж╣рж░ржг:</strong><br>
    <code>neighbor 192.168.1.2 remote-as 65002</code></p>

    <h2>Step 4:</h2>
    <p>ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржЗржирж┐рж╢рж┐рзЯрж╛рж▓рж╛ржЗржЬ ржХрж░рзБржи BGP рж░рж╛ржЙржЯрж╛рж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржХржорж╛ржирзНржб <code>address-family afi safi</code> ржжрж┐рзЯрзЗред ржЙржжрж╛рж╣рж░ржгрж╕рзНржмрж░рзВржк, afi ржорж╛ржи рж╣рждрзЗ ржкрж╛рж░рзЗ IPv4 ржПржмржВ IPv6, ржПржмржВ safi ржорж╛ржи рж╣рждрзЗ ржкрж╛рж░рзЗ unicast ржПржмржВ multicastред</p>
    <p><strong>ржЙржжрж╛рж╣рж░ржг:</strong><br>
    <code>address-family ipv4 unicast</code></p>

    <h2>Step 5:</h2>
    <p>BGP neighbor ржПрж░ ржЬржирзНржп ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржЕрзНржпрж╛ржХрзНржЯрж┐ржнрзЗржЯ ржХрж░рзБржи BGP ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи ржХржорж╛ржирзНржб <code>neighbor ip-address activate</code> ржжрж┐рзЯрзЗред</p>
    <p><strong>ржЙржжрж╛рж╣рж░ржг:</strong><br>
    <code>neighbor 192.168.1.2 activate</code></p>
    





        <h2>BGP рж╕рзЗрж╢ржи рж╕рж╛рж░рж╛ржВрж╢ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛</h2>
        <p>ржПржЗ ржХржорж╛ржирзНржбржЯрж┐ ржжрж┐рзЯрзЗ BGP рж╕рзЗрж╢ржирзЗрж░ рж╕рж╛рж░рж╛ржВрж╢ ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ рж╣рзЯред ржирж┐ржЪрзЗ ржПржХржЯрж┐ ржЙржжрж╛рж╣рж░ржг ржжрзЗрзЯрж╛ рж╣рж▓рзЛ:</p>
        
        <pre>
R1# show bgp ipv4 unicast summary
BGP router identifier 192.168.2.2, local AS number 65200
BGP table version is 1, main routing table version 1
Neighbor       V    AS   MsgRcvd   MsgSent   TblVer   InQ   OutQ   Up/Down   State/PfxRcd
10.12.1.2      4  65200   8         9         1        0     0     00:05:23   0
        </pre>

        <p>ржПржЦрж╛ржирзЗ:</p>
        <ul>
            <li><strong>Neighbor</strong>: ржкрж┐рзЯрж╛рж░ IP ржарж┐ржХрж╛ржирж╛ (10.12.1.2)</li>
            <li><strong>V</strong>: BGP рж╕ржВрж╕рзНржХрж░ржг (рзк)</li>
            <li><strong>AS</strong>: ржкрж┐рзЯрж╛рж░-ржПрж░ AS рж╕ржВржЦрзНржпрж╛ (65200)</li>
            <li><strong>MsgRcvd</strong>: ржкрж┐рзЯрж╛рж░ ржерзЗржХрзЗ ржкрзНрж░рж╛ржкрзНржд ржмрж╛рж░рзНрждрж╛рж░ рж╕ржВржЦрзНржпрж╛ (рзо)</li>
            <li><strong>MsgSent</strong>: ржкрж┐рзЯрж╛рж░ржХрзЗ ржкрзНрж░рзЗрж░рж┐ржд ржмрж╛рж░рзНрждрж╛рж░ рж╕ржВржЦрзНржпрж╛ (рзп)</li>
            <li><strong>Up/Down</strong>: рж╕рзЗрж╢ржиржЯрж┐ рзл ржорж┐ржирж┐ржЯ рзирзй рж╕рзЗржХрзЗржирзНржб ржзрж░рзЗ ржЖржк рж░рзЯрзЗржЫрзЗ</li>
        </ul>
    </section>

    <section>
        <h2>BGP ржкрзЗрзЯрж╛рж░ рж╕ржорзНржкрж░рзНржХрж┐ржд ржЖрж░ржУ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рждржерзНржп</h2>
        <p>ржЖрж░ржУ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рждржерзНржп ржкрж╛ржУрзЯрж╛рж░ ржЬржирзНржп, ржирж┐ржЪрзЗрж░ ржХржорж╛ржирзНржбржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ:</p>
        
        <pre>
R2# show bgp ipv4 unicast neighbors 10.12.1.1

BGP neighbor is 10.12.1.1, remote AS65100, external link
BGP version 4, remote router ID 192.168.1.1
BGP state = Established, up for 00:01:04
Last read 00:00:10, last write 00:00:09, hold is 180, keepalive is 60 seconds

Neighbor capabilities:
Route refresh: advertised and received(new)
Four-octets ASN Capability: advertised and received
Address family IPv4 Unicast: advertised and received
Enhanced Refresh Capability: advertised
Multisession Capability:
Stateful switchover support enabled: NO for session 1

Message statistics:
Sent       Rcvd
Opens:                  1          1
Notifications:          0          0
Updates:                0          0
Keepalives:             2          2
Route Refresh:          0          0
Total:                  4          3

Address tracking is enabled, the RIB does have a route to 10.12.1.1
Connections established 2; dropped 1
Last reset 00:01:40, due to Peer closed the session
        </pre>

        <p>ржПржЦрж╛ржирзЗ:</p>
        <ul>
            <li><strong>BGP State</strong>: рж╕рзЗрж╢ржиржЯрж┐ ржмрж░рзНрждржорж╛ржирзЗ Established ржЕржмрж╕рзНржерж╛рзЯ рж░рзЯрзЗржЫрзЗ ржПржмржВ рзз ржорж┐ржирж┐ржЯ рзк рж╕рзЗржХрзЗржирзНржб ржзрж░рзЗ ржЪрж▓ржорж╛ржиред</li>
            <li><strong>Neighbor Capabilities</strong>: ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ ржпрзЗ, BGP ржкрзЗрзЯрж╛рж░ рж░рзБржЯ рж░рж┐ржлрзНрж░рзЗрж╢, ржлрзЛрж░-ржЕрзНржпрж╛ржХржЯрзЗржЯ ржПрж╕ржПржи (ASN) рж╕ржХрзНрж╖ржорждрж╛, IPv4 ржЗржЙржирж┐ржХрж╛рж╕рзНржЯ ржЕрзНржпрж╛ржбрзНрж░рзЗрж╕ ржлрзНржпрж╛ржорж┐рж▓рж┐ ржкрзНрж░ржнрзГрждрж┐ ржмрж┐ржЬрзНржЮрж╛ржкржи ржУ ржЧрзНрж░рж╣ржг ржХрж░ржЫрзЗред</li>
            <li><strong>Message Statistics</strong>: ржПржЦрж╛ржирзЗ ржмрж╛рж░рзНрждрж╛ рж╕ржорзНржкрж░рзНржХрж┐ржд рждржерзНржп ржжрзЗржЦрж╛ржЪрзНржЫрзЗтАФржХрждржмрж╛рж░ ржУржкрзЗржи, ржирзЛржЯрж┐ржлрж┐ржХрзЗрж╢ржи, ржЖржкржбрзЗржЯ ржПржмржВ ржХрж┐ржкржЕрж▓рж╛ржЗржн ржорзЗрж╕рзЗржЬ ржкрзНрж░рзЗрж░рж┐ржд ржУ ржкрзНрж░рж╛ржкрзНржд рж╣рзЯрзЗржЫрзЗред</li>
            <li><strong>Address Tracking</strong>: RIB (Routing Information Base) ржерзЗржХрзЗ ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗ ржпрзЗ, рззрзж.рззрзи.рзз.рзз ржарж┐ржХрж╛ржирж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ рж░рзБржЯ ржЙржкрж╕рзНржерж┐ржд рж░рзЯрзЗржЫрзЗред</li>
        </ul>
    </section>


        <h1>Prefix Advertisement</h1>
        <p>BGP ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯржЧрзБрж▓рж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржЗржирзНржЯрж╛рж░ржлрзЗрж╕рзЗ BGP рж╕ржХрзНрж░рж┐рзЯ ржХрж░рзЗ ржирж╛; ржмрж░ржВ ржПржЧрзБрж▓рж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ржЧрзБрж▓рж┐ржХрзЗ ржЪрж┐рж╣рзНржирж┐ржд ржХрж░рзЗ, ржпрж╛ BGP ржЯрзЗржмрж┐рж▓рзЗ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ рж╣рзЯ, ржпрж╛ Loc-RIB ржЯрзЗржмрж┐рж▓ рж╣рж┐рж╕рзЗржмрзЗ ржкрж░рж┐ржЪрж┐рждред</p>
        
        <h2>ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржмрж┐ржЬрзНржЮрж╛ржкржи ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛</h2>
        <p>ржПржХржЯрж┐ BGP ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ ржХржиржлрж┐ржЧрж╛рж░ ржХрж░рж╛рж░ ржкрж░, BGP ржкрзНрж░рж╕рзЗрж╕ ржЧрзНрж▓рзЛржмрж╛рж▓ RIB-ржП ржПржХржЯрж┐ рж╕ржарж┐ржХ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржорзНржпрж╛ржЪрзЗрж░ ржЬржирзНржп ржЕржирзБрж╕ржирзНржзрж╛ржи ржХрж░рзЗред</p>
        
        <h3>ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ ржПржмржВ RIB</h3>
        <ul>
            <li><strong>рж╕ржВржпрзБржХрзНржд ржирзЗржЯржУрзЯрж╛рж░рзНржХ:</strong> Next-hop BGP ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЯрж┐ 0.0.0.0 рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯ, BGP ржЙрзОрж╕ ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЯрж┐ 'i' (IGP) рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯ, ржПржмржВ BGP ржУрзЯрзЗржЯ 32,768 рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯред</li>
            <li><strong>рж╕рзНржЯрзНржпрж╛ржЯрж┐ржХ рж░рзБржЯ ржмрж╛ рж░рж╛ржЙржЯрж┐ржВ ржкрзНрж░рзЛржЯрзЛржХрж▓:</strong> Next-hop BGP ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЯрж┐ RIB-ржП ржерж╛ржХрж╛ ржирзЗржХрзНрж╕ржЯ-рж╣ржк IP ржарж┐ржХрж╛ржирж╛ ржжрж┐рзЯрзЗ рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯ, BGP ржЙрзОрж╕ ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЯрж┐ 'i' (IGP) ржерж╛ржХрзЗ, BGP ржУрзЯрзЗржЯ 32,768 ржерж╛ржХрзЗ, ржПржмржВ MED (Multi-Exit Discriminator) IGP ржорзЗржЯрзНрж░рж┐ржХрзЗрж░ рж╕рж╛ржерзЗ рж╕рзЗржЯ ржХрж░рж╛ рж╣рзЯред</li>
        </ul>
    
        <h3>ржкрзНрж░рж╕рзЗрж╕рж┐ржВ рж╕рзНржЯрзЗржкрж╕</h3>
        <p>ржкрзНрж░рждрзНржпрзЗржХржЯрж┐ рж░рзБржЯ Loc-RIB ржЯрзЗржмрж┐рж▓рзЗ BGP ржкрж┐рзЯрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рж╛ рж╣рзЯ ржирж╛ред Loc-RIB ржЯрзЗржмрж┐рж▓рзЗрж░ рж╕ржм рж░рзБржЯ BGP ржкрж┐рзЯрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рж╛рж░ ржЬржирзНржп ржирж┐ржЪрзЗрж░ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛ ржЕржирзБрж╕рж░ржг ржХрж░рж╛ рж╣рзЯ:</p>
        <ol>
            <li><strong>ржкржжржХрзНрж╖рзЗржк рзз:</strong> ржкрзНрж░ржорж╛ржгрзАржХрж░ржг ржпрж╛ржЪрж╛ржЗ ржХрж░рж╛ рж╣рзЯред ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рж╛ рж╣рзЯ ржпрзЗ NRLI ржмрзИржз ржПржмржВ ржирзЗржХрзНрж╕ржЯ-рж╣ржк ржарж┐ржХрж╛ржирж╛ржЯрж┐ ржЧрзНрж▓рзЛржмрж╛рж▓ RIB-ржП рж╕ржорж╛ржзрж╛ржиржпрзЛржЧрзНржпред</li>
            <li><strong>ржкржжржХрзНрж╖рзЗржк рзи:</strong> ржЖржЙржЯржмрж╛ржЙржирзНржб ржкрж┐рзЯрж╛рж░ рж░рж╛ржЙржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛ ржХрж░рж╛ рж╣рзЯред</li>
            <li><strong>ржкржжржХрзНрж╖рзЗржк рзй:</strong> NLRI ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рж╛ рж╣рзЯ BGP ржкрж┐рзЯрж╛рж░рзЗрж░ ржХрж╛ржЫрзЗред</li>
        </ol>
    
        <h3>BGP ржЯрзЗржмрж┐рж▓ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛ржХрж░ржг</h3>
        <p><strong>ржЯрж┐ржк:</strong> BGP рж╢рзБржзрзБржорж╛рждрзНрж░ рж╕рзЗрж░рж╛ ржкрже (Best Path) ржЕржирзНржп BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржХрж╛ржЫрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рзЗ, ржХрзЛржи рж░ржХржорзЗрж░ рж░рзБржЯ (NLRI) BGP Loc-RIB ржЯрзЗржмрж┐рж▓рзЗ ржерж╛ржХрж╛ рж╕рждрзНрждрзНржмрзЗржУред</p>
        
        <h2>ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h2>
        <p>ржирзЗржЯржУрзЯрж╛рж░рзНржХ рж╕рзНржЯрзЗржЯржорзЗржирзНржЯржЯрж┐ BGP рж░рж╛ржЙржЯрж╛рж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржирзЗрж░ ржЕржзрзАржирзЗ рж╕ржВрж╢рзНрж▓рж┐рж╖рзНржЯ ржарж┐ржХрж╛ржирж╛ ржлрзНржпрж╛ржорж┐рж▓рж┐рж░ ржоржзрзНржпрзЗ ржерж╛ржХрзЗред ржХржорж╛ржирзНржб <code>network network mask subnet-mask [route-map route-map-name]</code> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯ IPv4 ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХрж░рж╛рж░ ржЬржирзНржпред</p>
        
        <h3>ржЙржжрж╛рж╣рж░ржг рззрзз-рзл: BGP ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h3>
        
        <pre>
        R1:
        router bgp 65100
        bgp log-neighbor-changes
        no bgp default ipv4-unicast
        neighbor 10.12.1.2 remote-as 100
        network 10.12.1.0 mask 255.255.255.0
        network 192.168.1.1 mask 255.255.255.255
        
        R2:
        router bgp 65200
        bgp log-neighbor-changes
        no bgp default ipv4-unicast
        neighbor 10.12.1.1 remote-as 65100
        !
        address-family ipv4
        network 10.12.1.0 mask 255.255.255.0
        network 192.168.2.2 mask 255.255.255.255
        neighbor 10.12.1.1 activate
        exit-address-family
        </pre>



            <h1>рж░рзБржЯ (Route) ржЧрзНрж░рж╣ржг ржПржмржВ ржжрзЗржЦрж╛ (Receiving and Viewing Routes)</h1>
        
            <p>BGP (Border Gateway Protocol) ржпрзЗ ржХрзЛржирзЛ рж░рзБржЯ ржмрж╛ ржкрже (Route) ржЧрзНрж░рж╣ржг ржУ ржкрж░рж┐ржЪрж╛рж▓ржирж╛ ржХрж░рж╛рж░ ржЬржирзНржп рзйржЯрж┐ ржЖрж▓рж╛ржжрж╛ ржЯрзЗржмрж┐рж▓ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ:</p>
        
            <h2>Adj-RIB-In (Adjacent Routing Information Base-In)</h2>
            <ul>
                <li>ржПржЦрж╛ржирзЗ рж╕ржм рж░рзБржЯ (Network Prefixes) ржкрзНрж░ржержорзЗ ржЬржорж╛ рж╣рзЯ ржпрзЗржнрж╛ржмрзЗ ржкрзЗрзЯрзЗржЫрзЗ, ржорж╛ржирзЗ ржЗржиржмрж╛ржЙржирзНржб (inbound) рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛ржХрж░ржгрзЗрж░ ржЖржЧрзЗрж░ ржЕржмрж╕рзНржерж╛рзЯред</li>
                <li>ржорзЗржорзЛрж░рж┐ ржмрж╛ржБржЪрж╛ржирзЛрж░ ржЬржирзНржп, ржЗржиржмрж╛ржЙржирзНржб рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛рж░ ржкрж░ ржПржЗ ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ ржбрзЗржЯрж╛ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣рзЯред</li>
            </ul>
        
            <h2>Loc-RIB (Local Routing Information Base)</h2>
            <ul>
                <li>ржПржЦрж╛ржирзЗ рж╕ржм рж░рзБржЯ ржерж╛ржХрзЗ, ржпрзЗржЧрзБрж▓рзЛ BGP ржкрж┐рзЯрж╛рж░ (peer) ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ ржмрж╛ рж▓рзЛржХрж╛рж▓рж┐ (local) рждрзИрж░рж┐ рж╣рзЯрзЗржЫрзЗред</li>
                <li>рж░рзБржЯржЧрзБрж▓рзЛ ржпрж╛ржЪрж╛ржЗ (validity check) ржХрж░рж╛ рж╣рзЯ, ржпрзЗржоржи ржирзЗржХрзНрж╕ржЯ-рж╣ржк (Next-Hop) IP ржарж┐ржХрж╛ржирж╛ржЯрж┐ ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ред</li>
                <li>рж╕ржарж┐ржХ (valid) рж░рзБржЯ ржерзЗржХрзЗ BGP "рж╕рзЗрж░рж╛ ржкрже" (Best Path) ржмрзЗржЫрзЗ ржирзЗрзЯред</li>
                <li>ржПржЗ Loc-RIB ржЯрзЗржмрж┐рж▓ ржерзЗржХрзЗ рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ (IP Routing Table) рж░рзБржЯ ржкрж╛ржарж╛ржирзЛ рж╣рзЯред</li>
            </ul>
        
            <h2>Adj-RIB-Out (Adjacent Routing Information Base-Out)</h2>
            <ul>
                <li>ржПржЦрж╛ржирзЗ рж╕рзЗржЗ рж╕ржм рж░рзБржЯ рж░рж╛ржЦрж╛ рж╣рзЯ, ржпрзЗржЧрзБрж▓рзЛ ржЖржЙржЯржмрж╛ржЙржирзНржб (outbound) рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░ржХрзНрж░рж┐рзЯрж╛рж░ ржкрж░ BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржирзЛрж░ ржЬржирзНржп рждрзИрж░рж┐ ржХрж░рж╛ рж╣рзЯред</li>
                <li>рж╕ржм рж░рзБржЯ BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржкрж╛ржарж╛ржирзЛ рж╣рзЯ ржирж╛ ржмрж╛ ржЧрзНрж▓рзЛржмрж╛рж▓ RIB (Routing Information Base)-ржП ржпрзЛржЧ рж╣рзЯ ржирж╛ред</li>
            </ul>
        
            <h2>BGP ржХрж┐ржнрж╛ржмрзЗ рж░рзБржЯ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ? (BGP Route Processing Steps)</h2>
        
            <h3>Step 1:</h3>
            <p>рж░рзБржЯ ржкрзНрж░ржержорзЗ Adj-RIB-In ржЯрзЗржмрж┐рж▓рзЗ ржЬржорж╛ рж╣рзЯред рждрж╛рж░ржкрж░ ржпрзЗржЦрж╛ржи ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ рж╕рзЗржЗ ржкрзНрж░рждрж┐ржмрзЗрж╢рзАрж░ (neighbor) ржЬржирзНржп ржирж┐рж░рзНржзрж╛рж░рж┐ржд ржЗржиржмрж╛ржЙржирзНржб рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣рзЯред</p>
        
            <h3>Step 2:</h3>
            <p>ржЗржиржмрж╛ржЙржирзНржб ржкрж▓рж┐рж╕рж┐рж░ ржкрж░рзЗ рж░рзБржЯ Loc-RIB ржП ржЬржорж╛ рж╣рзЯред рждрж╛рж░ржкрж░ Adj-RIB-In ржерзЗржХрзЗ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ рж╣рзЯ (ржорзЗржорзЛрж░рж┐ ржмрж╛ржБржЪрж╛ржирзЛрж░ ржЬржирзНржп)ред</p>
        
            <h3>Step 3:</h3>
            <p>рж░рзБржЯржЯрж┐ ржарж┐ржХ ржЖржЫрзЗ ржХрж┐ржирж╛ (Validity Check) ржПржмржВ ржирзЗржХрзНрж╕ржЯ-рж╣ржк ржарж┐ржХрж╛ржирж╛ржЯрж┐ ржЖрж╕рж▓рзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрж╛рзЯ ржХрж┐ржирж╛ рж╕рзЗржЯрж╛ ржжрзЗржЦрж╛ рж╣рзЯред</p>
            <p>ржпржжрж┐ рж░рзБржЯ Valid ржирж╛ рж╣рзЯ, рждрж╛рж╣рж▓рзЗ рж╕рзЗржЯрж╛ Loc-RIB ржП ржерзЗржХрзЗ ржпрж╛рзЯ ржХрж┐ржирзНрждрзБ ржЖрж░ ржПржЧрзЛрзЯ ржирж╛ред</p>
        
            <h3>Step 4:</h3>
            <p>BGP ржПржЦржи рж╕рзЗрж░рж╛ ржкрже (Best Path) ржмрзЗржЫрзЗ ржирзЗрзЯ ржПржмржВ рж╕рзЗржЗ ржкржерзЗрж░ ржкрзНрж░рзЯрзЛржЬржирзАрзЯ рждржерзНржп (Path Attributes) ржирж┐рзЯрзЗ ржкрж░ржмрж░рзНрждрзА ржзрж╛ржкрзЗ ржпрж╛рзЯред</p>
        
            <h3>Step 5:</h3>
            <ul>
                <li>BGP ржПрж░ ржмрж╛ржЫрж╛ржЗ ржХрж░рж╛ рж╕рзЗрж░рж╛ рж░рзБржЯ (Best Path) ржЧрзНрж▓рзЛржмрж╛рж▓ RIB (Routing Table)-ржП ржпрзБржХрзНржд рж╣рзЯред</li>
                <li>ржЖржЙржЯржмрж╛ржЙржирзНржб рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣рзЯред</li>
                <li>ржпрзЗрж╕ржм рж░рзБржЯ ржмрж╛ржж ржпрж╛рзЯ ржирж╛ рж╕рзЗржЧрзБрж▓рзЛ Adj-RIB-Out ржП ржЬржорж╛ рж╣рзЯред</li>
                <li>ржПрж░ржкрж░ ржПржЗ рж░рзБржЯ BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржХрж╛ржЫрзЗ ржкрж╛ржарж╛ржирзЛ рж╣рзЯ (Advertise ржХрж░рж╛ рж╣рзЯ)ред</li>
            </ul>

                <h1>ЁЯМР BGP рж░рзБржЯ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ-ржПрж░ рж╕рж╣ржЬ Flow Chart (ржмрж╛ржВрж▓рж╛рзЯ)</h1>
            
                <pre>
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ        рж░рзБржЯ (Route) ржкрж╛ржУрзЯрж╛ ржЧрзЗрж▓рзЛ         тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ рзз. Adj-RIB-In ржП ржЬржорж╛ ржХрж░рж╛ рж╣рж▓рзЛ тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ ржЗржиржмрж╛ржЙржирзНржб (Inbound) рж░рзБржЯ ржкрж▓рж┐рж╕рж┐ тФВ
                    тФВ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣рж▓рзЛ               тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ рзи. Loc-RIB ржЯрзЗржмрж┐рж▓рзЗ ржкрж╛ржарж╛ржирзЛ рж╣рж▓рзЛ тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ Adj-RIB-In ржерзЗржХрзЗ рж░рзБржЯ ржорзБржЫрзЗ ржлрзЗрж▓рж╛ тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ рзй. Validity Check:            тФВ
                    тФВ - рж░рзБржЯ рж╕ржарж┐ржХ ржХрж┐?                тФВ
                    тФВ - ржирзЗржХрзНрж╕ржЯ-рж╣ржк IP ржкрж╛ржУрзЯрж╛ ржпрж╛рзЯ ржХрж┐? тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФ┤тФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ                           тФВ
                    тЦ╝                           тЦ╝
                тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР          тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                тФВ  рж╕ржарж┐ржХ (Valid) тФВ          тФВ ржнрзБрж▓ (Invalid)   тФВ
                тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ          тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                        тФВ                               тФВ
                        тЦ╝                               тЦ╝
                тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР   тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                тФВ ржкрж░ржмрж░рзНрждрзА ржзрж╛ржкрзЗ ржпрж╛ржмрзЗ           тФВ   тФВ Loc-RIB ржП ржерж╛ржХржмрзЗ, ржХрж╛ржЬ рж╣ржмрзЗ ржирж╛ тФВ
                тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ   тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ рзк. BGP Best Path ржирж┐рж░рзНржмрж╛ржЪржи    тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ рзл. рж╕рзЗрж░рж╛ рж░рзБржЯ Routing Table ржП ржпрзБржХрзНржд рж╣ржмрзЗ тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ ржЖржЙржЯржмрж╛ржЙржирзНржб (Outbound) ржкрж▓рж┐рж╕рж┐   тФВ
                    тФВ ржкрзНрж░рзЯрзЛржЧ ржХрж░рж╛ рж╣ржмрзЗ               тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ Adj-RIB-Out ржП рж░рзБржЯ ржЬржорж╛ рж╣ржмрзЗ    тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФмтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                                  тФВ
                                  тЦ╝
                    тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
                    тФВ BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ рж░рзБржЯ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗ тФВ
                    тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
                </pre>
            

    x
    <p>BGP ржкрж┐рзЯрж╛рж░ржжрзЗрж░ рж░рзБржЯ ржкрж╛ржарж╛ржирзЛ рж╣ржмрзЗ</p>

    <h3>ЁЯФС рж╕ржВржХрзНрж╖рзЗржкрзЗ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржХрзМрж╢рж▓ (Shortcut to Remember Steps):</h3>
    <p>Adj-RIB-In тЖТ Inbound Policy тЖТ Loc-RIB тЖТ Validity Check тЖТ Best Path тЖТ Routing Table тЖТ Outbound Policy тЖТ Adj-RIB-Out тЖТ ржкрж┐рзЯрж╛рж░ржжрзЗрж░ ржкрж╛ржарж╛ржирзЛ</p>


    
    <h1>ЁЯФ╡ BGP Table ржжрзЗржЦрж╛ ржУ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг (ржмрж╛ржВрж▓рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛рж╕рж╣ ржЙржжрж╛рж╣рж░ржг)</h1>
    
    <h2>ЁЯФ╢ ржЯржкрж┐ржХ: "show bgp afi safi" ржХржорж╛ржирзНржб</h2>
    
    <p>BGP (Border Gateway Protocol) ржбрзЗржЯрж╛ржмрзЗрж╕ (Loc-RIB) ржПрж░ ржнрзЗрждрж░рзЗрж░ рж╕ржм рж░рзБржЯ (Routes) ржжрзЗржЦрждрзЗ <b>show bgp afi safi</b> ржХржорж╛ржирзНржб ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржПржЗ Loc-RIB ржЯрзЗржмрж┐рж▓рзЗ BGP рж░рж╛ржЙржЯрж╛рж░ рждрж╛рж░ рж╢рзЗржЦрж╛ (received) ржПржмржВ рж▓рзЛржХрж╛рж▓рж┐ рждрзИрж░рж┐ (locally generated) рж░рзБржЯ ржЬржорж╛ рж░рж╛ржЦрзЗред</p>
    
    <h3>тЬЕ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржмрж┐рж╖рзЯ:</h3>
    <ul>
        <li>ржкрзНрж░рждрж┐ржЯрж╛ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ (Network Prefix)-ржПрж░ ржЬржирзНржп ржПржХрж╛ржзрж┐ржХ ржкрже (Multiple Paths) ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред</li>
        <li>рж╕рзЗрж░рж╛ ржкрже (Best Path) ржЪрж┐рж╣рзНржирж┐ржд ржерж╛ржХрзЗред</li>
    </ul>
    
    <h3>тЬЕ ржЙржжрж╛рж╣рж░ржг рззрзз-рзм: BGP ржЯрзЗржмрж┐рж▓ ржжрзЗржЦрж╛ (Router R1)</h3>
    
    <h3>ЁЯУЛ ржХржорж╛ржирзНржб ржУ ржЖржЙржЯржкрзБржЯ:</h3>
    <pre>
    R1# show bgp ipv4 unicast
    BGP table version is 4, local router ID is 192.168.1.1
    Status codes: s suppressed, d damped, h history, * valid, > best, i - internal,
    r RIB-failure, S Stale, m multipath, b backup-path, f RT-Filter,
    x best-external, a additional-path, c RIB-compressed,
    Origin codes: i - IGP, e - EGP, ? - incomplete
    RPKI validation codes: V valid, I invalid, N Not found
    
    Network          Next Hop            Metric LocPrf Weight Path
    *   10.12.1.0/24     10.12.1.2                0             0 65200 i
    *>                   0.0.0.0                  0         32768 i
    *>  192.168.1.1/32   0.0.0.0                  0         32768 i
    *>  192.168.2.2/32   10.12.1.2                0             0 65200 i
    </pre>
    
    <h3>ЁЯУЭ ржмрж╛ржВрж▓рж╛рзЯ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг (R1):</h3>
    <table border="1" cellpadding="8" cellspacing="0">
        <thead>
            <tr>
                <th>Network (ржирзЗржЯржУрзЯрж╛рж░рзНржХ)</th>
                <th>Next Hop (ржкрж░ржмрж░рзНрждрзА рж╣ржк)</th>
                <th>Metric</th>
                <th>LocPrf</th>
                <th>Weight</th>
                <th>AS Path (ржкрже)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>10.12.1.0/24</td>
                <td>10.12.1.2</td>
                <td>0</td>
                <td>-</td>
                <td>0</td>
                <td>65200 i</td>
            </tr>
            <tr>
                <td><b>10.12.1.0/24 (Best)</b></td>
                <td>0.0.0.0</td>
                <td>0</td>
                <td>-</td>
                <td>32768</td>
                <td>i</td>
            </tr>
            <tr>
                <td>192.168.1.1/32</td>
                <td>0.0.0.0</td>
                <td>0</td>
                <td>-</td>
                <td>32768</td>
                <td>i</td>
            </tr>
            <tr>
                <td>192.168.2.2/32</td>
                <td>10.12.1.2</td>
                <td>0</td>
                <td>-</td>
                <td>0</td>
                <td>65200 i</td>
            </tr>
        </tbody>
    </table>
    
    <h3>ЁЯУЭ ржмрж╛ржВрж▓рж╛рзЯ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг (R2):</h3>
    
    <h3>ЁЯУЛ ржХржорж╛ржирзНржб ржУ ржЖржЙржЯржкрзБржЯ:</h3>
    <pre>
    R2# show bgp ipv4 unicast | begin Network
    Network          Next Hop            Metric LocPrf Weight Path
    *   10.12.1.0/24     10.12.1.1                0             0 65100 i
    *>                   0.0.0.0                  0         32768 i
    *>  192.168.1.1/32   10.12.1.1                0             0 65100 i
    *>  192.168.2.2/32   0.0.0.0                  0         32768 i
    </pre>
    
    <table border="1" cellpadding="8" cellspacing="0">
        <thead>
            <tr>
                <th>Network (ржирзЗржЯржУрзЯрж╛рж░рзНржХ)</th>
                <th>Next Hop (ржкрж░ржмрж░рзНрждрзА рж╣ржк)</th>
                <th>Metric</th>
                <th>LocPrf</th>
                <th>Weight</th>
                <th>AS Path (ржкрже)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>10.12.1.0/24</td>
                <td>10.12.1.1</td>
                <td>0</td>
                <td>-</td>
                <td>0</td>
                <td>65100 i</td>
            </tr>
            <tr>
                <td><b>10.12.1.0/24 (Best)</b></td>
                <td>0.0.0.0</td>
                <td>0</td>
                <td>-</td>
                <td>32768</td>
                <td>i</td>
            </tr>
            <tr>
                <td>192.168.1.1/32</td>
                <td>10.12.1.1</td>
                <td>0</td>
                <td>-</td>
                <td>0</td>
                <td>65100 i</td>
            </tr>
            <tr>
                <td>192.168.2.2/32</td>
                <td>0.0.0.0</td>
                <td>0</td>
                <td>-</td>
                <td>32768</td>
                <td>i</td>
            </tr>
        </tbody>
    </table>
    
    <h3>ЁЯУК ржорзВрж▓ ржмрж┐рж╖рзЯржЧрзБрж▓рзЛ рж╕ржВржХрзНрж╖рзЗржкрзЗ:</h3>
    <ul>
        <li>тЬЕ BGP ржЯрзЗржмрж┐рж▓ ржорж╛ржирзЗ Loc-RIB ржпрзЗржЦрж╛ржирзЗ рж░рж╛ржЙржЯрж╛рж░ рж╢рзЗржЦрж╛ ржУ ржирж┐ржЬрзЗрж░ рждрзИрж░рж┐ рж░рзБржЯ ржЬржорж╛ рж░рж╛ржЦрзЗред</li>
        <li>тЬЕ ржкрзНрж░рждрж┐ржЯрж╛ рж░рзБржЯрзЗрж░ ржЬржирзНржп Next Hop, Metric, Weight, AS Path ржерж╛ржХрзЗред</li>
        <li>тЬЕ рж╕рзЗрж░рж╛ рж░рзБржЯ ржЪрж┐рж╣рзНржирж┐ржд рж╣рзЯ *> ржжрж┐рзЯрзЗ, ржпрзЗржЯрж╛ IP рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗржУ ржпрзБржХрзНржд рж╣рзЯред</li>
        <li>тЬЕ рж░рзБржЯ ржХрзЛржерж╛ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ ржмрзБржЭрждрзЗ AS Path ржжрзЗржЦрж╛ рж╣рзЯред</li>
        <li>тЬЕ Weight ржжрзЗржЦрзЗ ржирж┐ржЬрзЗрж░ рждрзИрж░рж┐ ржирж╛ржХрж┐ рж╢рзЗржЦрж╛ рж░рзБржЯ рждрж╛ ржмрзЛржЭрж╛ ржпрж╛рзЯ (32768 ржорж╛ржирзЗ ржирж┐ржЬрзЗрж░ рждрзИрж░рж┐)ред</li>
    </ul>
    


<h1>ЁЯМР BGP ржЯрзЗржмрж┐рж▓ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг (ржмрж╛ржВрж▓рж╛рзЯ)</h1>

<h2>ЁЯУб рж░рж╛ржЙржЯрж╛рж░ R1 ржПрж░ BGP ржЯрзЗржмрж┐рж▓</h2>
<table border="1" cellpadding="8" cellspacing="0">
    <thead>
        <tr>
            <th>Network (ржирзЗржЯржУрзЯрж╛рж░рзНржХ)</th>
            <th>Next Hop (ржкрж░ржмрж░рзНрждрзА рж╣ржк)</th>
            <th>Metric</th>
            <th>LocPrf</th>
            <th>Weight</th>
            <th>AS Path (рж░рзБржЯрзЗрж░ ржкрже)</th>
            <th>ржмрзЗрж╕рзНржЯ рж░рзБржЯ?</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>10.12.1.0/24</td>
            <td>10.12.1.2</td>
            <td>0</td>
            <td>-</td>
            <td>0</td>
            <td>65200 i</td>
            <td>ржирж╛</td>
        </tr>
        <tr>
            <td>10.12.1.0/24</td>
            <td>0.0.0.0</td>
            <td>0</td>
            <td>-</td>
            <td>32768</td>
            <td>i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
        <tr>
            <td>192.168.1.1/32</td>
            <td>0.0.0.0</td>
            <td>0</td>
            <td>-</td>
            <td>32768</td>
            <td>i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
        <tr>
            <td>192.168.2.2/32</td>
            <td>10.12.1.2</td>
            <td>0</td>
            <td>-</td>
            <td>0</td>
            <td>65200 i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
    </tbody>
</table>

<h2>ЁЯУб рж░рж╛ржЙржЯрж╛рж░ R2 ржПрж░ BGP ржЯрзЗржмрж┐рж▓</h2>
<table border="1" cellpadding="8" cellspacing="0">
    <thead>
        <tr>
            <th>Network (ржирзЗржЯржУрзЯрж╛рж░рзНржХ)</th>
            <th>Next Hop (ржкрж░ржмрж░рзНрждрзА рж╣ржк)</th>
            <th>Metric</th>
            <th>LocPrf</th>
            <th>Weight</th>
            <th>AS Path (рж░рзБржЯрзЗрж░ ржкрже)</th>
            <th>ржмрзЗрж╕рзНржЯ рж░рзБржЯ?</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>10.12.1.0/24</td>
            <td>10.12.1.1</td>
            <td>0</td>
            <td>-</td>
            <td>0</td>
            <td>65100 i</td>
            <td>ржирж╛</td>
        </tr>
        <tr>
            <td>10.12.1.0/24</td>
            <td>0.0.0.0</td>
            <td>0</td>
            <td>-</td>
            <td>32768</td>
            <td>i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
        <tr>
            <td>192.168.1.1/32</td>
            <td>10.12.1.1</td>
            <td>0</td>
            <td>-</td>
            <td>0</td>
            <td>65100 i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
        <tr>
            <td>192.168.2.2/32</td>
            <td>0.0.0.0</td>
            <td>0</td>
            <td>-</td>
            <td>32768</td>
            <td>i</td>
            <td>тЬФя╕П (рж╣рзНржпрж╛ржБ)</td>
        </tr>
    </tbody>
</table>

<h3>ЁЯУМ ржоржирзЗ рж░рж╛ржЦрж╛рж░ ржЬржирзНржп:</h3>
<ul>
    <li><strong>Weight 32768</strong> ржорж╛ржирзЗ ржирж┐ржЬрж╕рзНржм рждрзИрж░рж┐ (local) рж░рзБржЯ, рж╕рж╛ржзрж╛рж░ржгржд ржмрзЗрж╕рзНржЯ рж╣рзЯред</li>
    <li><strong>AS Path</strong> ржжрж┐рзЯрзЗ ржмрзЛржЭрж╛ ржпрж╛рзЯ рж░рзБржЯ ржХрзЛржерж╛ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗред</li>
    <li><strong>Next Hop</strong> ржжрзЗржЦрзЗ ржЬрж╛ржирж╛ ржпрж╛рзЯ ржХрзЛржи IP-рждрзЗ рж░рзБржЯ ржкрж╛ржарж╛рждрзЗ рж╣ржмрзЗред</li>
    <li><strong>тЬФя╕П</strong> ржЪрж┐рж╣рзНржирж┐ржд рж░рзБржЯржЗ рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ ржпрж╛ржмрзЗред</li>
</ul>



<h1>ЁЯУК Table 11-4: BGP Table Fields (ржмрж╛ржВрж▓рж╛рзЯ ржмрзНржпрж╛ржЦрзНржпрж╛)</h1>

<table border="1" cellpadding="8" cellspacing="0">
    <thead>
        <tr>
            <th>Field (ржШрж░)</th>
            <th>Description (ржмрзНржпрж╛ржЦрзНржпрж╛)</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><b>Network</b></td>
            <td>
                ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕рзЗрж░ рждрж╛рж▓рж┐ржХрж╛, ржпрзЗржЧрзБрж▓рзЛ BGP ржЯрзЗржмрж┐рж▓рзЗ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред 
                ржПржХржЗ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕рзЗрж░ ржЬржирзНржп ржПржХрж╛ржзрж┐ржХ NLRI (Network Layer Reachability Information) ржерж╛ржХрж▓рзЗ ржкрзНрж░ржержоржЯрж┐ржХрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣рзЯ, ржмрж╛ржХрж┐ржЧрзБрж▓рзЛ ржлрж╛ржБржХрж╛ ржерж╛ржХрзЗред 
                <b>*</b> ржжрж┐рзЯрзЗ Valid (ржмрзИржз) рж░рзБржЯ ржжрзЗржЦрж╛рзЯ ржПржмржВ <b>></b> ржЪрж┐рж╣рзНржи рж╕рзЗрж░рж╛ (Best) ржкрже ржирж┐рж░рзНржжрзЗрж╢ ржХрж░рзЗред
            </td>
        </tr>
        <tr>
            <td><b>Next Hop</b></td>
            <td>
                ржкрж░ржмрж░рзНрждрзА рж╣ржкрзЗрж░ (Next Hop) IP ржарж┐ржХрж╛ржирж╛, ржпрзЗржЯрж╛ ржР ржирж┐рж░рзНржжрж┐рж╖рзНржЯ NLRI-рж░ ржЬржирзНржп ржмрзНржпржмрж╣рж╛рж░ рж╣ржмрзЗред 
                ржПржЯрж┐ ржПржХржЯрж┐ <b>Well-known Mandatory</b> BGP Attributeред
            </td>
        </tr>
        <tr>
            <td><b>Metric (MED)</b></td>
            <td>
                <b>Multiple Exit Discriminator (MED)</b>: ржР ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рзБржЯрзЗрж░ ржЬржирзНржп ржРржЪрзНржЫрж┐ржХ (Optional), 
                Non-Transitive BGP Path Attribute, ржпрж╛ ржмрж┐ржнрж┐ржирзНржи AS ржерзЗржХрзЗ ржЖрж╕рж╛ рж░рзБржЯрзЗрж░ ржоржзрзНржпрзЗ ржкржЫржирзНржжрзЗрж░ ржкрже ржирж┐рж░рзНржзрж╛рж░ржгрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред
            </td>
        </tr>
        <tr>
            <td><b>LocPrf (Local Preference)</b></td>
            <td>
                <b>Local Preference</b>: BGP Best Path ржирж┐рж░рзНржмрж╛ржЪржирзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд ржПржХржЯрж┐ Well-known Discretionary Attributeред 
                ржПржЯрж┐ рж░рж╛ржЙржЯрж╛рж░ ржирж┐ржЬрж╕рзНржм AS-ржПрж░ ржоржзрзНржпрзЗ рж░рзБржЯ ржкржЫржирзНржжрзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред
            </td>
        </tr>
        <tr>
            <td><b>Weight</b></td>
            <td>
                <b>Weight</b>: рж╢рзБржзрзБржорж╛рждрзНрж░ Cisco рж░рж╛ржЙржЯрж╛рж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж┐ Attributeред 
                ржПржЯрж┐ Locally Significant ржорж╛ржирзЗ рж╢рзБржзрзБржорж╛рждрзНрж░ ржирж┐ржЬрзЗрж░ рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржоржзрзНржпрзЗ ржкрзНрж░ржпрзЛржЬрзНржпред 
                BGP Best Path ржирж┐рж░рзНржмрж╛ржЪржирзЗрж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯред
            </td>
        </tr>
        <tr>
            <td><b>Path and Origin</b></td>
            <td>
                <b>AS_Path</b>: рж░рзБржЯ ржХрзЛржи ржХрзЛржи AS рж╣рзЯрзЗ ржПрж╕рзЗржЫрзЗ, рждрж╛рж░ рждрж╛рж▓рж┐ржХрж╛ред ржПржЯрж┐ ржПржХржЯрж┐ Well-known Mandatory Attributeред 
                рж░рзБржЯ рж▓рзБржк (Loop) ржкрзНрж░рждрж┐рж░рзЛржз ржУ Best Path ржирж┐рж░рзНржмрж╛ржЪржирзЗ ржмрзНржпржмрж╣рзГржд рж╣рзЯред<br><br>
                <b>Origin</b>: рж░рзБржЯрзЗрж░ ржЙрзОрж╕рзЗрж░ ржзрж░ржгред ржПржЯрж┐ рждрж┐ржиржнрж╛ржмрзЗ ржжрзЗржЦрж╛рзЯ:
                <ul>
                    <li><b>i</b>: IGP (Interior Gateway Protocol) ржерзЗржХрзЗ ржЖрж╕рж╛ред</li>
                    <li><b>e</b>: EGP (Exterior Gateway Protocol) ржерзЗржХрзЗ ржЖрж╕рж╛ред</li>
                    <li><b>?</b>: ржЕржирзНржп ржкрзНрж░рзЛржЯрзЛржХрж▓ ржерзЗржХрзЗ BGP рждрзЗ рж░рж┐ржбрж┐рж╕рзНржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржХрж░рж╛ рж╣рзЯрзЗржЫрзЗред</li>
                </ul>
            </td>
        </tr>
    </tbody>
</table>

<h3>ЁЯУЪ рж╕ржВржХрзНрж╖рзЗржкрзЗ:</h3>
<ul>
    <li>тЬЕ <b>Network</b>: ржХрзЛржи ржХрзЛржи ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржкрзНрж░рж┐ржлрж┐ржХрзНрж╕ ржЗржирж╕рзНржЯрж▓ рж╣рзЯрзЗржЫрзЗред</li>
    <li>тЬЕ <b>Next Hop</b>: ржкрж░ржмрж░рзНрждрзА ржЧржирзНрждржмрзНржп IPред</li>
    <li>тЬЕ <b>Metric (MED)</b>: ржПржХрж╛ржзрж┐ржХ ржкрзНрж░ржмрзЗрж╢ ржкрже ржерж╛ржХрж▓рзЗ ржХрзЛржиржЯрж╛ ржмрзЗржЫрзЗ ржирзЗржмрзЗред</li>
    <li>тЬЕ <b>Local Preference (LocPrf)</b>: ржирж┐ржЬрзЗрж░ AS-ржП ржХрзЛржи рж░рзБржЯ ржмрзЗрж╢рж┐ ржкржЫржирзНржжрзЗрж░ред</li>
    <li>тЬЕ <b>Weight</b>: ржирж┐ржЬрзЗрж░ рждрзИрж░рж┐ ржУ рж╢рзЗржЦрж╛ рж░рзБржЯ ржЖрж▓рж╛ржжрж╛ ржХрж░рж╛рж░ ржЬржирзНржп ржУржЬржиред</li>
    <li>тЬЕ <b>AS Path & Origin</b>: рж░рзБржЯ ржХрзЛржерж╛ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗ ржПржмржВ рж▓рзБржк ржкрзНрж░рждрж┐рж░рзЛржзред</li>
</ul>



    <h1>ржЕржзрж┐ржХрзГржд BGP ржкрже ржПржмржВ ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржкрзНрж░ржжрж░рзНрж╢ржи</h1>
    <p>
        <code>show bgp afi safi network</code> ржХржорж╛ржирзНржбржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж┐ рж░рзБржЯрзЗрж░ ржЬржирзНржп рж╕ржорж╕рзНржд ржкрже ржПржмржВ рж╕рзЗржЗ рж░рзБржЯрзЗрж░ BGP ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯржЧрзБрж▓рж┐ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗред ржЙржжрж╛рж╣рж░ржг рззрзз-рзн рждрзЗ 10.12.1.0/24 ржирзЗржЯржУрзЯрж╛рж░рзНржХрзЗрж░ ржЬржирзНржп ржкржержЧрзБрж▓рзЛ ржкрзНрж░ржжрж░рзНрж╢рж┐ржд рж╣рзЯрзЗржЫрзЗред ржЖржЙржЯржкрзБржЯрзЗ ржкржержЧрзБрж▓рзЛрж░ рж╕ржВржЦрзНржпрж╛ ржПржмржВ ржХрзЛржи ржкржержЯрж┐ рж╕рзЗрж░рж╛ ржкрже рждрж╛ ржжрзЗржЦрж╛ ржпрж╛рзЯред
    </p>
    
    <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рзн: рж╕рзНржкрж╖рзНржЯ BGP рж░рзБржЯ ржПржмржВ ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржжрзЗржЦрж╛ржирзЛ</h2>
    <pre>
R1# show bgp ipv4 unicast 10.12.1.0
BGP routing table entry for 10.12.1.0/24, version 2
Paths: (2 available, best #2, table default)
Advertised to update-groups:
2
Refresh Epoch 1
65200
10.12.1.2 from 10.12.1.2 (192.168.2.2)
Origin IGP, metric 0, localpref 100, valid, external
rx pathid: 0, tx pathid: 0
Refresh Epoch 1
Local
0.0.0.0 from 0.0.0.0 (192.168.1.1)
Origin IGP, metric 0, localpref 100, weight 32768, valid, sourced, local, best
rx pathid: 0, tx pathid: 0x0
    </pre>
    
    <p><strong>ржирзЛржЯ:</strong> <code>show bgp afi safi detail</code> ржХржорж╛ржирзНржбржЯрж┐ ржкрзБрж░рзЛ BGP ржЯрзЗржмрж┐рж▓ржЯрж┐ ржПржмржВ рж╕ржорж╕рзНржд ржкрж╛рже ржЕрзНржпрж╛ржЯрзНрж░рж┐ржмрж┐ржЙржЯ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗ, ржпрзЗржоржи ржЙржжрж╛рж╣рж░ржг рззрзз-рзн-ржП ржжрзЗржЦрж╛ржирзЛ рж╣рзЯрзЗржЫрзЗред</p>

    <h2>Adj-RIB-Out ржЯрзЗржмрж┐рж▓</h2>
    <p>
        ржПржЗ ржЯрзЗржмрж┐рж▓ржЯрж┐ ржкрзНрж░рждрж┐ржЯрж┐ BGP ржкрж┐рзЯрж╛рж░ ржЬржирзНржп ржПржХржЯрж┐ ржЗржЙржирж┐ржХ ржЯрзЗржмрж┐рж▓, ржпрж╛ ржирзЗржЯржУрзЯрж╛рж░рзНржХ ржЗржЮрзНржЬрж┐ржирж┐рзЯрж╛рж░ржжрзЗрж░ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ рж░рж╛ржЙржЯрж╛рж░ржХрзЗ ржпрзЗ рж░рзБржЯржЧрзБрж▓рзЛ ржмрж┐ржЬрзНржЮржкрзНрждрж┐ рж╣рж┐рж╕рзЗржмрзЗ ржкрж╛ржарж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ рждрж╛ ржжрзЗржЦрждрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржХрж░рзЗред <code>show bgp afi safi neighbor ip-address advertised-routes</code> ржХржорж╛ржирзНржбржЯрж┐ ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржПржХржЯрж┐ ржкрж┐рзЯрж╛рж░рзЗрж░ Adj-RIB-Out ржЯрзЗржмрж┐рж▓рзЗрж░ ржмрж┐рж╖рзЯржмрж╕рзНрждрзБ ржкрзНрж░ржжрж░рзНрж╢ржи ржХрж░рзЗред
    </p>
    
    <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рзо: ржкрж┐рзЯрж╛рж░-ржирж┐рж░рзНржжрж┐рж╖рзНржЯ Adj-RIB-Out ржЯрзЗржмрж┐рж▓ ржжрзЗржЦрж╛ржирзЛ</h2>
    <pre>
R1# show bgp ipv4 unicast neighbors 10.12.1.2 advertised-routes
! Output omitted for brevity
Network          Next Hop            Metric LocPrf Weight Path
*> 10.12.1.0/24     0.0.0.0                  0         32768 i
*> 192.168.1.1/32   0.0.0.0                  0         32768 i
Total number of prefixes 2
    </pre>
    
    <h2>BGP рж╕рж╛рж░рж╛ржВрж╢</h2>
    <p>
        <code>show bgp ipv4 unicast summary</code> ржХржорж╛ржирзНржбржЯрж┐ NLRIs (Network Layer Reachability Information) ржПрж░ ржЖржжрж╛ржи-ржкрзНрж░ржжрж╛ржи ржпрж╛ржЪрж╛ржЗ ржХрж░рждрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ ржпрзЗрждрзЗ ржкрж╛рж░рзЗред
    </p>
    
    <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рзп: BGP рж╕рж╛рж░рж╛ржВрж╢рзЗ Prefixes ржПрж░ ржЖржжрж╛ржи-ржкрзНрж░ржжрж╛ржи</h2>
    <pre>
R1# show bgp ipv4 unicast summary
! Output omitted for brevity
Neighbor        V           AS MsgRcvd MsgSent   TblVer  InQ OutQ Up/Down  State/
PfxRcd
10.12.1.2       4        65200      11      10        9    0    0 00:04:56        2
    </pre>
    
    <h2>BGP рж░рзБржЯржЧрзБрж▓рзЛ ржкрзНрж░ржжрж░рзНрж╢ржи</h2>
    <p>
        ржЧрзНрж▓рзЛржмрж╛рж▓ IP рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗрж░ BGP рж░рзБржЯржЧрзБрж▓рж┐ ржжрзЗржЦрждрзЗ <code>show ip route bgp</code> ржХржорж╛ржирзНржбржЯрж┐ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣рзЯред ржЙржжрж╛рж╣рж░ржг рззрзз-рззрзж рждрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣рзЯрзЗржЫрзЗ, ржпрзЗржЦрж╛ржирзЗ eBGP рж╕рзЗрж╢ржирзЗрж░ prefixes AD 20 рждрзЗ ржерж╛ржХрзЗ ржПржмржВ ржХрзЛржиржУ ржорзЗржЯрзНрж░рж┐ржХ ржирзЗржЗред
    </p>
    
    <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рззрзж: IP рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓рзЗ BGP рж░рзБржЯ ржкрзНрж░ржжрж░рзНрж╢ржи</h2>
    <pre>
R1# show ip route bgp | begin Gateway
Gateway of last resort is not set
192.168.2.0/32 is subnetted, 1 subnets
B        192.168.2.2 [20/0] via 10.12.1.2, 00:06:12
    </pre>


        <h1>BGP рж░рзБржЯ ржмрж┐ржЬрзНржЮржкрзНрждрж┐ (Route Advertisements) ржкрж░рзЛржХрзНрж╖ ржЙрзОрж╕ (Indirect Sources) ржерзЗржХрзЗ</h1>
    
        <p>ржЖржЧрзЗржЗ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ, BGP-ржХрзЗ ржПржХржЯрж┐ <strong>рж░рж╛ржЙржЯрж┐ржВ ржЕрзНржпрж╛ржкрзНрж▓рж┐ржХрзЗрж╢ржи</strong> (routing application) рж╣рж┐рж╕рзЗржмрзЗ ржнрж╛ржмрж╛ ржЙржЪрж┐ржд, ржХрж╛рж░ржг <strong>BGP рж╕рзЗрж╢ржи</strong> (BGP session) ржПржмржВ <strong>рж░рзБржЯ ржмрж┐ржЬрзНржЮржкрзНрждрж┐</strong> (route advertisement) ржжрзБржЯрж┐ ржЖрж▓рж╛ржжрж╛ ржмрж┐рж╖рзЯред</p>
    
        <p><strong>Figure 11-10</strong>-ржП ржПржоржи ржПржХржЯрж┐ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржЯржкрзЛрж▓ржЬрж┐ ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ ржпрзЗржЦрж╛ржирзЗ <strong>R1 рж░рж╛ржЙржЯрж╛рж░ржЯрж┐</strong> ржмрж┐ржнрж┐ржирзНржиржнрж╛ржмрзЗ (static route, EIGRP, OSPF) рж╢рзЗржЦрж╛ (learned) рж╣ржУржпрж╝рж╛ ржЕржирзЗржХржЧрзБрж▓рзЛ рж░рзБржЯ ржЗржирж╕рзНржЯрж▓ (install) ржХрж░рзЗред R1 ржПржЗ рж░рзБржЯржЧрзБрж▓рзЛ <strong>R2-ржХрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи (advertise)</strong> ржХрж░рждрзЗ ржкрж╛рж░рзЗред</p>
    
        <h3>ржЯржкрзЛрж▓ржЬрж┐рж░ ржмрж░рзНржгржирж╛:</h3>
        <ul>
            <li>R3, R4, R5 ржПрж░ Loopback IP ржЧрзБрж▓рзЛ ржпржерж╛ржХрзНрж░ржорзЗ:
                <ul>
                    <li>R3: 192.168.3.3</li>
                    <li>R4: 192.168.4.4</li>
                    <li>R5: 192.168.5.5</li>
                </ul>
            </li>
            <li>R1 ржУ R2 ржжрзБржЗржЯрж┐ ржЖрж▓рж╛ржжрж╛ AS (Autonomous System):
                <ul>
                    <li>R1: AS 65100</li>
                    <li>R2: AS 65200</li>
                </ul>
            </li>
            <li>ржмрж┐ржнрж┐ржирзНржи ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ рж╕ржВржпрзЛржЧ:
                <ul>
                    <li>10.12.1.0/24</li>
                    <li>10.13.1.0/24</li>
                    <li>10.14.1.0/24</li>
                    <li>10.15.1.0/24</li>
                </ul>
            </li>
            <li>EIGRP ржПржмржВ OSPF ржмрзНржпржмрж╣рзГржд рж╣ржЪрзНржЫрзЗ ржХрж┐ржЫрзБ рж▓рж┐ржВржХрзЗред</li>
        </ul>
    
        <p><strong>Example 11-11</strong>-ржП <strong>R1 рж░рж╛ржЙржЯрж╛рж░рзЗрж░ рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓</strong> (Routing Table) ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗред ржПржЦрж╛ржирзЗ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ ржпрзЗ:</p>
        <ul>
            <li>R3 ржПрж░ loopback (192.168.3.3) <strong>EIGRP</strong> ржжрзНржмрж╛рж░рж╛ рж╢рзЗржЦрж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
            <li>R4 ржПрж░ loopback (192.168.4.4) <strong>static route</strong> рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
            <li>R5 ржПрж░ loopback (192.168.5.5) <strong>OSPF</strong> ржПрж░ ржорж╛ржзрзНржпржорзЗ рж╢рзЗржЦрж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
        </ul>
    
        <h3>ржЙржжрж╛рж╣рж░ржг (Routing Table):</h3>
        <pre>
    R1# show ip route
    ! рж╕ржВржХрзНрж╖рзЗржкрж┐ржд ржЖржЙржЯржкрзБржЯ
    Codes: L - local, C - connected, S - static, R - RIP, M - mobile, B - BGP
    D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
    ..
    Gateway of last resort is not set
    10.0.0.0/8 is variably subnetted, 8 subnets, 2 masks
    C 10.12.1.0/24 is directly connected, GigabitEthernet0/0
    C 10.13.1.0/24 is directly connected, GigabitEthernet0/1
    C 10.14.1.0/24 is directly connected, GigabitEthernet0/2
    C 10.15.1.0/24 is directly connected, GigabitEthernet0/3
    C 192.168.1.1 is directly connected, Loopback0
    B 192.168.2.2 [20/0] via 10.12.1.2, 00:01:17
    D 192.168.3.3 [90/3584] via 10.13.1.3, 00:02:10, GigabitEthernet0/1
    S 192.168.4.4 [1/0] via 10.14.1.4
    O 192.168.5.5 [110/11] via 10.15.1.5, 00:00:08, GigabitEthernet0/3
        </pre>
    
        <h3>ржмрзНржпрж╛ржЦрзНржпрж╛:</h3>
        <ul>
            <li><strong>C</strong> (Connected): рж╕рж░рж╛рж╕рж░рж┐ рж╕ржВржпрзБржХрзНржд ржирзЗржЯржУржпрж╝рж╛рж░рзНржХред</li>
            <li><strong>B</strong> (BGP): BGP ржжрзНржмрж╛рж░рж╛ рж╢рзЗржЦрж╛ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХред</li>
            <li><strong>D</strong> (EIGRP): EIGRP ржжрзНржмрж╛рж░рж╛ рж╢рзЗржЦрж╛ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХред</li>
            <li><strong>S</strong> (Static): Static Routeред</li>
            <li><strong>O</strong> (OSPF): OSPF ржжрзНржмрж╛рж░рж╛ рж╢рзЗржЦрж╛ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХред</li>
        </ul>
    
        <p><strong>Example 11-12</strong>-рждрзЗ ржжрзЗржЦрж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ ржХрж┐ржнрж╛ржмрзЗ R3 ржУ R4 ржПрж░ loopback IP ржЧрзБрж▓рзЛ <strong>network statement</strong> ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ BGP-рждрзЗ ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
    
        <p>рждржмрзЗ, ржкрзНрж░рждрж┐ржЯрж┐ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ ржЙрж▓рзНрж▓рзЗржЦ ржХрж░рж╛ <strong>ржЭрж╛ржорзЗрж▓рж╛ржкрзВрж░рзНржг (tedious)</strong> рж╣рждрзЗ ржкрж╛рж░рзЗред</p>
    
        <p>ржЕржкрж░ржжрж┐ржХрзЗ, <strong>R5 ржПрж░ loopback</strong> OSPF ржерзЗржХрзЗ рж╕рж░рж╛рж╕рж░рж┐ <strong>BGP-рждрзЗ redistributing</strong> ржХрж░рзЗ ржпрзБржХрзНржд ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</p>
    
        <h3>рж╕рж╛рж░рж╛ржВрж╢:</h3>
        <ul>
            <li>R1 ржмрж┐ржнрж┐ржирзНржи рж╕рзЛрж░рзНрж╕ (static, EIGRP, OSPF) ржерзЗржХрзЗ рж░рзБржЯ рж╢рж┐ржЦрзЗ BGP-рждрзЗ advertise ржХрж░рзЗред</li>
            <li>Routing table-ржП рж╕рзНржкрж╖рзНржЯ ржжрзЗржЦрж╛ ржпрж╛ржпрж╝ ржХрзЛржи рж░рзБржЯ ржХрзЛржи ржкрзНрж░рзЛржЯрзЛржХрж▓ ржерзЗржХрзЗ ржПрж╕рзЗржЫрзЗред</li>
            <li>BGP-рждрзЗ ржирзЗржЯржУржпрж╝рж╛рж░рзНржХ advertise ржХрж░рж╛рж░ ржЬржирзНржп ржХржЦржирзЛ рж╕рж░рж╛рж╕рж░рж┐ <code>network</code> ржХржорж╛ржирзНржб, ржХржЦржирзЛ redistributing ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝ред</li>
        </ul>

          <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рззрзи: рж╕ржВржпрзЛржЧржмрж┐рж╣рзАржи (Non-Connected) рж░рзБржЯржЧрзБрж▓рзЛ BGP-рждрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи</h2>
        
          <h3>ЁЯФ╣ R1 рж░рж╛ржЙржЯрж╛рж░рзЗрж░ ржХржиржлрж┐ржЧрж╛рж░рзЗрж╢ржи:</h3>
          <pre>
        router bgp 65100
         bgp log-neighbor-changes
         network 10.12.1.0 mask 255.255.255.0
         network 192.168.1.1 mask 255.255.255.255
         network 192.168.3.3 mask 255.255.255.255
         network 192.168.4.4 mask 255.255.255.255
         redistribute ospf 1
         neighbor 10.12.1.2 remote-as 65200
          </pre>
        
          <h3>ЁЯФ╕ ржмрзНржпрж╛ржЦрзНржпрж╛:</h3>
          <ul>
            <li><b>router bgp 65100:</b> R1 ржПрж░ AS ржиржорзНржмрж░ 65100 ржжрж┐рзЯрзЗ BGP ржЪрж╛рж▓рзБ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</li>
            <li><b>bgp log-neighbor-changes:</b> ржкрзНрж░рждрж┐ржмрзЗрж╢рзАрж░ (neighbor) ржЕржмрж╕рзНржерж╛ ржкрж░рж┐ржмрж░рзНрждржи рж╣рж▓рзЗ рждрж╛ рж▓ржЧ рж╣ржмрзЗред</li>
            <li><b>network:</b> ржирж┐рж░рзНржжрж┐рж╖рзНржЯ ржирзЗржЯржУрзЯрж╛рж░рзНржХржЧрзБрж▓рзЛ BGP-рждрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи (advertise) ржХрж░рж╛ рж╣ржмрзЗред</li>
            <li><b>redistribute ospf 1:</b> OSPF ржерзЗржХрзЗ рж╢рзЗржЦрж╛ рж░рзБржЯржЧрзБрж▓рзЛ BGP-рждрзЗ ржЖржирж╛ рж╣ржмрзЗред</li>
            <li><b>neighbor 10.12.1.2 remote-as 65200:</b> ржкрзНрж░рждрж┐ржмрзЗрж╢рзА рж░рж╛ржЙржЯрж╛рж░ ржпрж╛рж░ AS 65200ред</li>
          </ul>
        
          <h3>тЪая╕П ржоржирзНрждржмрзНржп:</h3>
          <p>IGP ржерзЗржХрзЗ рж╢рзЗржЦрж╛ рж░рзБржЯржЧрзБрж▓рзЛ BGP-рждрзЗ ржЖржирж╛ ржирж┐рж░рж╛ржкржжред рждржмрзЗ BGP ржерзЗржХрзЗ рж╢рзЗржЦрж╛ рж░рзБржЯ IGP-рждрзЗ ржЖржирж╛ ржЭрзБржБржХрж┐ржкрзВрж░рзНржгред ржХрж╛рж░ржг, BGP ржмрзЬ ржЗржирзНржЯрж╛рж░ржирзЗржЯ рж▓рзЗржнрзЗрж▓рзЗрж░ рж░рж╛ржЙржЯрж┐ржВ рж╕рж╛ржорж▓рж╛рждрзЗ ржкрж╛рж░рзЗ, ржпрзЗржЦрж╛ржирзЗ IGP рж╕рзАржорж┐ржд рж░рзБржЯ ржирж┐рждрзЗ ржкрж╛рж░рзЗред</p>
        
          <h2>ржЙржжрж╛рж╣рж░ржг рззрзз-рззрзй: R1 ржПржмржВ R2 ржПрж░ BGP рж░рж╛ржЙржЯрж┐ржВ ржЯрзЗржмрж┐рж▓</h2>
        
          <h3>ЁЯФ╖ R1 ржПрж░ BGP ржЯрзЗржмрж┐рж▓:</h3>
          <pre>
        R1# show bgp ipv4 unicast
        Network          Next Hop            Metric LocPrf Weight Path
        *> 10.12.1.0/24     0.0.0.0                  0         32768 i
        *  10.12.1.2                0             0 65200 i
        *> 10.15.1.0/24     0.0.0.0                  0         32768 ?
        *> 192.168.1.1/32   0.0.0.0                  0         32768 i
        *> 192.168.2.2/32   10.12.1.2                0             0 65200 i
        *> 192.168.3.3/32   10.13.1.3             3584         32768 i
        *> 192.168.4.4/32   10.14.1.4                0         32768 i
        *> 192.168.5.5/32   10.15.1.5               11         32768 ?
          </pre>
        
          <h3>ЁЯФ╕ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг:</h3>
          <ul>
            <li><b>192.168.3.3/32:</b> EIGRP ржерзЗржХрзЗ рж╢рзЗржЦрж╛, IGP (i) originред</li>
            <li><b>192.168.4.4/32:</b> Static route, IGP (i)ред</li>
            <li><b>192.168.5.5/32:</b> OSPF ржерзЗржХрзЗ Redistribute ржХрж░рж╛, рждрж╛ржЗ incomplete (?)ред</li>
            <li>IGP ржерзЗржХрзЗ ржЖрж╕рж╛ ржорзЗржЯрзНрж░рж┐ржХ (Metric) MED рж╣рж┐рж╕рзЗржмрзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯред</li>
          </ul>
        
          <h3>ЁЯФ╖ R2 ржПрж░ BGP ржЯрзЗржмрж┐рж▓:</h3>
          <pre>
        R2# show bgp ipv4 unicast | begin Network
        Network          Next Hop Metric LocPrf Weight Path
        * 10.12.1.0/24     10.12.1.1 0 0 65100 i
        *> 0.0.0.0 0 32768 i
        *> 10.15.1.0/24     10.12.1.1 0 0 65100 ?
        *> 192.168.1.1/32   10.12.1.1 0 0 65100 i
        *> 192.168.2.2/32   0.0.0.0 0 32768 i
        *> 192.168.3.3/32   10.12.1.1 3584 0 65100 i
        *> 192.168.4.4/32   10.12.1.1 0 0 65100 i
        *> 192.168.5.5/32   10.12.1.1 11 0 65100 ?
          </pre>
        
          <h3>ЁЯФ╕ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг:</h3>
          <ul>
            <li>R2 рж╕ржм рж░рзБржЯржЧрзБрж▓рзЛ eBGP ржжрзНржмрж╛рж░рж╛ R1 ржерзЗржХрзЗ ржкрзЗрзЯрзЗржЫрзЗред</li>
            <li>рж╕ржм рж░рзБржЯрзЗрж░ рж╢рзЗрж╖рзЗ 65100 AS ржирж╛ржорзНржмрж╛рж░ ржЖржЫрзЗред</li>
            <li><b>192.168.3.3/32:</b> ржорзЗржЯрзНрж░рж┐ржХ 3584, ржорж╛ржирзЗ R3 ржерзЗржХрзЗ ржЖрж╕рж╛ ржорзЗржЯрзНрж░рж┐ржХред</li>
            <li><b>192.168.5.5/32:</b> OSPF ржерзЗржХрзЗ ржЖрж╕рж╛, incomplete (?)ред</li>
          </ul>
        
          <h2>тЬЕ ржорзВрж▓ ржкржпрж╝рзЗржирзНржЯ:</h2>
          <ul>
            <li>R1 ржмрж┐ржнрж┐ржирзНржи ржкрзНрж░рзЛржЯрзЛржХрж▓ ржерзЗржХрзЗ рж░рзБржЯ рж╢рж┐ржЦрзЗ BGP-рждрзЗ ржмрж┐ржЬрзНржЮрж╛ржкржи ржжрзЗрзЯред</li>
            <li>R1 ржПрж░ BGP ржЯрзЗржмрж┐рж▓рзЗ ржжрзЗржЦрж╛ ржпрж╛рзЯ рж░рзБржЯржЧрзБрж▓рзЛрж░ ржЙрждрзНрж╕ ржХрзЛржерж╛ ржерзЗржХрзЗред</li>
            <li>R2 рж╢рзБржзрзБржорж╛рждрзНрж░ R1 ржерзЗржХрзЗ ржкрж╛ржУрзЯрж╛ рж░рзБржЯржЧрзБрж▓рзЛ ржжрзЗржЦрзЗред</li>
            <li>OSPF ржерзЗржХрзЗ Redistribute рж╣ржУрзЯрж╛ рж░рзБржЯржЧрзБрж▓рзЛ incomplete (?) origin ржкрж╛рзЯред</li>
            <li>IGP ржерзЗржХрзЗ рж╢рзЗржЦрж╛ рж░рзБржЯржЧрзБрж▓рзЛ i (IGP) origin ржкрж╛рзЯред</li>
            <li>IGP ржорзЗржЯрзНрж░рж┐ржХ MED (Metric) рж╣рж┐рж╕рзЗржмрзЗ ржЖрж╕рзЗред</li>
          </ul>
        


</body>
</html>
